function Lx(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();function qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),i}var Dc={exports:{}},Jr={};var ig;function jx(){if(ig)return Jr;ig=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:t,type:r,key:u,ref:o!==void 0?o:null,props:l}}return Jr.Fragment=e,Jr.jsx=i,Jr.jsxs=i,Jr}var sg;function zx(){return sg||(sg=1,Dc.exports=jx()),Dc.exports}var y=zx(),kc={exports:{}},de={};var rg;function Hx(){if(rg)return de;rg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function E(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,R={};function T(U,J,W){this.props=U,this.context=J,this.refs=R,this.updater=W||C}T.prototype.isReactComponent={},T.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=T.prototype;function A(U,J,W){this.props=U,this.context=J,this.refs=R,this.updater=W||C}var j=A.prototype=new D;j.constructor=A,N(j,T.prototype),j.isPureReactComponent=!0;var K=Array.isArray;function Q(){}var Y={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function V(U,J,W){var ne=W.ref;return{$$typeof:t,type:U,key:J,ref:ne!==void 0?ne:null,props:W}}function re(U,J){return V(U.type,J,U.props)}function pe(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function ce(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(W){return J[W]})}var Oe=/\/+/g;function tt(U,J){return typeof U=="object"&&U!==null&&U.key!=null?ce(""+U.key):J.toString(36)}function vt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(Q,Q):(U.status="pending",U.then(function(J){U.status==="pending"&&(U.status="fulfilled",U.value=J)},function(J){U.status==="pending"&&(U.status="rejected",U.reason=J)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function z(U,J,W,ne,fe){var ye=typeof U;(ye==="undefined"||ye==="boolean")&&(U=null);var Ae=!1;if(U===null)Ae=!0;else switch(ye){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(U.$$typeof){case t:case e:Ae=!0;break;case _:return Ae=U._init,z(Ae(U._payload),J,W,ne,fe)}}if(Ae)return fe=fe(U),Ae=ne===""?"."+tt(U,0):ne,K(fe)?(W="",Ae!=null&&(W=Ae.replace(Oe,"$&/")+"/"),z(fe,J,W,"",function(er){return er})):fe!=null&&(pe(fe)&&(fe=re(fe,W+(fe.key==null||U&&U.key===fe.key?"":(""+fe.key).replace(Oe,"$&/")+"/")+Ae)),J.push(fe)),1;Ae=0;var mt=ne===""?".":ne+":";if(K(U))for(var Je=0;Je<U.length;Je++)ne=U[Je],ye=mt+tt(ne,Je),Ae+=z(ne,J,W,ye,fe);else if(Je=E(U),typeof Je=="function")for(U=Je.call(U),Je=0;!(ne=U.next()).done;)ne=ne.value,ye=mt+tt(ne,Je++),Ae+=z(ne,J,W,ye,fe);else if(ye==="object"){if(typeof U.then=="function")return z(vt(U),J,W,ne,fe);throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function X(U,J,W){if(U==null)return U;var ne=[],fe=0;return z(U,ne,"","",function(ye){return J.call(W,ye,fe++)}),ne}function ue(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(W){(U._status===0||U._status===-1)&&(U._status=1,U._result=W)},function(W){(U._status===0||U._status===-1)&&(U._status=2,U._result=W)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var Me=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Ue={map:X,forEach:function(U,J,W){X(U,function(){J.apply(this,arguments)},W)},count:function(U){var J=0;return X(U,function(){J++}),J},toArray:function(U){return X(U,function(J){return J})||[]},only:function(U){if(!pe(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return de.Activity=b,de.Children=Ue,de.Component=T,de.Fragment=i,de.Profiler=o,de.PureComponent=A,de.StrictMode=r,de.Suspense=p,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,de.__COMPILER_RUNTIME={__proto__:null,c:function(U){return Y.H.useMemoCache(U)}},de.cache=function(U){return function(){return U.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(U,J,W){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ne=N({},U.props),fe=U.key;if(J!=null)for(ye in J.key!==void 0&&(fe=""+J.key),J)!G.call(J,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&J.ref===void 0||(ne[ye]=J[ye]);var ye=arguments.length-2;if(ye===1)ne.children=W;else if(1<ye){for(var Ae=Array(ye),mt=0;mt<ye;mt++)Ae[mt]=arguments[mt+2];ne.children=Ae}return V(U.type,fe,ne)},de.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},de.createElement=function(U,J,W){var ne,fe={},ye=null;if(J!=null)for(ne in J.key!==void 0&&(ye=""+J.key),J)G.call(J,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(fe[ne]=J[ne]);var Ae=arguments.length-2;if(Ae===1)fe.children=W;else if(1<Ae){for(var mt=Array(Ae),Je=0;Je<Ae;Je++)mt[Je]=arguments[Je+2];fe.children=mt}if(U&&U.defaultProps)for(ne in Ae=U.defaultProps,Ae)fe[ne]===void 0&&(fe[ne]=Ae[ne]);return V(U,ye,fe)},de.createRef=function(){return{current:null}},de.forwardRef=function(U){return{$$typeof:f,render:U}},de.isValidElement=pe,de.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:ue}},de.memo=function(U,J){return{$$typeof:h,type:U,compare:J===void 0?null:J}},de.startTransition=function(U){var J=Y.T,W={};Y.T=W;try{var ne=U(),fe=Y.S;fe!==null&&fe(W,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Q,Me)}catch(ye){Me(ye)}finally{J!==null&&W.types!==null&&(J.types=W.types),Y.T=J}},de.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},de.use=function(U){return Y.H.use(U)},de.useActionState=function(U,J,W){return Y.H.useActionState(U,J,W)},de.useCallback=function(U,J){return Y.H.useCallback(U,J)},de.useContext=function(U){return Y.H.useContext(U)},de.useDebugValue=function(){},de.useDeferredValue=function(U,J){return Y.H.useDeferredValue(U,J)},de.useEffect=function(U,J){return Y.H.useEffect(U,J)},de.useEffectEvent=function(U){return Y.H.useEffectEvent(U)},de.useId=function(){return Y.H.useId()},de.useImperativeHandle=function(U,J,W){return Y.H.useImperativeHandle(U,J,W)},de.useInsertionEffect=function(U,J){return Y.H.useInsertionEffect(U,J)},de.useLayoutEffect=function(U,J){return Y.H.useLayoutEffect(U,J)},de.useMemo=function(U,J){return Y.H.useMemo(U,J)},de.useOptimistic=function(U,J){return Y.H.useOptimistic(U,J)},de.useReducer=function(U,J,W){return Y.H.useReducer(U,J,W)},de.useRef=function(U){return Y.H.useRef(U)},de.useState=function(U){return Y.H.useState(U)},de.useSyncExternalStore=function(U,J,W){return Y.H.useSyncExternalStore(U,J,W)},de.useTransition=function(){return Y.H.useTransition()},de.version="19.2.0",de}var og;function Cd(){return og||(og=1,kc.exports=Hx()),kc.exports}var M=Cd(),Uc={exports:{}},Yr={},Pc={exports:{}},Oc={};var ag;function Gx(){return ag||(ag=1,(function(t){function e(z,X){var ue=z.length;z.push(X);e:for(;0<ue;){var Me=ue-1>>>1,Ue=z[Me];if(0<o(Ue,X))z[Me]=X,z[ue]=Ue,ue=Me;else break e}}function i(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],ue=z.pop();if(ue!==X){z[0]=ue;e:for(var Me=0,Ue=z.length,U=Ue>>>1;Me<U;){var J=2*(Me+1)-1,W=z[J],ne=J+1,fe=z[ne];if(0>o(W,ue))ne<Ue&&0>o(fe,W)?(z[Me]=fe,z[ne]=ue,Me=ne):(z[Me]=W,z[J]=ue,Me=J);else if(ne<Ue&&0>o(fe,ue))z[Me]=fe,z[ne]=ue,Me=ne;else break e}}return X}function o(z,X){var ue=z.sortIndex-X.sortIndex;return ue!==0?ue:z.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var p=[],h=[],_=1,b=null,x=3,E=!1,C=!1,N=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var X=i(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=z)r(h),X.sortIndex=X.expirationTime,e(p,X);else break;X=i(h)}}function K(z){if(N=!1,j(z),!C)if(i(p)!==null)C=!0,Q||(Q=!0,ce());else{var X=i(h);X!==null&&vt(K,X.startTime-z)}}var Q=!1,Y=-1,G=5,V=-1;function re(){return R?!0:!(t.unstable_now()-V<G)}function pe(){if(R=!1,Q){var z=t.unstable_now();V=z;var X=!0;try{e:{C=!1,N&&(N=!1,D(Y),Y=-1),E=!0;var ue=x;try{t:{for(j(z),b=i(p);b!==null&&!(b.expirationTime>z&&re());){var Me=b.callback;if(typeof Me=="function"){b.callback=null,x=b.priorityLevel;var Ue=Me(b.expirationTime<=z);if(z=t.unstable_now(),typeof Ue=="function"){b.callback=Ue,j(z),X=!0;break t}b===i(p)&&r(p),j(z)}else r(p);b=i(p)}if(b!==null)X=!0;else{var U=i(h);U!==null&&vt(K,U.startTime-z),X=!1}}break e}finally{b=null,x=ue,E=!1}X=void 0}}finally{X?ce():Q=!1}}}var ce;if(typeof A=="function")ce=function(){A(pe)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,tt=Oe.port2;Oe.port1.onmessage=pe,ce=function(){tt.postMessage(null)}}else ce=function(){T(pe,0)};function vt(z,X){Y=T(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var ue=x;x=X;try{return z()}finally{x=ue}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ue=x;x=z;try{return X()}finally{x=ue}},t.unstable_scheduleCallback=function(z,X,ue){var Me=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Me+ue:Me):ue=Me,z){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ue+Ue,z={id:_++,callback:X,priorityLevel:z,startTime:ue,expirationTime:Ue,sortIndex:-1},ue>Me?(z.sortIndex=ue,e(h,z),i(p)===null&&z===i(h)&&(N?(D(Y),Y=-1):N=!0,vt(K,ue-Me))):(z.sortIndex=Ue,e(p,z),C||E||(C=!0,Q||(Q=!0,ce()))),z},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(z){var X=x;return function(){var ue=x;x=X;try{return z.apply(this,arguments)}finally{x=ue}}}})(Oc)),Oc}var lg;function Vx(){return lg||(lg=1,Pc.exports=Gx()),Pc.exports}var Lc={exports:{}},ft={};var ug;function Fx(){if(ug)return ft;ug=1;var t=Cd();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ft.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,_)},ft.flushSync=function(p){var h=u.T,_=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=h,r.p=_,r.d.f()}},ft.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(p,h))},ft.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},ft.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,b=f(_,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?r.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:E}):_==="script"&&r.d.X(p,{crossOrigin:b,integrity:x,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ft.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);r.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(p)},ft.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,b=f(_,h.crossOrigin);r.d.L(p,_,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ft.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=f(h.as,h.crossOrigin);r.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(p)},ft.requestFormReset=function(p){r.d.r(p)},ft.unstable_batchedUpdates=function(p,h){return p(h)},ft.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},ft.useFormStatus=function(){return u.H.useHostTransitionStatus()},ft.version="19.2.0",ft}var cg;function $x(){if(cg)return Lc.exports;cg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lc.exports=Fx(),Lc.exports}var dg;function Jx(){if(dg)return Yr;dg=1;var t=Vx(),e=Cd(),i=$x();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,c=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===c)return p(g),s;v=v.sibling}throw Error(r(188))}if(a.return!==c.return)a=g,c=v;else{for(var S=!1,w=g.child;w;){if(w===a){S=!0,a=g,c=v;break}if(w===c){S=!0,c=g,a=v;break}w=w.sibling}if(!S){for(w=v.child;w;){if(w===a){S=!0,a=v,c=g;break}if(w===c){S=!0,c=v,a=g;break}w=w.sibling}if(!S)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),A=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=pe&&n[pe]||n["@@iterator"],typeof n=="function"?n:null)}var Oe=Symbol.for("react.client.reference");function tt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case K:return"Suspense";case Q:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case A:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case j:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y:return s=n.displayName||null,s!==null?s:tt(n.type)||"Memo";case G:s=n._payload,n=n._init;try{return tt(n(s))}catch{}}return null}var vt=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Me=[],Ue=-1;function U(n){return{current:n}}function J(n){0>Ue||(n.current=Me[Ue],Me[Ue]=null,Ue--)}function W(n,s){Ue++,Me[Ue]=n.current,n.current=s}var ne=U(null),fe=U(null),ye=U(null),Ae=U(null);function mt(n,s){switch(W(ye,s),W(fe,n),W(ne,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Cm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Cm(s),n=Am(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ne),W(ne,n)}function Je(){J(ne),J(fe),J(ye)}function er(n){n.memoizedState!==null&&W(Ae,n);var s=ne.current,a=Am(s,n.type);s!==a&&(W(fe,n),W(ne,a))}function co(n){fe.current===n&&(J(ne),J(fe)),Ae.current===n&&(J(Ae),Gr._currentValue=ue)}var pl,tf;function gi(n){if(pl===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);pl=s&&s[1]||"",tf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pl+n+tf}var ml=!1;function gl(n,s){if(!n||ml)return"";ml=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(B){var q=B}Reflect.construct(n,[],$)}else{try{$.call()}catch(B){q=B}n.call($.prototype)}}else{try{throw Error()}catch(B){q=B}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(B){if(B&&q&&typeof B.stack=="string")return[B.stack,q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],w=v[1];if(S&&w){var I=S.split(`
`),L=w.split(`
`);for(g=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;g<L.length&&!L[g].includes("DetermineComponentFrameRoot");)g++;if(c===I.length||g===L.length)for(c=I.length-1,g=L.length-1;1<=c&&0<=g&&I[c]!==L[g];)g--;for(;1<=c&&0<=g;c--,g--)if(I[c]!==L[g]){if(c!==1||g!==1)do if(c--,g--,0>g||I[c]!==L[g]){var H=`
`+I[c].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=c&&0<=g);break}}}finally{ml=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?gi(a):""}function p_(n,s){switch(n.tag){case 26:case 27:case 5:return gi(n.type);case 16:return gi("Lazy");case 13:return n.child!==s&&s!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return gl(n.type,!1);case 11:return gl(n.type.render,!1);case 1:return gl(n.type,!0);case 31:return gi("Activity");default:return""}}function nf(n){try{var s="",a=null;do s+=p_(n,a),a=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var yl=Object.prototype.hasOwnProperty,vl=t.unstable_scheduleCallback,_l=t.unstable_cancelCallback,m_=t.unstable_shouldYield,g_=t.unstable_requestPaint,Ct=t.unstable_now,y_=t.unstable_getCurrentPriorityLevel,sf=t.unstable_ImmediatePriority,rf=t.unstable_UserBlockingPriority,fo=t.unstable_NormalPriority,v_=t.unstable_LowPriority,of=t.unstable_IdlePriority,__=t.log,b_=t.unstable_setDisableYieldValue,tr=null,At=null;function Bn(n){if(typeof __=="function"&&b_(n),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(tr,n)}catch{}}var Nt=Math.clz32?Math.clz32:E_,x_=Math.log,S_=Math.LN2;function E_(n){return n>>>=0,n===0?32:31-(x_(n)/S_|0)|0}var ho=256,po=262144,mo=4194304;function yi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function go(n,s,a){var c=n.pendingLanes;if(c===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?g=yi(c):(S&=w,S!==0?g=yi(S):a||(a=w&~n,a!==0&&(g=yi(a))))):(w=c&~v,w!==0?g=yi(w):S!==0?g=yi(S):a||(a=c&~n,a!==0&&(g=yi(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function nr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function w_(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function af(){var n=mo;return mo<<=1,(mo&62914560)===0&&(mo=4194304),n}function bl(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ir(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function T_(n,s,a,c,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,I=n.expirationTimes,L=n.hiddenUpdates;for(a=S&~a;0<a;){var H=31-Nt(a),$=1<<H;w[H]=0,I[H]=-1;var q=L[H];if(q!==null)for(L[H]=null,H=0;H<q.length;H++){var B=q[H];B!==null&&(B.lane&=-536870913)}a&=~$}c!==0&&lf(n,c,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function lf(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Nt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|a&261930}function uf(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Nt(a),g=1<<c;g&s|n[c]&s&&(n[c]|=s),a&=~g}}function cf(n,s){var a=s&-s;return a=(a&42)!==0?1:xl(a),(a&(n.suspendedLanes|s))!==0?0:a}function xl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Sl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function df(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:Qm(n.type))}function ff(n,s){var a=X.p;try{return X.p=n,s()}finally{X.p=a}}var jn=Math.random().toString(36).slice(2),ot="__reactFiber$"+jn,_t="__reactProps$"+jn,$i="__reactContainer$"+jn,El="__reactEvents$"+jn,C_="__reactListeners$"+jn,A_="__reactHandles$"+jn,hf="__reactResources$"+jn,sr="__reactMarker$"+jn;function wl(n){delete n[ot],delete n[_t],delete n[El],delete n[C_],delete n[A_]}function Ji(n){var s=n[ot];if(s)return s;for(var a=n.parentNode;a;){if(s=a[$i]||a[ot]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Um(n);n!==null;){if(a=n[ot])return a;n=Um(n)}return s}n=a,a=n.parentNode}return null}function Yi(n){if(n=n[ot]||n[$i]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function rr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ki(n){var s=n[hf];return s||(s=n[hf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function st(n){n[sr]=!0}var pf=new Set,mf={};function vi(n,s){Qi(n,s),Qi(n+"Capture",s)}function Qi(n,s){for(mf[n]=s,n=0;n<s.length;n++)pf.add(s[n])}var N_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gf={},yf={};function R_(n){return yl.call(yf,n)?!0:yl.call(gf,n)?!1:N_.test(n)?yf[n]=!0:(gf[n]=!0,!1)}function yo(n,s,a){if(R_(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function vo(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function pn(n,s,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+c)}}function Bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vf(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function M_(n,s,a){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Tl(n){if(!n._valueTracker){var s=vf(n)?"checked":"value";n._valueTracker=M_(n,s,""+n[s])}}function _f(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=vf(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function _o(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var I_=/[\n"\\]/g;function jt(n){return n.replace(I_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cl(n,s,a,c,g,v,S,w){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Bt(s)):n.value!==""+Bt(s)&&(n.value=""+Bt(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?Al(n,S,Bt(s)):a!=null?Al(n,S,Bt(a)):c!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Bt(w):n.removeAttribute("name")}function bf(n,s,a,c,g,v,S,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Tl(n);return}a=a!=null?""+Bt(a):"",s=s!=null?""+Bt(s):a,w||s===n.value||(n.value=s),n.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=w?n.checked:!!c,n.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),Tl(n)}function Al(n,s,a){s==="number"&&_o(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Xi(n,s,a,c){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Bt(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,c&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function xf(n,s,a){if(s!=null&&(s=""+Bt(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Bt(a):""}function Sf(n,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(r(92));if(vt(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Bt(s),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c),Tl(n)}function Wi(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var D_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ef(n,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,a):typeof a!="number"||a===0||D_.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function wf(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&a[g]!==c&&Ef(n,g,c)}else for(var v in s)s.hasOwnProperty(v)&&Ef(n,v,s[v])}function Nl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(n){return U_.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function mn(){}var Rl=null;function Ml(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zi=null,es=null;function Tf(n){var s=Yi(n);if(s&&(n=s.stateNode)){var a=n[_t]||null;e:switch(n=s.stateNode,s.type){case"input":if(Cl(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var g=c[_t]||null;if(!g)throw Error(r(90));Cl(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===n.form&&_f(c)}break e;case"textarea":xf(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Xi(n,!!a.multiple,s,!1)}}}var Il=!1;function Cf(n,s,a){if(Il)return n(s,a);Il=!0;try{var c=n(s);return c}finally{if(Il=!1,(Zi!==null||es!==null)&&(aa(),Zi&&(s=Zi,n=es,es=Zi=null,Tf(s),n)))for(s=0;s<n.length;s++)Tf(n[s])}}function or(n,s){var a=n.stateNode;if(a===null)return null;var c=a[_t]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dl=!1;if(gn)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Dl=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Dl=!1}var zn=null,kl=null,xo=null;function Af(){if(xo)return xo;var n,s=kl,a=s.length,c,g="value"in zn?zn.value:zn.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(c=1;c<=S&&s[a-c]===g[v-c];c++);return xo=g.slice(n,1<c?1-c:void 0)}function So(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Eo(){return!0}function Nf(){return!1}function bt(n){function s(a,c,g,v,S){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Eo:Nf,this.isPropagationStopped=Nf,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),s}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=bt(_i),lr=b({},_i,{view:0,detail:0}),P_=bt(lr),Ul,Pl,ur,To=b({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ur&&(ur&&n.type==="mousemove"?(Ul=n.screenX-ur.screenX,Pl=n.screenY-ur.screenY):Pl=Ul=0,ur=n),Ul)},movementY:function(n){return"movementY"in n?n.movementY:Pl}}),Rf=bt(To),O_=b({},To,{dataTransfer:0}),L_=bt(O_),q_=b({},lr,{relatedTarget:0}),Ol=bt(q_),B_=b({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),j_=bt(B_),z_=b({},_i,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),H_=bt(z_),G_=b({},_i,{data:0}),Mf=bt(G_),V_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=$_[n])?!!s[n]:!1}function Ll(){return J_}var Y_=b({},lr,{key:function(n){if(n.key){var s=V_[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=So(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(n){return n.type==="keypress"?So(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?So(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),K_=bt(Y_),Q_=b({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=bt(Q_),X_=b({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),W_=bt(X_),Z_=b({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),eb=bt(Z_),tb=b({},To,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nb=bt(tb),ib=b({},_i,{newState:0,oldState:0}),sb=bt(ib),rb=[9,13,27,32],ql=gn&&"CompositionEvent"in window,cr=null;gn&&"documentMode"in document&&(cr=document.documentMode);var ob=gn&&"TextEvent"in window&&!cr,Df=gn&&(!ql||cr&&8<cr&&11>=cr),kf=" ",Uf=!1;function Pf(n,s){switch(n){case"keyup":return rb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Of(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ts=!1;function ab(n,s){switch(n){case"compositionend":return Of(s);case"keypress":return s.which!==32?null:(Uf=!0,kf);case"textInput":return n=s.data,n===kf&&Uf?null:n;default:return null}}function lb(n,s){if(ts)return n==="compositionend"||!ql&&Pf(n,s)?(n=Af(),xo=kl=zn=null,ts=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Df&&s.locale!=="ko"?null:s.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ub[n.type]:s==="textarea"}function qf(n,s,a,c){Zi?es?es.push(c):es=[c]:Zi=c,s=pa(s,"onChange"),0<s.length&&(a=new wo("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var dr=null,fr=null;function cb(n){bm(n,0)}function Co(n){var s=rr(n);if(_f(s))return n}function Bf(n,s){if(n==="change")return s}var jf=!1;if(gn){var Bl;if(gn){var jl="oninput"in document;if(!jl){var zf=document.createElement("div");zf.setAttribute("oninput","return;"),jl=typeof zf.oninput=="function"}Bl=jl}else Bl=!1;jf=Bl&&(!document.documentMode||9<document.documentMode)}function Hf(){dr&&(dr.detachEvent("onpropertychange",Gf),fr=dr=null)}function Gf(n){if(n.propertyName==="value"&&Co(fr)){var s=[];qf(s,fr,n,Ml(n)),Cf(cb,s)}}function db(n,s,a){n==="focusin"?(Hf(),dr=s,fr=a,dr.attachEvent("onpropertychange",Gf)):n==="focusout"&&Hf()}function fb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Co(fr)}function hb(n,s){if(n==="click")return Co(s)}function pb(n,s){if(n==="input"||n==="change")return Co(s)}function mb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Rt=typeof Object.is=="function"?Object.is:mb;function hr(n,s){if(Rt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!yl.call(s,g)||!Rt(n[g],s[g]))return!1}return!0}function Vf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ff(n,s){var a=Vf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vf(a)}}function $f(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?$f(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Jf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=_o(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=_o(n.document)}return s}function zl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var gb=gn&&"documentMode"in document&&11>=document.documentMode,ns=null,Hl=null,pr=null,Gl=!1;function Yf(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gl||ns==null||ns!==_o(c)||(c=ns,"selectionStart"in c&&zl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pr&&hr(pr,c)||(pr=c,c=pa(Hl,"onSelect"),0<c.length&&(s=new wo("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=ns)))}function bi(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var is={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},Vl={},Kf={};gn&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function xi(n){if(Vl[n])return Vl[n];if(!is[n])return n;var s=is[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Kf)return Vl[n]=s[a];return n}var Qf=xi("animationend"),Xf=xi("animationiteration"),Wf=xi("animationstart"),yb=xi("transitionrun"),vb=xi("transitionstart"),_b=xi("transitioncancel"),Zf=xi("transitionend"),eh=new Map,Fl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fl.push("scrollEnd");function Xt(n,s){eh.set(n,s),vi(s,[n])}var Ao=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zt=[],ss=0,$l=0;function No(){for(var n=ss,s=$l=ss=0;s<n;){var a=zt[s];zt[s++]=null;var c=zt[s];zt[s++]=null;var g=zt[s];zt[s++]=null;var v=zt[s];if(zt[s++]=null,c!==null&&g!==null){var S=c.pending;S===null?g.next=g:(g.next=S.next,S.next=g),c.pending=g}v!==0&&th(a,g,v)}}function Ro(n,s,a,c){zt[ss++]=n,zt[ss++]=s,zt[ss++]=a,zt[ss++]=c,$l|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Jl(n,s,a,c){return Ro(n,s,a,c),Mo(n)}function Si(n,s){return Ro(n,null,null,s),Mo(n)}function th(n,s,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-Nt(a),n=v.hiddenUpdates,c=n[g],c===null?n[g]=[s]:c.push(s),s.lane=a|536870912),v):null}function Mo(n){if(50<Or)throw Or=0,nc=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var rs={};function bb(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(n,s,a,c){return new bb(n,s,a,c)}function Yl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yn(n,s){var a=n.alternate;return a===null?(a=Mt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function nh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Io(n,s,a,c,g,v){var S=0;if(c=n,typeof n=="function")Yl(n)&&(S=1);else if(typeof n=="string")S=Tx(n,a,ne.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Mt(31,a,s,g),n.elementType=V,n.lanes=v,n;case N:return Ei(a.children,g,v,s);case R:S=8,g|=24;break;case T:return n=Mt(12,a,s,g|2),n.elementType=T,n.lanes=v,n;case K:return n=Mt(13,a,s,g),n.elementType=K,n.lanes=v,n;case Q:return n=Mt(19,a,s,g),n.elementType=Q,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:S=10;break e;case D:S=9;break e;case j:S=11;break e;case Y:S=14;break e;case G:S=16,c=null;break e}S=29,a=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Mt(S,a,s,g),s.elementType=n,s.type=c,s.lanes=v,s}function Ei(n,s,a,c){return n=Mt(7,n,c,s),n.lanes=a,n}function Kl(n,s,a){return n=Mt(6,n,null,s),n.lanes=a,n}function ih(n){var s=Mt(18,null,null,0);return s.stateNode=n,s}function Ql(n,s,a){return s=Mt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var sh=new WeakMap;function Ht(n,s){if(typeof n=="object"&&n!==null){var a=sh.get(n);return a!==void 0?a:(s={value:n,source:s,stack:nf(s)},sh.set(n,s),s)}return{value:n,source:s,stack:nf(s)}}var os=[],as=0,Do=null,mr=0,Gt=[],Vt=0,Hn=null,ln=1,un="";function vn(n,s){os[as++]=mr,os[as++]=Do,Do=n,mr=s}function rh(n,s,a){Gt[Vt++]=ln,Gt[Vt++]=un,Gt[Vt++]=Hn,Hn=n;var c=ln;n=un;var g=32-Nt(c)-1;c&=~(1<<g),a+=1;var v=32-Nt(s)+g;if(30<v){var S=g-g%5;v=(c&(1<<S)-1).toString(32),c>>=S,g-=S,ln=1<<32-Nt(s)+g|a<<g|c,un=v+n}else ln=1<<v|a<<g|c,un=n}function Xl(n){n.return!==null&&(vn(n,1),rh(n,1,0))}function Wl(n){for(;n===Do;)Do=os[--as],os[as]=null,mr=os[--as],os[as]=null;for(;n===Hn;)Hn=Gt[--Vt],Gt[Vt]=null,un=Gt[--Vt],Gt[Vt]=null,ln=Gt[--Vt],Gt[Vt]=null}function oh(n,s){Gt[Vt++]=ln,Gt[Vt++]=un,Gt[Vt++]=Hn,ln=s.id,un=s.overflow,Hn=n}var at=null,qe=null,Se=!1,Gn=null,Ft=!1,Zl=Error(r(519));function Vn(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gr(Ht(s,n)),Zl}function ah(n){var s=n.stateNode,a=n.type,c=n.memoizedProps;switch(s[ot]=n,s[_t]=c,a){case"dialog":_e("cancel",s),_e("close",s);break;case"iframe":case"object":case"embed":_e("load",s);break;case"video":case"audio":for(a=0;a<qr.length;a++)_e(qr[a],s);break;case"source":_e("error",s);break;case"img":case"image":case"link":_e("error",s),_e("load",s);break;case"details":_e("toggle",s);break;case"input":_e("invalid",s),bf(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":_e("invalid",s);break;case"textarea":_e("invalid",s),Sf(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||wm(s.textContent,a)?(c.popover!=null&&(_e("beforetoggle",s),_e("toggle",s)),c.onScroll!=null&&_e("scroll",s),c.onScrollEnd!=null&&_e("scrollend",s),c.onClick!=null&&(s.onclick=mn),s=!0):s=!1,s||Vn(n,!0)}function lh(n){for(at=n.return;at;)switch(at.tag){case 5:case 31:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:at=at.return}}function ls(n){if(n!==at)return!1;if(!Se)return lh(n),Se=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||yc(n.type,n.memoizedProps)),a=!a),a&&qe&&Vn(n),lh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));qe=km(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));qe=km(n)}else s===27?(s=qe,si(n.type)?(n=Sc,Sc=null,qe=n):qe=s):qe=at?Jt(n.stateNode.nextSibling):null;return!0}function wi(){qe=at=null,Se=!1}function eu(){var n=Gn;return n!==null&&(wt===null?wt=n:wt.push.apply(wt,n),Gn=null),n}function gr(n){Gn===null?Gn=[n]:Gn.push(n)}var tu=U(null),Ti=null,_n=null;function Fn(n,s,a){W(tu,s._currentValue),s._currentValue=a}function bn(n){n._currentValue=tu.current,J(tu)}function nu(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function iu(n,s,a,c){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=g;for(var I=0;I<s.length;I++)if(w.context===s[I]){v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),nu(v.return,a,n),c||(S=null);break e}v=w.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),nu(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function us(n,s,a,c){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var w=g.type;Rt(g.pendingProps.value,S.value)||(n!==null?n.push(w):n=[w])}}else if(g===Ae.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Gr):n=[Gr])}g=g.return}n!==null&&iu(s,n,a,c),s.flags|=262144}function ko(n){for(n=n.firstContext;n!==null;){if(!Rt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ci(n){Ti=n,_n=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lt(n){return uh(Ti,n)}function Uo(n,s){return Ti===null&&Ci(n),uh(n,s)}function uh(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},_n===null){if(n===null)throw Error(r(308));_n=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _n=_n.next=s;return a}var xb=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},Sb=t.unstable_scheduleCallback,Eb=t.unstable_NormalPriority,Qe={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function su(){return{controller:new xb,data:new Map,refCount:0}}function yr(n){n.refCount--,n.refCount===0&&Sb(Eb,function(){n.controller.abort()})}var vr=null,ru=0,cs=0,ds=null;function wb(n,s){if(vr===null){var a=vr=[];ru=0,cs=lc(),ds={status:"pending",value:void 0,then:function(c){a.push(c)}}}return ru++,s.then(ch,ch),s}function ch(){if(--ru===0&&vr!==null){ds!==null&&(ds.status="fulfilled");var n=vr;vr=null,cs=0,ds=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Tb(n,s){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var dh=z.S;z.S=function(n,s){Yp=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wb(n,s),dh!==null&&dh(n,s)};var Ai=U(null);function ou(){var n=Ai.current;return n!==null?n:Pe.pooledCache}function Po(n,s){s===null?W(Ai,Ai.current):W(Ai,s.pool)}function fh(){var n=ou();return n===null?null:{parent:Qe._currentValue,pool:n}}var fs=Error(r(460)),au=Error(r(474)),Oo=Error(r(542)),Lo={then:function(){}};function hh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ph(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(mn,mn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gh(n),n;default:if(typeof s.status=="string")s.then(mn,mn);else{if(n=Pe,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gh(n),n}throw Ri=s,fs}}function Ni(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ri=a,fs):a}}var Ri=null;function mh(){if(Ri===null)throw Error(r(459));var n=Ri;return Ri=null,n}function gh(n){if(n===fs||n===Oo)throw Error(r(483))}var hs=null,_r=0;function qo(n){var s=_r;return _r+=1,hs===null&&(hs=[]),ph(hs,n,s)}function br(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bo(n,s){throw s.$$typeof===x?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function yh(n){function s(P,k){if(n){var O=P.deletions;O===null?(P.deletions=[k],P.flags|=16):O.push(k)}}function a(P,k){if(!n)return null;for(;k!==null;)s(P,k),k=k.sibling;return null}function c(P){for(var k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function g(P,k){return P=yn(P,k),P.index=0,P.sibling=null,P}function v(P,k,O){return P.index=O,n?(O=P.alternate,O!==null?(O=O.index,O<k?(P.flags|=67108866,k):O):(P.flags|=67108866,k)):(P.flags|=1048576,k)}function S(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function w(P,k,O,F){return k===null||k.tag!==6?(k=Kl(O,P.mode,F),k.return=P,k):(k=g(k,O),k.return=P,k)}function I(P,k,O,F){var oe=O.type;return oe===N?H(P,k,O.props.children,F,O.key):k!==null&&(k.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===G&&Ni(oe)===k.type)?(k=g(k,O.props),br(k,O),k.return=P,k):(k=Io(O.type,O.key,O.props,null,P.mode,F),br(k,O),k.return=P,k)}function L(P,k,O,F){return k===null||k.tag!==4||k.stateNode.containerInfo!==O.containerInfo||k.stateNode.implementation!==O.implementation?(k=Ql(O,P.mode,F),k.return=P,k):(k=g(k,O.children||[]),k.return=P,k)}function H(P,k,O,F,oe){return k===null||k.tag!==7?(k=Ei(O,P.mode,F,oe),k.return=P,k):(k=g(k,O),k.return=P,k)}function $(P,k,O){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Kl(""+k,P.mode,O),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return O=Io(k.type,k.key,k.props,null,P.mode,O),br(O,k),O.return=P,O;case C:return k=Ql(k,P.mode,O),k.return=P,k;case G:return k=Ni(k),$(P,k,O)}if(vt(k)||ce(k))return k=Ei(k,P.mode,O,null),k.return=P,k;if(typeof k.then=="function")return $(P,qo(k),O);if(k.$$typeof===A)return $(P,Uo(P,k),O);Bo(P,k)}return null}function q(P,k,O,F){var oe=k!==null?k.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return oe!==null?null:w(P,k,""+O,F);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case E:return O.key===oe?I(P,k,O,F):null;case C:return O.key===oe?L(P,k,O,F):null;case G:return O=Ni(O),q(P,k,O,F)}if(vt(O)||ce(O))return oe!==null?null:H(P,k,O,F,null);if(typeof O.then=="function")return q(P,k,qo(O),F);if(O.$$typeof===A)return q(P,k,Uo(P,O),F);Bo(P,O)}return null}function B(P,k,O,F,oe){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(O)||null,w(k,P,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return P=P.get(F.key===null?O:F.key)||null,I(k,P,F,oe);case C:return P=P.get(F.key===null?O:F.key)||null,L(k,P,F,oe);case G:return F=Ni(F),B(P,k,O,F,oe)}if(vt(F)||ce(F))return P=P.get(O)||null,H(k,P,F,oe,null);if(typeof F.then=="function")return B(P,k,O,qo(F),oe);if(F.$$typeof===A)return B(P,k,O,Uo(k,F),oe);Bo(k,F)}return null}function ee(P,k,O,F){for(var oe=null,Ee=null,ie=k,me=k=0,xe=null;ie!==null&&me<O.length;me++){ie.index>me?(xe=ie,ie=null):xe=ie.sibling;var we=q(P,ie,O[me],F);if(we===null){ie===null&&(ie=xe);break}n&&ie&&we.alternate===null&&s(P,ie),k=v(we,k,me),Ee===null?oe=we:Ee.sibling=we,Ee=we,ie=xe}if(me===O.length)return a(P,ie),Se&&vn(P,me),oe;if(ie===null){for(;me<O.length;me++)ie=$(P,O[me],F),ie!==null&&(k=v(ie,k,me),Ee===null?oe=ie:Ee.sibling=ie,Ee=ie);return Se&&vn(P,me),oe}for(ie=c(ie);me<O.length;me++)xe=B(ie,P,me,O[me],F),xe!==null&&(n&&xe.alternate!==null&&ie.delete(xe.key===null?me:xe.key),k=v(xe,k,me),Ee===null?oe=xe:Ee.sibling=xe,Ee=xe);return n&&ie.forEach(function(ui){return s(P,ui)}),Se&&vn(P,me),oe}function ae(P,k,O,F){if(O==null)throw Error(r(151));for(var oe=null,Ee=null,ie=k,me=k=0,xe=null,we=O.next();ie!==null&&!we.done;me++,we=O.next()){ie.index>me?(xe=ie,ie=null):xe=ie.sibling;var ui=q(P,ie,we.value,F);if(ui===null){ie===null&&(ie=xe);break}n&&ie&&ui.alternate===null&&s(P,ie),k=v(ui,k,me),Ee===null?oe=ui:Ee.sibling=ui,Ee=ui,ie=xe}if(we.done)return a(P,ie),Se&&vn(P,me),oe;if(ie===null){for(;!we.done;me++,we=O.next())we=$(P,we.value,F),we!==null&&(k=v(we,k,me),Ee===null?oe=we:Ee.sibling=we,Ee=we);return Se&&vn(P,me),oe}for(ie=c(ie);!we.done;me++,we=O.next())we=B(ie,P,me,we.value,F),we!==null&&(n&&we.alternate!==null&&ie.delete(we.key===null?me:we.key),k=v(we,k,me),Ee===null?oe=we:Ee.sibling=we,Ee=we);return n&&ie.forEach(function(Ox){return s(P,Ox)}),Se&&vn(P,me),oe}function ke(P,k,O,F){if(typeof O=="object"&&O!==null&&O.type===N&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case E:e:{for(var oe=O.key;k!==null;){if(k.key===oe){if(oe=O.type,oe===N){if(k.tag===7){a(P,k.sibling),F=g(k,O.props.children),F.return=P,P=F;break e}}else if(k.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===G&&Ni(oe)===k.type){a(P,k.sibling),F=g(k,O.props),br(F,O),F.return=P,P=F;break e}a(P,k);break}else s(P,k);k=k.sibling}O.type===N?(F=Ei(O.props.children,P.mode,F,O.key),F.return=P,P=F):(F=Io(O.type,O.key,O.props,null,P.mode,F),br(F,O),F.return=P,P=F)}return S(P);case C:e:{for(oe=O.key;k!==null;){if(k.key===oe)if(k.tag===4&&k.stateNode.containerInfo===O.containerInfo&&k.stateNode.implementation===O.implementation){a(P,k.sibling),F=g(k,O.children||[]),F.return=P,P=F;break e}else{a(P,k);break}else s(P,k);k=k.sibling}F=Ql(O,P.mode,F),F.return=P,P=F}return S(P);case G:return O=Ni(O),ke(P,k,O,F)}if(vt(O))return ee(P,k,O,F);if(ce(O)){if(oe=ce(O),typeof oe!="function")throw Error(r(150));return O=oe.call(O),ae(P,k,O,F)}if(typeof O.then=="function")return ke(P,k,qo(O),F);if(O.$$typeof===A)return ke(P,k,Uo(P,O),F);Bo(P,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,k!==null&&k.tag===6?(a(P,k.sibling),F=g(k,O),F.return=P,P=F):(a(P,k),F=Kl(O,P.mode,F),F.return=P,P=F),S(P)):a(P,k)}return function(P,k,O,F){try{_r=0;var oe=ke(P,k,O,F);return hs=null,oe}catch(ie){if(ie===fs||ie===Oo)throw ie;var Ee=Mt(29,ie,null,P.mode);return Ee.lanes=F,Ee.return=P,Ee}finally{}}}var Mi=yh(!0),vh=yh(!1),$n=!1;function lu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Jn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Yn(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ce&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=Mo(n),th(n,null,a),s}return Ro(n,c,s,a),Mo(n)}function xr(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,uf(n,a)}}function cu(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var du=!1;function Sr(){if(du){var n=ds;if(n!==null)throw n}}function Er(n,s,a,c){du=!1;var g=n.updateQueue;$n=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,w=g.shared.pending;if(w!==null){g.shared.pending=null;var I=w,L=I.next;I.next=null,S===null?v=L:S.next=L,S=I;var H=n.alternate;H!==null&&(H=H.updateQueue,w=H.lastBaseUpdate,w!==S&&(w===null?H.firstBaseUpdate=L:w.next=L,H.lastBaseUpdate=I))}if(v!==null){var $=g.baseState;S=0,H=L=I=null,w=v;do{var q=w.lane&-536870913,B=q!==w.lane;if(B?(be&q)===q:(c&q)===q){q!==0&&q===cs&&(du=!0),H!==null&&(H=H.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ee=n,ae=w;q=s;var ke=a;switch(ae.tag){case 1:if(ee=ae.payload,typeof ee=="function"){$=ee.call(ke,$,q);break e}$=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=ae.payload,q=typeof ee=="function"?ee.call(ke,$,q):ee,q==null)break e;$=b({},$,q);break e;case 2:$n=!0}}q=w.callback,q!==null&&(n.flags|=64,B&&(n.flags|=8192),B=g.callbacks,B===null?g.callbacks=[q]:B.push(q))}else B={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},H===null?(L=H=B,I=$):H=H.next=B,S|=q;if(w=w.next,w===null){if(w=g.shared.pending,w===null)break;B=w,w=B.next,B.next=null,g.lastBaseUpdate=B,g.shared.pending=null}}while(!0);H===null&&(I=$),g.baseState=I,g.firstBaseUpdate=L,g.lastBaseUpdate=H,v===null&&(g.shared.lanes=0),Zn|=S,n.lanes=S,n.memoizedState=$}}function _h(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function bh(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)_h(a[n],s)}var ps=U(null),jo=U(0);function xh(n,s){n=Rn,W(jo,n),W(ps,s),Rn=n|s.baseLanes}function fu(){W(jo,Rn),W(ps,ps.current)}function hu(){Rn=jo.current,J(ps),J(jo)}var It=U(null),$t=null;function Kn(n){var s=n.alternate;W(Ye,Ye.current&1),W(It,n),$t===null&&(s===null||ps.current!==null||s.memoizedState!==null)&&($t=n)}function pu(n){W(Ye,Ye.current),W(It,n),$t===null&&($t=n)}function Sh(n){n.tag===22?(W(Ye,Ye.current),W(It,n),$t===null&&($t=n)):Qn()}function Qn(){W(Ye,Ye.current),W(It,It.current)}function Dt(n){J(It),$t===n&&($t=null),J(Ye)}var Ye=U(0);function zo(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bc(a)||xc(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xn=0,he=null,Ie=null,Xe=null,Ho=!1,ms=!1,Ii=!1,Go=0,wr=0,gs=null,Cb=0;function Fe(){throw Error(r(321))}function mu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Rt(n[a],s[a]))return!1;return!0}function gu(n,s,a,c,g,v){return xn=v,he=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=n===null||n.memoizedState===null?rp:Iu,Ii=!1,v=a(c,g),Ii=!1,ms&&(v=wh(s,a,c,g)),Eh(n),v}function Eh(n){z.H=Ar;var s=Ie!==null&&Ie.next!==null;if(xn=0,Xe=Ie=he=null,Ho=!1,wr=0,gs=null,s)throw Error(r(300));n===null||We||(n=n.dependencies,n!==null&&ko(n)&&(We=!0))}function wh(n,s,a,c){he=n;var g=0;do{if(ms&&(gs=null),wr=0,ms=!1,25<=g)throw Error(r(301));if(g+=1,Xe=Ie=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}z.H=op,v=s(a,c)}while(ms);return v}function Ab(){var n=z.H,s=n.useState()[0];return s=typeof s.then=="function"?Tr(s):s,n=n.useState()[0],(Ie!==null?Ie.memoizedState:null)!==n&&(he.flags|=1024),s}function yu(){var n=Go!==0;return Go=0,n}function vu(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function _u(n){if(Ho){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ho=!1}xn=0,Xe=Ie=he=null,ms=!1,wr=Go=0,gs=null}function gt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?he.memoizedState=Xe=n:Xe=Xe.next=n,Xe}function Ke(){if(Ie===null){var n=he.alternate;n=n!==null?n.memoizedState:null}else n=Ie.next;var s=Xe===null?he.memoizedState:Xe.next;if(s!==null)Xe=s,Ie=n;else{if(n===null)throw he.alternate===null?Error(r(467)):Error(r(310));Ie=n,n={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Xe===null?he.memoizedState=Xe=n:Xe=Xe.next=n}return Xe}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tr(n){var s=wr;return wr+=1,gs===null&&(gs=[]),n=ph(gs,n,s),s=he,(Xe===null?s.memoizedState:Xe.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?rp:Iu),n}function Fo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tr(n);if(n.$$typeof===A)return lt(n)}throw Error(r(438,String(n)))}function bu(n){var s=null,a=he.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=he.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Vo(),he.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),c=0;c<n;c++)a[c]=re;return s.index++,a}function Sn(n,s){return typeof s=="function"?s(n):s}function $o(n){var s=Ke();return xu(s,Ie,n)}function xu(n,s,a){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var g=n.baseQueue,v=c.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,c.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var w=S=null,I=null,L=s,H=!1;do{var $=L.lane&-536870913;if($!==L.lane?(be&$)===$:(xn&$)===$){var q=L.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===cs&&(H=!0);else if((xn&q)===q){L=L.next,q===cs&&(H=!0);continue}else $={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(w=I=$,S=v):I=I.next=$,he.lanes|=q,Zn|=q;$=L.action,Ii&&a(v,$),v=L.hasEagerState?L.eagerState:a(v,$)}else q={lane:$,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(w=I=q,S=v):I=I.next=q,he.lanes|=$,Zn|=$;L=L.next}while(L!==null&&L!==s);if(I===null?S=v:I.next=w,!Rt(v,n.memoizedState)&&(We=!0,H&&(a=ds,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=I,c.lastRenderedState=v}return g===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Su(n){var s=Ke(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);Rt(v,s.memoizedState)||(We=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,c]}function Th(n,s,a){var c=he,g=Ke(),v=Se;if(v){if(a===void 0)throw Error(r(407));a=a()}else a=s();var S=!Rt((Ie||g).memoizedState,a);if(S&&(g.memoizedState=a,We=!0),g=g.queue,Tu(Nh.bind(null,c,g,n),[n]),g.getSnapshot!==s||S||Xe!==null&&Xe.memoizedState.tag&1){if(c.flags|=2048,ys(9,{destroy:void 0},Ah.bind(null,c,g,a,s),null),Pe===null)throw Error(r(349));v||(xn&127)!==0||Ch(c,s,a)}return a}function Ch(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=he.updateQueue,s===null?(s=Vo(),he.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Ah(n,s,a,c){s.value=a,s.getSnapshot=c,Rh(s)&&Mh(n)}function Nh(n,s,a){return a(function(){Rh(s)&&Mh(n)})}function Rh(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Rt(n,a)}catch{return!0}}function Mh(n){var s=Si(n,2);s!==null&&Tt(s,n,2)}function Eu(n){var s=gt();if(typeof n=="function"){var a=n;if(n=a(),Ii){Bn(!0);try{a()}finally{Bn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:n},s}function Ih(n,s,a,c){return n.baseState=a,xu(n,Ie,typeof c=="function"?c:Sn)}function Nb(n,s,a,c,g){if(Ko(n))throw Error(r(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};z.T!==null?a(!0):v.isTransition=!1,c(v),a=s.pending,a===null?(v.next=s.pending=v,Dh(s,v)):(v.next=a.next,s.pending=a.next=v)}}function Dh(n,s){var a=s.action,c=s.payload,g=n.state;if(s.isTransition){var v=z.T,S={};z.T=S;try{var w=a(g,c),I=z.S;I!==null&&I(S,w),kh(n,s,w)}catch(L){wu(n,s,L)}finally{v!==null&&S.types!==null&&(v.types=S.types),z.T=v}}else try{v=a(g,c),kh(n,s,v)}catch(L){wu(n,s,L)}}function kh(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Uh(n,s,c)},function(c){return wu(n,s,c)}):Uh(n,s,a)}function Uh(n,s,a){s.status="fulfilled",s.value=a,Ph(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,Dh(n,a)))}function wu(n,s,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Ph(s),s=s.next;while(s!==c)}n.action=null}function Ph(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Oh(n,s){return s}function Lh(n,s){if(Se){var a=Pe.formState;if(a!==null){e:{var c=he;if(Se){if(qe){t:{for(var g=qe,v=Ft;g.nodeType!==8;){if(!v){g=null;break t}if(g=Jt(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){qe=Jt(g.nextSibling),c=g.data==="F!";break e}}Vn(c)}c=!1}c&&(s=a[0])}}return a=gt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oh,lastRenderedState:s},a.queue=c,a=np.bind(null,he,c),c.dispatch=a,c=Eu(!1),v=Mu.bind(null,he,!1,c.queue),c=gt(),g={state:s,dispatch:null,action:n,pending:null},c.queue=g,a=Nb.bind(null,he,g,v,a),g.dispatch=a,c.memoizedState=n,[s,a,!1]}function qh(n){var s=Ke();return Bh(s,Ie,n)}function Bh(n,s,a){if(s=xu(n,s,Oh)[0],n=$o(Sn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Tr(s)}catch(S){throw S===fs?Oo:S}else c=s;s=Ke();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(he.flags|=2048,ys(9,{destroy:void 0},Rb.bind(null,g,a),null)),[c,v,n]}function Rb(n,s){n.action=s}function jh(n){var s=Ke(),a=Ie;if(a!==null)return Bh(s,a,n);Ke(),s=s.memoizedState,a=Ke();var c=a.queue.dispatch;return a.memoizedState=n,[s,c,!1]}function ys(n,s,a,c){return n={tag:n,create:a,deps:c,inst:s,next:null},s=he.updateQueue,s===null&&(s=Vo(),he.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n),n}function zh(){return Ke().memoizedState}function Jo(n,s,a,c){var g=gt();he.flags|=n,g.memoizedState=ys(1|s,{destroy:void 0},a,c===void 0?null:c)}function Yo(n,s,a,c){var g=Ke();c=c===void 0?null:c;var v=g.memoizedState.inst;Ie!==null&&c!==null&&mu(c,Ie.memoizedState.deps)?g.memoizedState=ys(s,v,a,c):(he.flags|=n,g.memoizedState=ys(1|s,v,a,c))}function Hh(n,s){Jo(8390656,8,n,s)}function Tu(n,s){Yo(2048,8,n,s)}function Mb(n){he.flags|=4;var s=he.updateQueue;if(s===null)s=Vo(),he.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Gh(n){var s=Ke().memoizedState;return Mb({ref:s,nextImpl:n}),function(){if((Ce&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Vh(n,s){return Yo(4,2,n,s)}function Fh(n,s){return Yo(4,4,n,s)}function $h(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Jh(n,s,a){a=a!=null?a.concat([n]):null,Yo(4,4,$h.bind(null,s,n),a)}function Cu(){}function Yh(n,s){var a=Ke();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&mu(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Kh(n,s){var a=Ke();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&mu(s,c[1]))return c[0];if(c=n(),Ii){Bn(!0);try{n()}finally{Bn(!1)}}return a.memoizedState=[c,s],c}function Au(n,s,a){return a===void 0||(xn&1073741824)!==0&&(be&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Qp(),he.lanes|=n,Zn|=n,a)}function Qh(n,s,a,c){return Rt(a,s)?a:ps.current!==null?(n=Au(n,a,c),Rt(n,s)||(We=!0),n):(xn&42)===0||(xn&1073741824)!==0&&(be&261930)===0?(We=!0,n.memoizedState=a):(n=Qp(),he.lanes|=n,Zn|=n,s)}function Xh(n,s,a,c,g){var v=X.p;X.p=v!==0&&8>v?v:8;var S=z.T,w={};z.T=w,Mu(n,!1,s,a);try{var I=g(),L=z.S;if(L!==null&&L(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var H=Tb(I,c);Cr(n,s,H,Pt(n))}else Cr(n,s,c,Pt(n))}catch($){Cr(n,s,{then:function(){},status:"rejected",reason:$},Pt())}finally{X.p=v,S!==null&&w.types!==null&&(S.types=w.types),z.T=S}}function Ib(){}function Nu(n,s,a,c){if(n.tag!==5)throw Error(r(476));var g=Wh(n).queue;Xh(n,g,s,ue,a===null?Ib:function(){return Zh(n),a(c)})}function Wh(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:ue},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Zh(n){var s=Wh(n);s.next===null&&(s=n.alternate.memoizedState),Cr(n,s.next.queue,{},Pt())}function Ru(){return lt(Gr)}function ep(){return Ke().memoizedState}function tp(){return Ke().memoizedState}function Db(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Pt();n=Jn(a);var c=Yn(s,n,a);c!==null&&(Tt(c,s,a),xr(c,s,a)),s={cache:su()},n.payload=s;return}s=s.return}}function kb(n,s,a){var c=Pt();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ko(n)?ip(s,a):(a=Jl(n,s,a,c),a!==null&&(Tt(a,n,c),sp(a,s,c)))}function np(n,s,a){var c=Pt();Cr(n,s,a,c)}function Cr(n,s,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ko(n))ip(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,w=v(S,a);if(g.hasEagerState=!0,g.eagerState=w,Rt(w,S))return Ro(n,s,g,0),Pe===null&&No(),!1}catch{}finally{}if(a=Jl(n,s,g,c),a!==null)return Tt(a,n,c),sp(a,s,c),!0}return!1}function Mu(n,s,a,c){if(c={lane:2,revertLane:lc(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ko(n)){if(s)throw Error(r(479))}else s=Jl(n,a,c,2),s!==null&&Tt(s,n,2)}function Ko(n){var s=n.alternate;return n===he||s!==null&&s===he}function ip(n,s){ms=Ho=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function sp(n,s,a){if((a&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,uf(n,a)}}var Ar={readContext:lt,use:Fo,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Ar.useEffectEvent=Fe;var rp={readContext:lt,use:Fo,useCallback:function(n,s){return gt().memoizedState=[n,s===void 0?null:s],n},useContext:lt,useEffect:Hh,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Jo(4194308,4,$h.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Jo(4194308,4,n,s)},useInsertionEffect:function(n,s){Jo(4,2,n,s)},useMemo:function(n,s){var a=gt();s=s===void 0?null:s;var c=n();if(Ii){Bn(!0);try{n()}finally{Bn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(n,s,a){var c=gt();if(a!==void 0){var g=a(s);if(Ii){Bn(!0);try{a(s)}finally{Bn(!1)}}}else g=s;return c.memoizedState=c.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},c.queue=n,n=n.dispatch=kb.bind(null,he,n),[c.memoizedState,n]},useRef:function(n){var s=gt();return n={current:n},s.memoizedState=n},useState:function(n){n=Eu(n);var s=n.queue,a=np.bind(null,he,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Cu,useDeferredValue:function(n,s){var a=gt();return Au(a,n,s)},useTransition:function(){var n=Eu(!1);return n=Xh.bind(null,he,n.queue,!0,!1),gt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var c=he,g=gt();if(Se){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Pe===null)throw Error(r(349));(be&127)!==0||Ch(c,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,Hh(Nh.bind(null,c,v,n),[n]),c.flags|=2048,ys(9,{destroy:void 0},Ah.bind(null,c,v,a,s),null),a},useId:function(){var n=gt(),s=Pe.identifierPrefix;if(Se){var a=un,c=ln;a=(c&~(1<<32-Nt(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Go++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Cb++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Ru,useFormState:Lh,useActionState:Lh,useOptimistic:function(n){var s=gt();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Mu.bind(null,he,!0,a),a.dispatch=s,[n,s]},useMemoCache:bu,useCacheRefresh:function(){return gt().memoizedState=Db.bind(null,he)},useEffectEvent:function(n){var s=gt(),a={impl:n};return s.memoizedState=a,function(){if((Ce&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Iu={readContext:lt,use:Fo,useCallback:Yh,useContext:lt,useEffect:Tu,useImperativeHandle:Jh,useInsertionEffect:Vh,useLayoutEffect:Fh,useMemo:Kh,useReducer:$o,useRef:zh,useState:function(){return $o(Sn)},useDebugValue:Cu,useDeferredValue:function(n,s){var a=Ke();return Qh(a,Ie.memoizedState,n,s)},useTransition:function(){var n=$o(Sn)[0],s=Ke().memoizedState;return[typeof n=="boolean"?n:Tr(n),s]},useSyncExternalStore:Th,useId:ep,useHostTransitionStatus:Ru,useFormState:qh,useActionState:qh,useOptimistic:function(n,s){var a=Ke();return Ih(a,Ie,n,s)},useMemoCache:bu,useCacheRefresh:tp};Iu.useEffectEvent=Gh;var op={readContext:lt,use:Fo,useCallback:Yh,useContext:lt,useEffect:Tu,useImperativeHandle:Jh,useInsertionEffect:Vh,useLayoutEffect:Fh,useMemo:Kh,useReducer:Su,useRef:zh,useState:function(){return Su(Sn)},useDebugValue:Cu,useDeferredValue:function(n,s){var a=Ke();return Ie===null?Au(a,n,s):Qh(a,Ie.memoizedState,n,s)},useTransition:function(){var n=Su(Sn)[0],s=Ke().memoizedState;return[typeof n=="boolean"?n:Tr(n),s]},useSyncExternalStore:Th,useId:ep,useHostTransitionStatus:Ru,useFormState:jh,useActionState:jh,useOptimistic:function(n,s){var a=Ke();return Ie!==null?Ih(a,Ie,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:bu,useCacheRefresh:tp};op.useEffectEvent=Gh;function Du(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:b({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ku={enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Pt(),g=Jn(c);g.payload=s,a!=null&&(g.callback=a),s=Yn(n,g,c),s!==null&&(Tt(s,n,c),xr(s,n,c))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Pt(),g=Jn(c);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Yn(n,g,c),s!==null&&(Tt(s,n,c),xr(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Pt(),c=Jn(a);c.tag=2,s!=null&&(c.callback=s),s=Yn(n,c,a),s!==null&&(Tt(s,n,a),xr(s,n,a))}};function ap(n,s,a,c,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,v,S):s.prototype&&s.prototype.isPureReactComponent?!hr(a,c)||!hr(g,v):!0}function lp(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&ku.enqueueReplaceState(s,s.state,null)}function Di(n,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(n=n.defaultProps){a===s&&(a=b({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function up(n){Ao(n)}function cp(n){console.error(n)}function dp(n){Ao(n)}function Qo(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function fp(n,s,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Uu(n,s,a){return a=Jn(a),a.tag=3,a.payload={element:null},a.callback=function(){Qo(n,s)},a}function hp(n){return n=Jn(n),n.tag=3,n}function pp(n,s,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;n.payload=function(){return g(v)},n.callback=function(){fp(s,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){fp(s,a,c),typeof g!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function Ub(n,s,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&us(s,a,g,!0),a=It.current,a!==null){switch(a.tag){case 31:case 13:return $t===null?la():a.alternate===null&&$e===0&&($e=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===Lo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),rc(n,c,g)),!1;case 22:return a.flags|=65536,c===Lo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),rc(n,c,g)),!1}throw Error(r(435,a.tag))}return rc(n,c,g),la(),!1}if(Se)return s=It.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==Zl&&(n=Error(r(422),{cause:c}),gr(Ht(n,a)))):(c!==Zl&&(s=Error(r(423),{cause:c}),gr(Ht(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,c=Ht(c,a),g=Uu(n.stateNode,c,g),cu(n,g),$e!==4&&($e=2)),!1;var v=Error(r(520),{cause:c});if(v=Ht(v,a),Pr===null?Pr=[v]:Pr.push(v),$e!==4&&($e=2),s===null)return!0;c=Ht(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=Uu(a.stateNode,c,n),cu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ei===null||!ei.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=hp(g),pp(g,n,a,c),cu(a,g),!1}a=a.return}while(a!==null);return!1}var Pu=Error(r(461)),We=!1;function ut(n,s,a,c){s.child=n===null?vh(s,null,a,c):Mi(s,n.child,a,c)}function mp(n,s,a,c,g){a=a.render;var v=s.ref;if("ref"in c){var S={};for(var w in c)w!=="ref"&&(S[w]=c[w])}else S=c;return Ci(s),c=gu(n,s,a,S,v,g),w=yu(),n!==null&&!We?(vu(n,s,g),En(n,s,g)):(Se&&w&&Xl(s),s.flags|=1,ut(n,s,c,g),s.child)}function gp(n,s,a,c,g){if(n===null){var v=a.type;return typeof v=="function"&&!Yl(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,yp(n,s,v,c,g)):(n=Io(a.type,null,c,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Gu(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:hr,a(S,c)&&n.ref===s.ref)return En(n,s,g)}return s.flags|=1,n=yn(v,c),n.ref=s.ref,n.return=s,s.child=n}function yp(n,s,a,c,g){if(n!==null){var v=n.memoizedProps;if(hr(v,c)&&n.ref===s.ref)if(We=!1,s.pendingProps=c=v,Gu(n,g))(n.flags&131072)!==0&&(We=!0);else return s.lanes=n.lanes,En(n,s,g)}return Ou(n,s,a,c,g)}function vp(n,s,a,c){var g=c.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(c=s.child=n.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~v}else c=0,s.child=null;return _p(n,s,v,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Po(s,v!==null?v.cachePool:null),v!==null?xh(s,v):fu(),Sh(s);else return c=s.lanes=536870912,_p(n,s,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Po(s,v.cachePool),xh(s,v),Qn(),s.memoizedState=null):(n!==null&&Po(s,null),fu(),Qn());return ut(n,s,g,a),s.child}function Nr(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function _p(n,s,a,c,g){var v=ou();return v=v===null?null:{parent:Qe._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&Po(s,null),fu(),Sh(s),n!==null&&us(n,s,c,!0),s.childLanes=g,null}function Xo(n,s){return s=Zo({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function bp(n,s,a){return Mi(s,n.child,null,a),n=Xo(s,s.pendingProps),n.flags|=2,Dt(s),s.memoizedState=null,n}function Pb(n,s,a){var c=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Se){if(c.mode==="hidden")return n=Xo(s,c),s.lanes=536870912,Nr(null,n);if(pu(s),(n=qe)?(n=Dm(n,Ft),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Hn!==null?{id:ln,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=ih(n),a.return=s,s.child=a,at=s,qe=null)):n=null,n===null)throw Vn(s);return s.lanes=536870912,null}return Xo(s,c)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if(pu(s),g)if(s.flags&256)s.flags&=-257,s=bp(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(We||us(n,s,a,!1),g=(a&n.childLanes)!==0,We||g){if(c=Pe,c!==null&&(S=cf(c,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,Si(n,S),Tt(c,n,S),Pu;la(),s=bp(n,s,a)}else n=v.treeContext,qe=Jt(S.nextSibling),at=s,Se=!0,Gn=null,Ft=!1,n!==null&&oh(s,n),s=Xo(s,c),s.flags|=4096;return s}return n=yn(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Wo(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Ou(n,s,a,c,g){return Ci(s),a=gu(n,s,a,c,void 0,g),c=yu(),n!==null&&!We?(vu(n,s,g),En(n,s,g)):(Se&&c&&Xl(s),s.flags|=1,ut(n,s,a,g),s.child)}function xp(n,s,a,c,g,v){return Ci(s),s.updateQueue=null,a=wh(s,c,a,g),Eh(n),c=yu(),n!==null&&!We?(vu(n,s,v),En(n,s,v)):(Se&&c&&Xl(s),s.flags|=1,ut(n,s,a,v),s.child)}function Sp(n,s,a,c,g){if(Ci(s),s.stateNode===null){var v=rs,S=a.contextType;typeof S=="object"&&S!==null&&(v=lt(S)),v=new a(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ku,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},lu(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?lt(S):rs,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Du(s,a,S,c),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&ku.enqueueReplaceState(v,v.state,null),Er(s,c,v,g),Sr(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){v=s.stateNode;var w=s.memoizedProps,I=Di(a,w);v.props=I;var L=v.context,H=a.contextType;S=rs,typeof H=="object"&&H!==null&&(S=lt(H));var $=a.getDerivedStateFromProps;H=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,H||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||L!==S)&&lp(s,v,c,S),$n=!1;var q=s.memoizedState;v.state=q,Er(s,c,v,g),Sr(),L=s.memoizedState,w||q!==L||$n?(typeof $=="function"&&(Du(s,a,$,c),L=s.memoizedState),(I=$n||ap(s,a,I,c,q,L,S))?(H||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=L),v.props=c,v.state=L,v.context=S,c=I):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,uu(n,s),S=s.memoizedProps,H=Di(a,S),v.props=H,$=s.pendingProps,q=v.context,L=a.contextType,I=rs,typeof L=="object"&&L!==null&&(I=lt(L)),w=a.getDerivedStateFromProps,(L=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||q!==I)&&lp(s,v,c,I),$n=!1,q=s.memoizedState,v.state=q,Er(s,c,v,g),Sr();var B=s.memoizedState;S!==$||q!==B||$n||n!==null&&n.dependencies!==null&&ko(n.dependencies)?(typeof w=="function"&&(Du(s,a,w,c),B=s.memoizedState),(H=$n||ap(s,a,H,c,q,B,I)||n!==null&&n.dependencies!==null&&ko(n.dependencies))?(L||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,B,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,B,I)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=B),v.props=c,v.state=B,v.context=I,c=H):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),c=!1)}return v=c,Wo(n,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&c?(s.child=Mi(s,n.child,null,g),s.child=Mi(s,null,a,g)):ut(n,s,a,g),s.memoizedState=v.state,n=s.child):n=En(n,s,g),n}function Ep(n,s,a,c){return wi(),s.flags|=256,ut(n,s,a,c),s.child}var Lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qu(n){return{baseLanes:n,cachePool:fh()}}function Bu(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Ut),n}function wp(n,s,a){var c=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(Ye.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Se){if(g?Kn(s):Qn(),(n=qe)?(n=Dm(n,Ft),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Hn!==null?{id:ln,overflow:un}:null,retryLane:536870912,hydrationErrors:null},a=ih(n),a.return=s,s.child=a,at=s,qe=null)):n=null,n===null)throw Vn(s);return xc(n)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,g?(Qn(),g=s.mode,w=Zo({mode:"hidden",children:w},g),c=Ei(c,g,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=qu(a),c.childLanes=Bu(n,S,a),s.memoizedState=Lu,Nr(null,c)):(Kn(s),ju(s,w))}var I=n.memoizedState;if(I!==null&&(w=I.dehydrated,w!==null)){if(v)s.flags&256?(Kn(s),s.flags&=-257,s=zu(n,s,a)):s.memoizedState!==null?(Qn(),s.child=n.child,s.flags|=128,s=null):(Qn(),w=c.fallback,g=s.mode,c=Zo({mode:"visible",children:c.children},g),w=Ei(w,g,a,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,Mi(s,n.child,null,a),c=s.child,c.memoizedState=qu(a),c.childLanes=Bu(n,S,a),s.memoizedState=Lu,s=Nr(null,c));else if(Kn(s),xc(w)){if(S=w.nextSibling&&w.nextSibling.dataset,S)var L=S.dgst;S=L,c=Error(r(419)),c.stack="",c.digest=S,gr({value:c,source:null,stack:null}),s=zu(n,s,a)}else if(We||us(n,s,a,!1),S=(a&n.childLanes)!==0,We||S){if(S=Pe,S!==null&&(c=cf(S,a),c!==0&&c!==I.retryLane))throw I.retryLane=c,Si(n,c),Tt(S,n,c),Pu;bc(w)||la(),s=zu(n,s,a)}else bc(w)?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,qe=Jt(w.nextSibling),at=s,Se=!0,Gn=null,Ft=!1,n!==null&&oh(s,n),s=ju(s,c.children),s.flags|=4096);return s}return g?(Qn(),w=c.fallback,g=s.mode,I=n.child,L=I.sibling,c=yn(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,L!==null?w=yn(L,w):(w=Ei(w,g,a,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,Nr(null,c),c=s.child,w=n.child.memoizedState,w===null?w=qu(a):(g=w.cachePool,g!==null?(I=Qe._currentValue,g=g.parent!==I?{parent:I,pool:I}:g):g=fh(),w={baseLanes:w.baseLanes|a,cachePool:g}),c.memoizedState=w,c.childLanes=Bu(n,S,a),s.memoizedState=Lu,Nr(n.child,c)):(Kn(s),a=n.child,n=a.sibling,a=yn(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function ju(n,s){return s=Zo({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Zo(n,s){return n=Mt(22,n,null,s),n.lanes=0,n}function zu(n,s,a){return Mi(s,n.child,null,a),n=ju(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Tp(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),nu(n.return,s,a)}function Hu(n,s,a,c,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function Cp(n,s,a){var c=s.pendingProps,g=c.revealOrder,v=c.tail;c=c.children;var S=Ye.current,w=(S&2)!==0;if(w?(S=S&1|2,s.flags|=128):S&=1,W(Ye,S),ut(n,s,c,a),c=Se?mr:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Tp(n,a,s);else if(n.tag===19)Tp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&zo(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Hu(s,!1,g,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&zo(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Hu(s,!0,a,null,v,c);break;case"together":Hu(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function En(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Zn|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(us(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=yn(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=yn(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Gu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ko(n)))}function Ob(n,s,a){switch(s.tag){case 3:mt(s,s.stateNode.containerInfo),Fn(s,Qe,n.memoizedState.cache),wi();break;case 27:case 5:er(s);break;case 4:mt(s,s.stateNode.containerInfo);break;case 10:Fn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,pu(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Kn(s),s.flags|=128,null):(a&s.child.childLanes)!==0?wp(n,s,a):(Kn(s),n=En(n,s,a),n!==null?n.sibling:null);Kn(s);break;case 19:var g=(n.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(us(n,s,a,!1),c=(a&s.childLanes)!==0),g){if(c)return Cp(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(Ye,Ye.current),c)break;return null;case 22:return s.lanes=0,vp(n,s,a,s.pendingProps);case 24:Fn(s,Qe,n.memoizedState.cache)}return En(n,s,a)}function Ap(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)We=!0;else{if(!Gu(n,a)&&(s.flags&128)===0)return We=!1,Ob(n,s,a);We=(n.flags&131072)!==0}else We=!1,Se&&(s.flags&1048576)!==0&&rh(s,mr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=Ni(s.elementType),s.type=n,typeof n=="function")Yl(n)?(c=Di(n,c),s.tag=1,s=Sp(null,s,n,c,a)):(s.tag=0,s=Ou(null,s,n,c,a));else{if(n!=null){var g=n.$$typeof;if(g===j){s.tag=11,s=mp(null,s,n,c,a);break e}else if(g===Y){s.tag=14,s=gp(null,s,n,c,a);break e}}throw s=tt(n)||n,Error(r(306,s,""))}}return s;case 0:return Ou(n,s,s.type,s.pendingProps,a);case 1:return c=s.type,g=Di(c,s.pendingProps),Sp(n,s,c,g,a);case 3:e:{if(mt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var v=s.memoizedState;g=v.element,uu(n,s),Er(s,c,null,a);var S=s.memoizedState;if(c=S.cache,Fn(s,Qe,c),c!==v.cache&&iu(s,[Qe],a,!0),Sr(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Ep(n,s,c,a);break e}else if(c!==g){g=Ht(Error(r(424)),s),gr(g),s=Ep(n,s,c,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(qe=Jt(n.firstChild),at=s,Se=!0,Gn=null,Ft=!0,a=vh(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wi(),c===g){s=En(n,s,a);break e}ut(n,s,c,a)}s=s.child}return s;case 26:return Wo(n,s),n===null?(a=qm(s.type,null,s.pendingProps,null))?s.memoizedState=a:Se||(a=s.type,n=s.pendingProps,c=ma(ye.current).createElement(a),c[ot]=s,c[_t]=n,ct(c,a,n),st(c),s.stateNode=c):s.memoizedState=qm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return er(s),n===null&&Se&&(c=s.stateNode=Pm(s.type,s.pendingProps,ye.current),at=s,Ft=!0,g=qe,si(s.type)?(Sc=g,qe=Jt(c.firstChild)):qe=g),ut(n,s,s.pendingProps.children,a),Wo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Se&&((g=c=qe)&&(c=fx(c,s.type,s.pendingProps,Ft),c!==null?(s.stateNode=c,at=s,qe=Jt(c.firstChild),Ft=!1,g=!0):g=!1),g||Vn(s)),er(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,c=v.children,yc(g,v)?c=null:S!==null&&yc(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=gu(n,s,Ab,null,null,a),Gr._currentValue=g),Wo(n,s),ut(n,s,c,a),s.child;case 6:return n===null&&Se&&((n=a=qe)&&(a=hx(a,s.pendingProps,Ft),a!==null?(s.stateNode=a,at=s,qe=null,n=!0):n=!1),n||Vn(s)),null;case 13:return wp(n,s,a);case 4:return mt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Mi(s,null,c,a):ut(n,s,c,a),s.child;case 11:return mp(n,s,s.type,s.pendingProps,a);case 7:return ut(n,s,s.pendingProps,a),s.child;case 8:return ut(n,s,s.pendingProps.children,a),s.child;case 12:return ut(n,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Fn(s,s.type,c.value),ut(n,s,c.children,a),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,Ci(s),g=lt(g),c=c(g),s.flags|=1,ut(n,s,c,a),s.child;case 14:return gp(n,s,s.type,s.pendingProps,a);case 15:return yp(n,s,s.type,s.pendingProps,a);case 19:return Cp(n,s,a);case 31:return Pb(n,s,a);case 22:return vp(n,s,a,s.pendingProps);case 24:return Ci(s),c=lt(Qe),n===null?(g=ou(),g===null&&(g=Pe,v=su(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:c,cache:g},lu(s),Fn(s,Qe,g)):((n.lanes&a)!==0&&(uu(n,s),Er(s,null,null,a),Sr()),g=n.memoizedState,v=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Fn(s,Qe,c)):(c=v.cache,Fn(s,Qe,c),c!==g.cache&&iu(s,[Qe],a,!0))),ut(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function wn(n){n.flags|=4}function Vu(n,s,a,c,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(em())n.flags|=8192;else throw Ri=Lo,au}else n.flags&=-16777217}function Np(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Gm(s))if(em())n.flags|=8192;else throw Ri=Lo,au}function ea(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?af():536870912,n.lanes|=s,xs|=s)}function Rr(n,s){if(!Se)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Be(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Lb(n,s,a){var c=s.pendingProps;switch(Wl(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(s),null;case 1:return Be(s),null;case 3:return a=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),bn(Qe),Je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ls(s)?wn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,eu())),Be(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(wn(s),v!==null?(Be(s),Np(s,v)):(Be(s),Vu(s,g,null,c,a))):v?v!==n.memoizedState?(wn(s),Be(s),Np(s,v)):(Be(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&wn(s),Be(s),Vu(s,g,n,c,a)),null;case 27:if(co(s),a=ye.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&wn(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Be(s),null}n=ne.current,ls(s)?ah(s):(n=Pm(g,c,a),s.stateNode=n,wn(s))}return Be(s),null;case 5:if(co(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&wn(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Be(s),null}if(v=ne.current,ls(s))ah(s);else{var S=ma(ye.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(g,{is:c.is}):S.createElement(g)}}v[ot]=s,v[_t]=c;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(ct(v,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&wn(s)}}return Be(s),Vu(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&wn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=ye.current,ls(s)){if(n=s.stateNode,a=s.memoizedProps,c=null,g=at,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}n[ot]=s,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||wm(n.nodeValue,a)),n||Vn(s,!0)}else n=ma(n).createTextNode(c),n[ot]=s,s.stateNode=n}return Be(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(c=ls(s),a!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[ot]=s}else wi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Be(s),n=!1}else a=eu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Dt(s),s):(Dt(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Be(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=ls(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[ot]=s}else wi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Be(s),g=!1}else g=eu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Dt(s),s):(Dt(s),null)}return Dt(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,n=n!==null&&n.memoizedState!==null,a&&(c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),ea(s,s.updateQueue),Be(s),null);case 4:return Je(),n===null&&fc(s.stateNode.containerInfo),Be(s),null;case 10:return bn(s.type),Be(s),null;case 19:if(J(Ye),c=s.memoizedState,c===null)return Be(s),null;if(g=(s.flags&128)!==0,v=c.rendering,v===null)if(g)Rr(c,!1);else{if($e!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=zo(n),v!==null){for(s.flags|=128,Rr(c,!1),n=v.updateQueue,s.updateQueue=n,ea(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)nh(a,n),a=a.sibling;return W(Ye,Ye.current&1|2),Se&&vn(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&Ct()>ra&&(s.flags|=128,g=!0,Rr(c,!1),s.lanes=4194304)}else{if(!g)if(n=zo(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,ea(s,n),Rr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Se)return Be(s),null}else 2*Ct()-c.renderingStartTime>ra&&a!==536870912&&(s.flags|=128,g=!0,Rr(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(n=c.last,n!==null?n.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ct(),n.sibling=null,a=Ye.current,W(Ye,g?a&1|2:a&1),Se&&vn(s,c.treeForkCount),n):(Be(s),null);case 22:case 23:return Dt(s),hu(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Be(s),s.subtreeFlags&6&&(s.flags|=8192)):Be(s),a=s.updateQueue,a!==null&&ea(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),n!==null&&J(Ai),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),bn(Qe),Be(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function qb(n,s){switch(Wl(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return bn(Qe),Je(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return co(s),null;case 31:if(s.memoizedState!==null){if(Dt(s),s.alternate===null)throw Error(r(340));wi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Dt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));wi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(Ye),null;case 4:return Je(),null;case 10:return bn(s.type),null;case 22:case 23:return Dt(s),hu(),n!==null&&J(Ai),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return bn(Qe),null;case 25:return null;default:return null}}function Rp(n,s){switch(Wl(s),s.tag){case 3:bn(Qe),Je();break;case 26:case 27:case 5:co(s);break;case 4:Je();break;case 31:s.memoizedState!==null&&Dt(s);break;case 13:Dt(s);break;case 19:J(Ye);break;case 10:bn(s.type);break;case 22:case 23:Dt(s),hu(),n!==null&&J(Ai);break;case 24:bn(Qe)}}function Mr(n,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&n)===n){c=void 0;var v=a.create,S=a.inst;c=v(),S.destroy=c}a=a.next}while(a!==g)}}catch(w){Re(s,s.return,w)}}function Xn(n,s,a){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&n)===n){var S=c.inst,w=S.destroy;if(w!==void 0){S.destroy=void 0,g=s;var I=a,L=w;try{L()}catch(H){Re(g,I,H)}}}c=c.next}while(c!==v)}}catch(H){Re(s,s.return,H)}}function Mp(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{bh(s,a)}catch(c){Re(n,n.return,c)}}}function Ip(n,s,a){a.props=Di(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){Re(n,s,c)}}function Ir(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(g){Re(n,s,g)}}function cn(n,s){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){Re(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Re(n,s,g)}else a.current=null}function Dp(n){var s=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){Re(n,n.return,g)}}function Fu(n,s,a){try{var c=n.stateNode;ox(c,n.type,a,s),c[_t]=s}catch(g){Re(n,n.return,g)}}function kp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&si(n.type)||n.tag===4}function $u(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&si(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ju(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=mn));else if(c!==4&&(c===27&&si(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Ju(n,s,a),n=n.sibling;n!==null;)Ju(n,s,a),n=n.sibling}function ta(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(c===27&&si(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ta(n,s,a),n=n.sibling;n!==null;)ta(n,s,a),n=n.sibling}function Up(n){var s=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);ct(s,c,a),s[ot]=n,s[_t]=a}catch(v){Re(n,n.return,v)}}var Tn=!1,Ze=!1,Yu=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Bb(n,s){if(n=n.containerInfo,mc=Sa,n=Jf(n),zl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,w=-1,I=-1,L=0,H=0,$=n,q=null;t:for(;;){for(var B;$!==a||g!==0&&$.nodeType!==3||(w=S+g),$!==v||c!==0&&$.nodeType!==3||(I=S+c),$.nodeType===3&&(S+=$.nodeValue.length),(B=$.firstChild)!==null;)q=$,$=B;for(;;){if($===n)break t;if(q===a&&++L===g&&(w=S),q===v&&++H===c&&(I=S),(B=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=B}a=w===-1||I===-1?null:{start:w,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(gc={focusedElem:n,selectionRange:a},Sa=!1,rt=s;rt!==null;)if(s=rt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,rt=n;else for(;rt!==null;){switch(s=rt,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ee=Di(a.type,g);n=c.getSnapshotBeforeUpdate(ee,v),c.__reactInternalSnapshotBeforeUpdate=n}catch(ae){Re(a,a.return,ae)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)_c(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":_c(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,rt=n;break}rt=s.return}}function Op(n,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:An(n,a),c&4&&Mr(5,a);break;case 1:if(An(n,a),c&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){Re(a,a.return,S)}else{var g=Di(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Re(a,a.return,S)}}c&64&&Mp(a),c&512&&Ir(a,a.return);break;case 3:if(An(n,a),c&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{bh(n,s)}catch(S){Re(a,a.return,S)}}break;case 27:s===null&&c&4&&Up(a);case 26:case 5:An(n,a),s===null&&c&4&&Dp(a),c&512&&Ir(a,a.return);break;case 12:An(n,a);break;case 31:An(n,a),c&4&&Bp(n,a);break;case 13:An(n,a),c&4&&jp(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Yb.bind(null,a),px(n,a))));break;case 22:if(c=a.memoizedState!==null||Tn,!c){s=s!==null&&s.memoizedState!==null||Ze,g=Tn;var v=Ze;Tn=c,(Ze=s)&&!v?Nn(n,a,(a.subtreeFlags&8772)!==0):An(n,a),Tn=g,Ze=v}break;case 30:break;default:An(n,a)}}function Lp(n){var s=n.alternate;s!==null&&(n.alternate=null,Lp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&wl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var He=null,xt=!1;function Cn(n,s,a){for(a=a.child;a!==null;)qp(n,s,a),a=a.sibling}function qp(n,s,a){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(tr,a)}catch{}switch(a.tag){case 26:Ze||cn(a,s),Cn(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ze||cn(a,s);var c=He,g=xt;si(a.type)&&(He=a.stateNode,xt=!1),Cn(n,s,a),jr(a.stateNode),He=c,xt=g;break;case 5:Ze||cn(a,s);case 6:if(c=He,g=xt,He=null,Cn(n,s,a),He=c,xt=g,He!==null)if(xt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(v){Re(a,s,v)}else try{He.removeChild(a.stateNode)}catch(v){Re(a,s,v)}break;case 18:He!==null&&(xt?(n=He,Mm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Rs(n)):Mm(He,a.stateNode));break;case 4:c=He,g=xt,He=a.stateNode.containerInfo,xt=!0,Cn(n,s,a),He=c,xt=g;break;case 0:case 11:case 14:case 15:Xn(2,a,s),Ze||Xn(4,a,s),Cn(n,s,a);break;case 1:Ze||(cn(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ip(a,s,c)),Cn(n,s,a);break;case 21:Cn(n,s,a);break;case 22:Ze=(c=Ze)||a.memoizedState!==null,Cn(n,s,a),Ze=c;break;default:Cn(n,s,a)}}function Bp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Rs(n)}catch(a){Re(s,s.return,a)}}}function jp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Rs(n)}catch(a){Re(s,s.return,a)}}function jb(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Pp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Pp),s;default:throw Error(r(435,n.tag))}}function na(n,s){var a=jb(n);s.forEach(function(c){if(!a.has(c)){a.add(c);var g=Kb.bind(null,n,c);c.then(g,g)}})}function St(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],v=n,S=s,w=S;e:for(;w!==null;){switch(w.tag){case 27:if(si(w.type)){He=w.stateNode,xt=!1;break e}break;case 5:He=w.stateNode,xt=!1;break e;case 3:case 4:He=w.stateNode.containerInfo,xt=!0;break e}w=w.return}if(He===null)throw Error(r(160));qp(v,S,g),He=null,xt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)zp(s,n),s=s.sibling}var Wt=null;function zp(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:St(s,n),Et(n),c&4&&(Xn(3,n,n.return),Mr(3,n),Xn(5,n,n.return));break;case 1:St(s,n),Et(n),c&512&&(Ze||a===null||cn(a,a.return)),c&64&&Tn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=Wt;if(St(s,n),Et(n),c&512&&(Ze||a===null||cn(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[sr]||v[ot]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),ct(v,c,a),v[ot]=n,st(v),c=v;break e;case"link":var S=zm("link","href",g).get(c+(a.href||""));if(S){for(var w=0;w<S.length;w++)if(v=S[w],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(w,1);break t}}v=g.createElement(c),ct(v,c,a),g.head.appendChild(v);break;case"meta":if(S=zm("meta","content",g).get(c+(a.content||""))){for(w=0;w<S.length;w++)if(v=S[w],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(w,1);break t}}v=g.createElement(c),ct(v,c,a),g.head.appendChild(v);break;default:throw Error(r(468,c))}v[ot]=n,st(v),c=v}n.stateNode=c}else Hm(g,n.type,n.stateNode);else n.stateNode=jm(g,c,n.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?Hm(g,n.type,n.stateNode):jm(g,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Fu(n,n.memoizedProps,a.memoizedProps)}break;case 27:St(s,n),Et(n),c&512&&(Ze||a===null||cn(a,a.return)),a!==null&&c&4&&Fu(n,n.memoizedProps,a.memoizedProps);break;case 5:if(St(s,n),Et(n),c&512&&(Ze||a===null||cn(a,a.return)),n.flags&32){g=n.stateNode;try{Wi(g,"")}catch(ee){Re(n,n.return,ee)}}c&4&&n.stateNode!=null&&(g=n.memoizedProps,Fu(n,g,a!==null?a.memoizedProps:g)),c&1024&&(Yu=!0);break;case 6:if(St(s,n),Et(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(ee){Re(n,n.return,ee)}}break;case 3:if(va=null,g=Wt,Wt=ga(s.containerInfo),St(s,n),Wt=g,Et(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Rs(s.containerInfo)}catch(ee){Re(n,n.return,ee)}Yu&&(Yu=!1,Hp(n));break;case 4:c=Wt,Wt=ga(n.stateNode.containerInfo),St(s,n),Et(n),Wt=c;break;case 12:St(s,n),Et(n);break;case 31:St(s,n),Et(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,na(n,c)));break;case 13:St(s,n),Et(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sa=Ct()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,na(n,c)));break;case 22:g=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,L=Tn,H=Ze;if(Tn=L||g,Ze=H||I,St(s,n),Ze=H,Tn=L,Et(n),c&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||I||Tn||Ze||ki(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){I=a=s;try{if(v=I.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{w=I.stateNode;var $=I.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ee){Re(I,I.return,ee)}}}else if(s.tag===6){if(a===null){I=s;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(ee){Re(I,I.return,ee)}}}else if(s.tag===18){if(a===null){I=s;try{var B=I.stateNode;g?Im(B,!0):Im(I.stateNode,!1)}catch(ee){Re(I,I.return,ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,na(n,a))));break;case 19:St(s,n),Et(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,na(n,c)));break;case 30:break;case 21:break;default:St(s,n),Et(n)}}function Et(n){var s=n.flags;if(s&2){try{for(var a,c=n.return;c!==null;){if(kp(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var g=a.stateNode,v=$u(n);ta(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(Wi(S,""),a.flags&=-33);var w=$u(n);ta(n,w,S);break;case 3:case 4:var I=a.stateNode.containerInfo,L=$u(n);Ju(n,L,I);break;default:throw Error(r(161))}}catch(H){Re(n,n.return,H)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Hp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Hp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function An(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Op(n,s.alternate,s),s=s.sibling}function ki(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Xn(4,s,s.return),ki(s);break;case 1:cn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Ip(s,s.return,a),ki(s);break;case 27:jr(s.stateNode);case 26:case 5:cn(s,s.return),ki(s);break;case 22:s.memoizedState===null&&ki(s);break;case 30:ki(s);break;default:ki(s)}n=n.sibling}}function Nn(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:Nn(g,v,a),Mr(4,v);break;case 1:if(Nn(g,v,a),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(L){Re(c,c.return,L)}if(c=v,g=c.updateQueue,g!==null){var w=c.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)_h(I[g],w)}catch(L){Re(c,c.return,L)}}a&&S&64&&Mp(v),Ir(v,v.return);break;case 27:Up(v);case 26:case 5:Nn(g,v,a),a&&c===null&&S&4&&Dp(v),Ir(v,v.return);break;case 12:Nn(g,v,a);break;case 31:Nn(g,v,a),a&&S&4&&Bp(g,v);break;case 13:Nn(g,v,a),a&&S&4&&jp(g,v);break;case 22:v.memoizedState===null&&Nn(g,v,a),Ir(v,v.return);break;case 30:break;default:Nn(g,v,a)}s=s.sibling}}function Ku(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&yr(a))}function Qu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yr(n))}function Zt(n,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Gp(n,s,a,c),s=s.sibling}function Gp(n,s,a,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Zt(n,s,a,c),g&2048&&Mr(9,s);break;case 1:Zt(n,s,a,c);break;case 3:Zt(n,s,a,c),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yr(n)));break;case 12:if(g&2048){Zt(n,s,a,c),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,w=v.onPostCommit;typeof w=="function"&&w(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){Re(s,s.return,I)}}else Zt(n,s,a,c);break;case 31:Zt(n,s,a,c);break;case 13:Zt(n,s,a,c);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?Zt(n,s,a,c):Dr(n,s):v._visibility&2?Zt(n,s,a,c):(v._visibility|=2,vs(n,s,a,c,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Ku(S,s);break;case 24:Zt(n,s,a,c),g&2048&&Qu(s.alternate,s);break;default:Zt(n,s,a,c)}}function vs(n,s,a,c,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,w=a,I=c,L=S.flags;switch(S.tag){case 0:case 11:case 15:vs(v,S,w,I,g),Mr(8,S);break;case 23:break;case 22:var H=S.stateNode;S.memoizedState!==null?H._visibility&2?vs(v,S,w,I,g):Dr(v,S):(H._visibility|=2,vs(v,S,w,I,g)),g&&L&2048&&Ku(S.alternate,S);break;case 24:vs(v,S,w,I,g),g&&L&2048&&Qu(S.alternate,S);break;default:vs(v,S,w,I,g)}s=s.sibling}}function Dr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,c=s,g=c.flags;switch(c.tag){case 22:Dr(a,c),g&2048&&Ku(c.alternate,c);break;case 24:Dr(a,c),g&2048&&Qu(c.alternate,c);break;default:Dr(a,c)}s=s.sibling}}var kr=8192;function _s(n,s,a){if(n.subtreeFlags&kr)for(n=n.child;n!==null;)Vp(n,s,a),n=n.sibling}function Vp(n,s,a){switch(n.tag){case 26:_s(n,s,a),n.flags&kr&&n.memoizedState!==null&&Cx(a,Wt,n.memoizedState,n.memoizedProps);break;case 5:_s(n,s,a);break;case 3:case 4:var c=Wt;Wt=ga(n.stateNode.containerInfo),_s(n,s,a),Wt=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=kr,kr=16777216,_s(n,s,a),kr=c):_s(n,s,a));break;default:_s(n,s,a)}}function Fp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ur(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];rt=c,Jp(c,n)}Fp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$p(n),n=n.sibling}function $p(n){switch(n.tag){case 0:case 11:case 15:Ur(n),n.flags&2048&&Xn(9,n,n.return);break;case 3:Ur(n);break;case 12:Ur(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ia(n)):Ur(n);break;default:Ur(n)}}function ia(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];rt=c,Jp(c,n)}Fp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Xn(8,s,s.return),ia(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ia(s));break;default:ia(s)}n=n.sibling}}function Jp(n,s){for(;rt!==null;){var a=rt;switch(a.tag){case 0:case 11:case 15:Xn(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yr(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,rt=c;else e:for(a=n;rt!==null;){c=rt;var g=c.sibling,v=c.return;if(Lp(c),c===a){rt=null;break e}if(g!==null){g.return=v,rt=g;break e}rt=v}}}var zb={getCacheForType:function(n){var s=lt(Qe),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return lt(Qe).controller.signal}},Hb=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Pe=null,ve=null,be=0,Ne=0,kt=null,Wn=!1,bs=!1,Xu=!1,Rn=0,$e=0,Zn=0,Ui=0,Wu=0,Ut=0,xs=0,Pr=null,wt=null,Zu=!1,sa=0,Yp=0,ra=1/0,oa=null,ei=null,nt=0,ti=null,Ss=null,Mn=0,ec=0,tc=null,Kp=null,Or=0,nc=null;function Pt(){return(Ce&2)!==0&&be!==0?be&-be:z.T!==null?lc():df()}function Qp(){if(Ut===0)if((be&536870912)===0||Se){var n=po;po<<=1,(po&3932160)===0&&(po=262144),Ut=n}else Ut=536870912;return n=It.current,n!==null&&(n.flags|=32),Ut}function Tt(n,s,a){(n===Pe&&(Ne===2||Ne===9)||n.cancelPendingCommit!==null)&&(Es(n,0),ni(n,be,Ut,!1)),ir(n,a),((Ce&2)===0||n!==Pe)&&(n===Pe&&((Ce&2)===0&&(Ui|=a),$e===4&&ni(n,be,Ut,!1)),dn(n))}function Xp(n,s,a){if((Ce&6)!==0)throw Error(r(327));var c=!a&&(s&127)===0&&(s&n.expiredLanes)===0||nr(n,s),g=c?Fb(n,s):sc(n,s,!0),v=c;do{if(g===0){bs&&!c&&ni(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!Gb(a)){g=sc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var w=n;g=Pr;var I=w.current.memoizedState.isDehydrated;if(I&&(Es(w,S).flags|=256),S=sc(w,S,!1),S!==2){if(Xu&&!I){w.errorRecoveryDisabledLanes|=v,Ui|=v,g=4;break e}v=wt,wt=g,v!==null&&(wt===null?wt=v:wt.push.apply(wt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Es(n,0),ni(n,s,0,!0);break}e:{switch(c=n,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ni(c,s,Ut,!Wn);break e;case 2:wt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(g=sa+300-Ct(),10<g)){if(ni(c,s,Ut,!Wn),go(c,0,!0)!==0)break e;Mn=s,c.timeoutHandle=Nm(Wp.bind(null,c,a,wt,oa,Zu,s,Ut,Ui,xs,Wn,v,"Throttled",-0,0),g);break e}Wp(c,a,wt,oa,Zu,s,Ut,Ui,xs,Wn,v,null,-0,0)}}break}while(!0);dn(n)}function Wp(n,s,a,c,g,v,S,w,I,L,H,$,q,B){if(n.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},Vp(s,v,$);var ee=(v&62914560)===v?sa-Ct():(v&4194048)===v?Yp-Ct():0;if(ee=Ax($,ee),ee!==null){Mn=v,n.cancelPendingCommit=ee(om.bind(null,n,s,v,a,c,g,S,w,I,H,$,null,q,B)),ni(n,v,S,!L);return}}om(n,s,v,a,c,g,S,w,I)}function Gb(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],v=g.getSnapshot;g=g.value;try{if(!Rt(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ni(n,s,a,c){s&=~Wu,s&=~Ui,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var g=s;0<g;){var v=31-Nt(g),S=1<<v;c[v]=-1,g&=~S}a!==0&&lf(n,a,s)}function aa(){return(Ce&6)===0?(Lr(0),!1):!0}function ic(){if(ve!==null){if(Ne===0)var n=ve.return;else n=ve,_n=Ti=null,_u(n),hs=null,_r=0,n=ve;for(;n!==null;)Rp(n.alternate,n),n=n.return;ve=null}}function Es(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,ux(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Mn=0,ic(),Pe=n,ve=a=yn(n.current,null),be=s,Ne=0,kt=null,Wn=!1,bs=nr(n,s),Xu=!1,xs=Ut=Wu=Ui=Zn=$e=0,wt=Pr=null,Zu=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var g=31-Nt(c),v=1<<g;s|=n[g],c&=~v}return Rn=s,No(),a}function Zp(n,s){he=null,z.H=Ar,s===fs||s===Oo?(s=mh(),Ne=3):s===au?(s=mh(),Ne=4):Ne=s===Pu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kt=s,ve===null&&($e=1,Qo(n,Ht(s,n.current)))}function em(){var n=It.current;return n===null?!0:(be&4194048)===be?$t===null:(be&62914560)===be||(be&536870912)!==0?n===$t:!1}function tm(){var n=z.H;return z.H=Ar,n===null?Ar:n}function nm(){var n=z.A;return z.A=zb,n}function la(){$e=4,Wn||(be&4194048)!==be&&It.current!==null||(bs=!0),(Zn&134217727)===0&&(Ui&134217727)===0||Pe===null||ni(Pe,be,Ut,!1)}function sc(n,s,a){var c=Ce;Ce|=2;var g=tm(),v=nm();(Pe!==n||be!==s)&&(oa=null,Es(n,s)),s=!1;var S=$e;e:do try{if(Ne!==0&&ve!==null){var w=ve,I=kt;switch(Ne){case 8:ic(),S=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(s=!0);var L=Ne;if(Ne=0,kt=null,ws(n,w,I,L),a&&bs){S=0;break e}break;default:L=Ne,Ne=0,kt=null,ws(n,w,I,L)}}Vb(),S=$e;break}catch(H){Zp(n,H)}while(!0);return s&&n.shellSuspendCounter++,_n=Ti=null,Ce=c,z.H=g,z.A=v,ve===null&&(Pe=null,be=0,No()),S}function Vb(){for(;ve!==null;)im(ve)}function Fb(n,s){var a=Ce;Ce|=2;var c=tm(),g=nm();Pe!==n||be!==s?(oa=null,ra=Ct()+500,Es(n,s)):bs=nr(n,s);e:do try{if(Ne!==0&&ve!==null){s=ve;var v=kt;t:switch(Ne){case 1:Ne=0,kt=null,ws(n,s,v,1);break;case 2:case 9:if(hh(v)){Ne=0,kt=null,sm(s);break}s=function(){Ne!==2&&Ne!==9||Pe!==n||(Ne=7),dn(n)},v.then(s,s);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:hh(v)?(Ne=0,kt=null,sm(s)):(Ne=0,kt=null,ws(n,s,v,7));break;case 5:var S=null;switch(ve.tag){case 26:S=ve.memoizedState;case 5:case 27:var w=ve;if(S?Gm(S):w.stateNode.complete){Ne=0,kt=null;var I=w.sibling;if(I!==null)ve=I;else{var L=w.return;L!==null?(ve=L,ua(L)):ve=null}break t}}Ne=0,kt=null,ws(n,s,v,5);break;case 6:Ne=0,kt=null,ws(n,s,v,6);break;case 8:ic(),$e=6;break e;default:throw Error(r(462))}}$b();break}catch(H){Zp(n,H)}while(!0);return _n=Ti=null,z.H=c,z.A=g,Ce=a,ve!==null?0:(Pe=null,be=0,No(),$e)}function $b(){for(;ve!==null&&!m_();)im(ve)}function im(n){var s=Ap(n.alternate,n,Rn);n.memoizedProps=n.pendingProps,s===null?ua(n):ve=s}function sm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=xp(a,s,s.pendingProps,s.type,void 0,be);break;case 11:s=xp(a,s,s.pendingProps,s.type.render,s.ref,be);break;case 5:_u(s);default:Rp(a,s),s=ve=nh(s,Rn),s=Ap(a,s,Rn)}n.memoizedProps=n.pendingProps,s===null?ua(n):ve=s}function ws(n,s,a,c){_n=Ti=null,_u(s),hs=null,_r=0;var g=s.return;try{if(Ub(n,g,s,a,be)){$e=1,Qo(n,Ht(a,n.current)),ve=null;return}}catch(v){if(g!==null)throw ve=g,v;$e=1,Qo(n,Ht(a,n.current)),ve=null;return}s.flags&32768?(Se||c===1?n=!0:bs||(be&536870912)!==0?n=!1:(Wn=n=!0,(c===2||c===9||c===3||c===6)&&(c=It.current,c!==null&&c.tag===13&&(c.flags|=16384))),rm(s,n)):ua(s)}function ua(n){var s=n;do{if((s.flags&32768)!==0){rm(s,Wn);return}n=s.return;var a=Lb(s.alternate,s,Rn);if(a!==null){ve=a;return}if(s=s.sibling,s!==null){ve=s;return}ve=s=n}while(s!==null);$e===0&&($e=5)}function rm(n,s){do{var a=qb(n.alternate,n);if(a!==null){a.flags&=32767,ve=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ve=n;return}ve=n=a}while(n!==null);$e=6,ve=null}function om(n,s,a,c,g,v,S,w,I){n.cancelPendingCommit=null;do ca();while(nt!==0);if((Ce&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(v=s.lanes|s.childLanes,v|=$l,T_(n,a,v,S,w,I),n===Pe&&(ve=Pe=null,be=0),Ss=s,ti=n,Mn=a,ec=v,tc=g,Kp=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Qb(fo,function(){return dm(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,g=X.p,X.p=2,S=Ce,Ce|=4;try{Bb(n,s,a)}finally{Ce=S,X.p=g,z.T=c}}nt=1,am(),lm(),um()}}function am(){if(nt===1){nt=0;var n=ti,s=Ss,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var c=X.p;X.p=2;var g=Ce;Ce|=4;try{zp(s,n);var v=gc,S=Jf(n.containerInfo),w=v.focusedElem,I=v.selectionRange;if(S!==w&&w&&w.ownerDocument&&$f(w.ownerDocument.documentElement,w)){if(I!==null&&zl(w)){var L=I.start,H=I.end;if(H===void 0&&(H=L),"selectionStart"in w)w.selectionStart=L,w.selectionEnd=Math.min(H,w.value.length);else{var $=w.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var B=q.getSelection(),ee=w.textContent.length,ae=Math.min(I.start,ee),ke=I.end===void 0?ae:Math.min(I.end,ee);!B.extend&&ae>ke&&(S=ke,ke=ae,ae=S);var P=Ff(w,ae),k=Ff(w,ke);if(P&&k&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==k.node||B.focusOffset!==k.offset)){var O=$.createRange();O.setStart(P.node,P.offset),B.removeAllRanges(),ae>ke?(B.addRange(O),B.extend(k.node,k.offset)):(O.setEnd(k.node,k.offset),B.addRange(O))}}}}for($=[],B=w;B=B.parentNode;)B.nodeType===1&&$.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<$.length;w++){var F=$[w];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Sa=!!mc,gc=mc=null}finally{Ce=g,X.p=c,z.T=a}}n.current=s,nt=2}}function lm(){if(nt===2){nt=0;var n=ti,s=Ss,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var c=X.p;X.p=2;var g=Ce;Ce|=4;try{Op(n,s.alternate,s)}finally{Ce=g,X.p=c,z.T=a}}nt=3}}function um(){if(nt===4||nt===3){nt=0,g_();var n=ti,s=Ss,a=Mn,c=Kp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nt=5:(nt=0,Ss=ti=null,cm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(ei=null),Sl(a),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(tr,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=z.T,g=X.p,X.p=2,z.T=null;try{for(var v=n.onRecoverableError,S=0;S<c.length;S++){var w=c[S];v(w.value,{componentStack:w.stack})}}finally{z.T=s,X.p=g}}(Mn&3)!==0&&ca(),dn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===nc?Or++:(Or=0,nc=n):Or=0,Lr(0)}}function cm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,yr(s)))}function ca(){return am(),lm(),um(),dm()}function dm(){if(nt!==5)return!1;var n=ti,s=ec;ec=0;var a=Sl(Mn),c=z.T,g=X.p;try{X.p=32>a?32:a,z.T=null,a=tc,tc=null;var v=ti,S=Mn;if(nt=0,Ss=ti=null,Mn=0,(Ce&6)!==0)throw Error(r(331));var w=Ce;if(Ce|=4,$p(v.current),Gp(v,v.current,S,a),Ce=w,Lr(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(tr,v)}catch{}return!0}finally{X.p=g,z.T=c,cm(n,s)}}function fm(n,s,a){s=Ht(a,s),s=Uu(n.stateNode,s,2),n=Yn(n,s,2),n!==null&&(ir(n,2),dn(n))}function Re(n,s,a){if(n.tag===3)fm(n,n,a);else for(;s!==null;){if(s.tag===3){fm(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ei===null||!ei.has(c))){n=Ht(a,n),a=hp(2),c=Yn(s,a,2),c!==null&&(pp(a,c,s,n),ir(c,2),dn(c));break}}s=s.return}}function rc(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Hb;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(a)||(Xu=!0,g.add(a),n=Jb.bind(null,n,s,a),s.then(n,n))}function Jb(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Pe===n&&(be&a)===a&&($e===4||$e===3&&(be&62914560)===be&&300>Ct()-sa?(Ce&2)===0&&Es(n,0):Wu|=a,xs===be&&(xs=0)),dn(n)}function hm(n,s){s===0&&(s=af()),n=Si(n,s),n!==null&&(ir(n,s),dn(n))}function Yb(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),hm(n,a)}function Kb(n,s){var a=0;switch(n.tag){case 31:case 13:var c=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),hm(n,a)}function Qb(n,s){return vl(n,s)}var da=null,Ts=null,oc=!1,fa=!1,ac=!1,ii=0;function dn(n){n!==Ts&&n.next===null&&(Ts===null?da=Ts=n:Ts=Ts.next=n),fa=!0,oc||(oc=!0,Wb())}function Lr(n,s){if(!ac&&fa){ac=!0;do for(var a=!1,c=da;c!==null;){if(n!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var S=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-Nt(42|n)+1)-1,v&=g&~(S&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,ym(c,v))}else v=be,v=go(c,c===Pe?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||nr(c,v)||(a=!0,ym(c,v));c=c.next}while(a);ac=!1}}function Xb(){pm()}function pm(){fa=oc=!1;var n=0;ii!==0&&lx()&&(n=ii);for(var s=Ct(),a=null,c=da;c!==null;){var g=c.next,v=mm(c,s);v===0?(c.next=null,a===null?da=g:a.next=g,g===null&&(Ts=a)):(a=c,(n!==0||(v&3)!==0)&&(fa=!0)),c=g}nt!==0&&nt!==5||Lr(n),ii!==0&&(ii=0)}function mm(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-Nt(v),w=1<<S,I=g[S];I===-1?((w&a)===0||(w&c)!==0)&&(g[S]=w_(w,s)):I<=s&&(n.expiredLanes|=w),v&=~w}if(s=Pe,a=be,a=go(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===s&&(Ne===2||Ne===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&_l(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||nr(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(c!==null&&_l(c),Sl(a)){case 2:case 8:a=rf;break;case 32:a=fo;break;case 268435456:a=of;break;default:a=fo}return c=gm.bind(null,n),a=vl(a,c),n.callbackPriority=s,n.callbackNode=a,s}return c!==null&&c!==null&&_l(c),n.callbackPriority=2,n.callbackNode=null,2}function gm(n,s){if(nt!==0&&nt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ca()&&n.callbackNode!==a)return null;var c=be;return c=go(n,n===Pe?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Xp(n,c,s),mm(n,Ct()),n.callbackNode!=null&&n.callbackNode===a?gm.bind(null,n):null)}function ym(n,s){if(ca())return null;Xp(n,s,!0)}function Wb(){cx(function(){(Ce&6)!==0?vl(sf,Xb):pm()})}function lc(){if(ii===0){var n=cs;n===0&&(n=ho,ho<<=1,(ho&261888)===0&&(ho=256)),ii=n}return ii}function vm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bo(""+n)}function _m(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function Zb(n,s,a,c,g){if(s==="submit"&&a&&a.stateNode===g){var v=vm((g[_t]||null).action),S=c.submitter;S&&(s=(s=S[_t]||null)?vm(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var w=new wo("action","action",null,c,g);n.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ii!==0){var I=S?_m(g,S):new FormData(g);Nu(a,{pending:!0,data:I,method:g.method,action:v},null,I)}}else typeof v=="function"&&(w.preventDefault(),I=S?_m(g,S):new FormData(g),Nu(a,{pending:!0,data:I,method:g.method,action:v},v,I))},currentTarget:g}]})}}for(var uc=0;uc<Fl.length;uc++){var cc=Fl[uc],ex=cc.toLowerCase(),tx=cc[0].toUpperCase()+cc.slice(1);Xt(ex,"on"+tx)}Xt(Qf,"onAnimationEnd"),Xt(Xf,"onAnimationIteration"),Xt(Wf,"onAnimationStart"),Xt("dblclick","onDoubleClick"),Xt("focusin","onFocus"),Xt("focusout","onBlur"),Xt(yb,"onTransitionRun"),Xt(vb,"onTransitionStart"),Xt(_b,"onTransitionCancel"),Xt(Zf,"onTransitionEnd"),Qi("onMouseEnter",["mouseout","mouseover"]),Qi("onMouseLeave",["mouseout","mouseover"]),Qi("onPointerEnter",["pointerout","pointerover"]),Qi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qr));function bm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],g=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var S=c.length-1;0<=S;S--){var w=c[S],I=w.instance,L=w.currentTarget;if(w=w.listener,I!==v&&g.isPropagationStopped())break e;v=w,g.currentTarget=L;try{v(g)}catch(H){Ao(H)}g.currentTarget=null,v=I}else for(S=0;S<c.length;S++){if(w=c[S],I=w.instance,L=w.currentTarget,w=w.listener,I!==v&&g.isPropagationStopped())break e;v=w,g.currentTarget=L;try{v(g)}catch(H){Ao(H)}g.currentTarget=null,v=I}}}}function _e(n,s){var a=s[El];a===void 0&&(a=s[El]=new Set);var c=n+"__bubble";a.has(c)||(xm(s,n,2,!1),a.add(c))}function dc(n,s,a){var c=0;s&&(c|=4),xm(a,n,c,s)}var ha="_reactListening"+Math.random().toString(36).slice(2);function fc(n){if(!n[ha]){n[ha]=!0,pf.forEach(function(a){a!=="selectionchange"&&(nx.has(a)||dc(a,!1,n),dc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ha]||(s[ha]=!0,dc("selectionchange",!1,s))}}function xm(n,s,a,c){switch(Qm(s)){case 2:var g=Mx;break;case 8:g=Ix;break;default:g=Ac}a=g.bind(null,s,a,n),g=void 0,!Dl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function hc(n,s,a,c,g){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var w=c.stateNode.containerInfo;if(w===g)break;if(S===4)for(S=c.return;S!==null;){var I=S.tag;if((I===3||I===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;w!==null;){if(S=Ji(w),S===null)return;if(I=S.tag,I===5||I===6||I===26||I===27){c=v=S;continue e}w=w.parentNode}}c=c.return}Cf(function(){var L=v,H=Ml(a),$=[];e:{var q=eh.get(n);if(q!==void 0){var B=wo,ee=n;switch(n){case"keypress":if(So(a)===0)break e;case"keydown":case"keyup":B=K_;break;case"focusin":ee="focus",B=Ol;break;case"focusout":ee="blur",B=Ol;break;case"beforeblur":case"afterblur":B=Ol;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=L_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=W_;break;case Qf:case Xf:case Wf:B=j_;break;case Zf:B=eb;break;case"scroll":case"scrollend":B=P_;break;case"wheel":B=nb;break;case"copy":case"cut":case"paste":B=H_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=If;break;case"toggle":case"beforetoggle":B=sb}var ae=(s&4)!==0,ke=!ae&&(n==="scroll"||n==="scrollend"),P=ae?q!==null?q+"Capture":null:q;ae=[];for(var k=L,O;k!==null;){var F=k;if(O=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||O===null||P===null||(F=or(k,P),F!=null&&ae.push(Br(k,F,O))),ke)break;k=k.return}0<ae.length&&(q=new B(q,ee,null,a,H),$.push({event:q,listeners:ae}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",B=n==="mouseout"||n==="pointerout",q&&a!==Rl&&(ee=a.relatedTarget||a.fromElement)&&(Ji(ee)||ee[$i]))break e;if((B||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,B?(ee=a.relatedTarget||a.toElement,B=L,ee=ee?Ji(ee):null,ee!==null&&(ke=l(ee),ae=ee.tag,ee!==ke||ae!==5&&ae!==27&&ae!==6)&&(ee=null)):(B=null,ee=L),B!==ee)){if(ae=Rf,F="onMouseLeave",P="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(ae=If,F="onPointerLeave",P="onPointerEnter",k="pointer"),ke=B==null?q:rr(B),O=ee==null?q:rr(ee),q=new ae(F,k+"leave",B,a,H),q.target=ke,q.relatedTarget=O,F=null,Ji(H)===L&&(ae=new ae(P,k+"enter",ee,a,H),ae.target=O,ae.relatedTarget=ke,F=ae),ke=F,B&&ee)t:{for(ae=ix,P=B,k=ee,O=0,F=P;F;F=ae(F))O++;F=0;for(var oe=k;oe;oe=ae(oe))F++;for(;0<O-F;)P=ae(P),O--;for(;0<F-O;)k=ae(k),F--;for(;O--;){if(P===k||k!==null&&P===k.alternate){ae=P;break t}P=ae(P),k=ae(k)}ae=null}else ae=null;B!==null&&Sm($,q,B,ae,!1),ee!==null&&ke!==null&&Sm($,ke,ee,ae,!0)}}e:{if(q=L?rr(L):window,B=q.nodeName&&q.nodeName.toLowerCase(),B==="select"||B==="input"&&q.type==="file")var Ee=Bf;else if(Lf(q))if(jf)Ee=pb;else{Ee=fb;var ie=db}else B=q.nodeName,!B||B.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?L&&Nl(L.elementType)&&(Ee=Bf):Ee=hb;if(Ee&&(Ee=Ee(n,L))){qf($,Ee,a,H);break e}ie&&ie(n,q,L),n==="focusout"&&L&&q.type==="number"&&L.memoizedProps.value!=null&&Al(q,"number",q.value)}switch(ie=L?rr(L):window,n){case"focusin":(Lf(ie)||ie.contentEditable==="true")&&(ns=ie,Hl=L,pr=null);break;case"focusout":pr=Hl=ns=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,Yf($,a,H);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":Yf($,a,H)}var me;if(ql)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else ts?Pf(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(Df&&a.locale!=="ko"&&(ts||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&ts&&(me=Af()):(zn=H,kl="value"in zn?zn.value:zn.textContent,ts=!0)),ie=pa(L,xe),0<ie.length&&(xe=new Mf(xe,n,null,a,H),$.push({event:xe,listeners:ie}),me?xe.data=me:(me=Of(a),me!==null&&(xe.data=me)))),(me=ob?ab(n,a):lb(n,a))&&(xe=pa(L,"onBeforeInput"),0<xe.length&&(ie=new Mf("onBeforeInput","beforeinput",null,a,H),$.push({event:ie,listeners:xe}),ie.data=me)),Zb($,n,L,a,H)}bm($,s)})}function Br(n,s,a){return{instance:n,listener:s,currentTarget:a}}function pa(n,s){for(var a=s+"Capture",c=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=or(n,a),g!=null&&c.unshift(Br(n,g,v)),g=or(n,s),g!=null&&c.push(Br(n,g,v))),n.tag===3)return c;n=n.return}return[]}function ix(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Sm(n,s,a,c,g){for(var v=s._reactName,S=[];a!==null&&a!==c;){var w=a,I=w.alternate,L=w.stateNode;if(w=w.tag,I!==null&&I===c)break;w!==5&&w!==26&&w!==27||L===null||(I=L,g?(L=or(a,v),L!=null&&S.unshift(Br(a,L,I))):g||(L=or(a,v),L!=null&&S.push(Br(a,L,I)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var sx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function Em(n){return(typeof n=="string"?n:""+n).replace(sx,`
`).replace(rx,"")}function wm(n,s){return s=Em(s),Em(n)===s}function De(n,s,a,c,g,v){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Wi(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Wi(n,""+c);break;case"className":vo(n,"class",c);break;case"tabIndex":vo(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":vo(n,a,c);break;case"style":wf(n,c,v);break;case"data":if(s!=="object"){vo(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=bo(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&De(n,s,"name",g.name,g,null),De(n,s,"formEncType",g.formEncType,g,null),De(n,s,"formMethod",g.formMethod,g,null),De(n,s,"formTarget",g.formTarget,g,null)):(De(n,s,"encType",g.encType,g,null),De(n,s,"method",g.method,g,null),De(n,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=bo(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=mn);break;case"onScroll":c!=null&&_e("scroll",n);break;case"onScrollEnd":c!=null&&_e("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=bo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":_e("beforetoggle",n),_e("toggle",n),yo(n,"popover",c);break;case"xlinkActuate":pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":yo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=k_.get(a)||a,yo(n,a,c))}}function pc(n,s,a,c,g,v){switch(a){case"style":wf(n,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Wi(n,c):(typeof c=="number"||typeof c=="bigint")&&Wi(n,""+c);break;case"onScroll":c!=null&&_e("scroll",n);break;case"onScrollEnd":c!=null&&_e("scrollend",n);break;case"onClick":c!=null&&(n.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[_t]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,c,g);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):yo(n,a,c)}}}function ct(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",n),_e("load",n);var c=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:De(n,s,v,S,a,null)}}g&&De(n,s,"srcSet",a.srcSet,a,null),c&&De(n,s,"src",a.src,a,null);return;case"input":_e("invalid",n);var w=v=S=g=null,I=null,L=null;for(c in a)if(a.hasOwnProperty(c)){var H=a[c];if(H!=null)switch(c){case"name":g=H;break;case"type":S=H;break;case"checked":I=H;break;case"defaultChecked":L=H;break;case"value":v=H;break;case"defaultValue":w=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,s));break;default:De(n,s,c,H,a,null)}}bf(n,v,w,I,L,S,g,!1);return;case"select":_e("invalid",n),c=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(w=a[g],w!=null))switch(g){case"value":v=w;break;case"defaultValue":S=w;break;case"multiple":c=w;default:De(n,s,g,w,a,null)}s=v,a=S,n.multiple=!!c,s!=null?Xi(n,!!c,s,!1):a!=null&&Xi(n,!!c,a,!0);return;case"textarea":_e("invalid",n),v=g=c=null;for(S in a)if(a.hasOwnProperty(S)&&(w=a[S],w!=null))switch(S){case"value":c=w;break;case"defaultValue":g=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:De(n,s,S,w,a,null)}Sf(n,c,g,v);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(c=a[I],c!=null))switch(I){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:De(n,s,I,c,a,null)}return;case"dialog":_e("beforetoggle",n),_e("toggle",n),_e("cancel",n),_e("close",n);break;case"iframe":case"object":_e("load",n);break;case"video":case"audio":for(c=0;c<qr.length;c++)_e(qr[c],n);break;case"image":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"embed":case"source":case"link":_e("error",n),_e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(c=a[L],c!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:De(n,s,L,c,a,null)}return;default:if(Nl(s)){for(H in a)a.hasOwnProperty(H)&&(c=a[H],c!==void 0&&pc(n,s,H,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&De(n,s,w,c,a,null))}function ox(n,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,w=null,I=null,L=null,H=null;for(B in a){var $=a[B];if(a.hasOwnProperty(B)&&$!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":I=$;default:c.hasOwnProperty(B)||De(n,s,B,null,c,$)}}for(var q in c){var B=c[q];if($=a[q],c.hasOwnProperty(q)&&(B!=null||$!=null))switch(q){case"type":v=B;break;case"name":g=B;break;case"checked":L=B;break;case"defaultChecked":H=B;break;case"value":S=B;break;case"defaultValue":w=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,s));break;default:B!==$&&De(n,s,q,B,c,$)}}Cl(n,S,w,I,L,H,v,g);return;case"select":B=S=w=q=null;for(v in a)if(I=a[v],a.hasOwnProperty(v)&&I!=null)switch(v){case"value":break;case"multiple":B=I;default:c.hasOwnProperty(v)||De(n,s,v,null,c,I)}for(g in c)if(v=c[g],I=a[g],c.hasOwnProperty(g)&&(v!=null||I!=null))switch(g){case"value":q=v;break;case"defaultValue":w=v;break;case"multiple":S=v;default:v!==I&&De(n,s,g,v,c,I)}s=w,a=S,c=B,q!=null?Xi(n,!!a,q,!1):!!c!=!!a&&(s!=null?Xi(n,!!a,s,!0):Xi(n,!!a,a?[]:"",!1));return;case"textarea":B=q=null;for(w in a)if(g=a[w],a.hasOwnProperty(w)&&g!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:De(n,s,w,null,c,g)}for(S in c)if(g=c[S],v=a[S],c.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":q=g;break;case"defaultValue":B=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&De(n,s,S,g,c,v)}xf(n,q,B);return;case"option":for(var ee in a)if(q=a[ee],a.hasOwnProperty(ee)&&q!=null&&!c.hasOwnProperty(ee))switch(ee){case"selected":n.selected=!1;break;default:De(n,s,ee,null,c,q)}for(I in c)if(q=c[I],B=a[I],c.hasOwnProperty(I)&&q!==B&&(q!=null||B!=null))switch(I){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:De(n,s,I,q,c,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ae in a)q=a[ae],a.hasOwnProperty(ae)&&q!=null&&!c.hasOwnProperty(ae)&&De(n,s,ae,null,c,q);for(L in c)if(q=c[L],B=a[L],c.hasOwnProperty(L)&&q!==B&&(q!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:De(n,s,L,q,c,B)}return;default:if(Nl(s)){for(var ke in a)q=a[ke],a.hasOwnProperty(ke)&&q!==void 0&&!c.hasOwnProperty(ke)&&pc(n,s,ke,void 0,c,q);for(H in c)q=c[H],B=a[H],!c.hasOwnProperty(H)||q===B||q===void 0&&B===void 0||pc(n,s,H,q,c,B);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!c.hasOwnProperty(P)&&De(n,s,P,null,c,q);for($ in c)q=c[$],B=a[$],!c.hasOwnProperty($)||q===B||q==null&&B==null||De(n,s,$,q,c,B)}function Tm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ax(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],v=g.transferSize,S=g.initiatorType,w=g.duration;if(v&&w&&Tm(S)){for(S=0,w=g.responseEnd,c+=1;c<a.length;c++){var I=a[c],L=I.startTime;if(L>w)break;var H=I.transferSize,$=I.initiatorType;H&&Tm($)&&(I=I.responseEnd,S+=H*(I<w?1:(w-L)/(I-L)))}if(--c,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var mc=null,gc=null;function ma(n){return n.nodeType===9?n:n.ownerDocument}function Cm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Am(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function yc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var vc=null;function lx(){var n=window.event;return n&&n.type==="popstate"?n===vc?!1:(vc=n,!0):(vc=null,!1)}var Nm=typeof setTimeout=="function"?setTimeout:void 0,ux=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,cx=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(n){return Rm.resolve(null).then(n).catch(dx)}:Nm;function dx(n){setTimeout(function(){throw n})}function si(n){return n==="head"}function Mm(n,s){var a=s,c=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){n.removeChild(g),Rs(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")jr(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,jr(a);for(var v=a.firstChild;v;){var S=v.nextSibling,w=v.nodeName;v[sr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&jr(n.ownerDocument.body);a=g}while(a);Rs(s)}function Im(n,s){var a=n;n=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=c}while(a)}function _c(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_c(a),wl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function fx(n,s,a,c){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[sr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=Jt(n.nextSibling),n===null)break}return null}function hx(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Jt(n.nextSibling),n===null))return null;return n}function Dm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Jt(n.nextSibling),n===null))return null;return n}function bc(n){return n.data==="$?"||n.data==="$~"}function xc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function px(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Jt(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Sc=null;function km(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Jt(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function Um(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Pm(n,s,a){switch(s=ma(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function jr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);wl(n)}var Yt=new Map,Om=new Set;function ga(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var In=X.d;X.d={f:mx,r:gx,D:yx,C:vx,L:_x,m:bx,X:Sx,S:xx,M:Ex};function mx(){var n=In.f(),s=aa();return n||s}function gx(n){var s=Yi(n);s!==null&&s.tag===5&&s.type==="form"?Zh(s):In.r(n)}var Cs=typeof document>"u"?null:document;function Lm(n,s,a){var c=Cs;if(c&&typeof s=="string"&&s){var g=jt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Om.has(g)||(Om.add(g),n={rel:n,crossOrigin:a,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),ct(s,"link",n),st(s),c.head.appendChild(s)))}}function yx(n){In.D(n),Lm("dns-prefetch",n,null)}function vx(n,s){In.C(n,s),Lm("preconnect",n,s)}function _x(n,s,a){In.L(n,s,a);var c=Cs;if(c&&n&&s){var g='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+jt(a.imageSizes)+'"]')):g+='[href="'+jt(n)+'"]';var v=g;switch(s){case"style":v=As(n);break;case"script":v=Ns(n)}Yt.has(v)||(n=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Yt.set(v,n),c.querySelector(g)!==null||s==="style"&&c.querySelector(zr(v))||s==="script"&&c.querySelector(Hr(v))||(s=c.createElement("link"),ct(s,"link",n),st(s),c.head.appendChild(s)))}}function bx(n,s){In.m(n,s);var a=Cs;if(a&&n){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+jt(c)+'"][href="'+jt(n)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ns(n)}if(!Yt.has(v)&&(n=b({rel:"modulepreload",href:n},s),Yt.set(v,n),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hr(v)))return}c=a.createElement("link"),ct(c,"link",n),st(c),a.head.appendChild(c)}}}function xx(n,s,a){In.S(n,s,a);var c=Cs;if(c&&n){var g=Ki(c).hoistableStyles,v=As(n);s=s||"default";var S=g.get(v);if(!S){var w={loading:0,preload:null};if(S=c.querySelector(zr(v)))w.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Yt.get(v))&&Ec(n,a);var I=S=c.createElement("link");st(I),ct(I,"link",n),I._p=new Promise(function(L,H){I.onload=L,I.onerror=H}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ya(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:w},g.set(v,S)}}}function Sx(n,s){In.X(n,s);var a=Cs;if(a&&n){var c=Ki(a).hoistableScripts,g=Ns(n),v=c.get(g);v||(v=a.querySelector(Hr(g)),v||(n=b({src:n,async:!0},s),(s=Yt.get(g))&&wc(n,s),v=a.createElement("script"),st(v),ct(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function Ex(n,s){In.M(n,s);var a=Cs;if(a&&n){var c=Ki(a).hoistableScripts,g=Ns(n),v=c.get(g);v||(v=a.querySelector(Hr(g)),v||(n=b({src:n,async:!0,type:"module"},s),(s=Yt.get(g))&&wc(n,s),v=a.createElement("script"),st(v),ct(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function qm(n,s,a,c){var g=(g=ye.current)?ga(g):null;if(!g)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=As(a.href),a=Ki(g).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=As(a.href);var v=Ki(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(zr(n)))&&!v._p&&(S.instance=v,S.state.loading=5),Yt.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yt.set(n,a),v||wx(g,n,a,S.state))),s&&c===null)throw Error(r(528,""));return S}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ns(a),a=Ki(g).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function As(n){return'href="'+jt(n)+'"'}function zr(n){return'link[rel="stylesheet"]['+n+"]"}function Bm(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function wx(n,s,a,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),ct(s,"link",a),st(s),n.head.appendChild(s))}function Ns(n){return'[src="'+jt(n)+'"]'}function Hr(n){return"script[async]"+n}function jm(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+jt(a.href)+'"]');if(c)return s.instance=c,st(c),c;var g=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),st(c),ct(c,"style",g),ya(c,a.precedence,n),s.instance=c;case"stylesheet":g=As(a.href);var v=n.querySelector(zr(g));if(v)return s.state.loading|=4,s.instance=v,st(v),v;c=Bm(a),(g=Yt.get(g))&&Ec(c,g),v=(n.ownerDocument||n).createElement("link"),st(v);var S=v;return S._p=new Promise(function(w,I){S.onload=w,S.onerror=I}),ct(v,"link",c),s.state.loading|=4,ya(v,a.precedence,n),s.instance=v;case"script":return v=Ns(a.src),(g=n.querySelector(Hr(v)))?(s.instance=g,st(g),g):(c=a,(g=Yt.get(v))&&(c=b({},a),wc(c,g)),n=n.ownerDocument||n,g=n.createElement("script"),st(g),ct(g,"link",c),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ya(c,a.precedence,n));return s.instance}function ya(n,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,S=0;S<c.length;S++){var w=c[S];if(w.dataset.precedence===s)v=w;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Ec(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function wc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var va=null;function zm(n,s,a){if(va===null){var c=new Map,g=va=new Map;g.set(a,c)}else g=va,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[sr]||v[ot]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var w=c.get(S);w?w.push(v):c.set(S,[v])}}return c}function Hm(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function Tx(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Gm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Cx(n,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=As(c.href),v=s.querySelector(zr(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=_a.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,st(v);return}v=s.ownerDocument||s,c=Bm(c),(g=Yt.get(g))&&Ec(c,g),v=v.createElement("link"),st(v);var S=v;S._p=new Promise(function(w,I){S.onload=w,S.onerror=I}),ct(v,"link",c),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=_a.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Tc=0;function Ax(n,s){return n.stylesheets&&n.count===0&&xa(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var c=setTimeout(function(){if(n.stylesheets&&xa(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&Tc===0&&(Tc=62500*ax());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&xa(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>Tc?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function _a(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xa(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ba=null;function xa(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ba=new Map,s.forEach(Nx,n),ba=null,_a.call(n))}function Nx(n,s){if(!(s.state.loading&4)){var a=ba.get(n);if(a)var c=a.get(null);else{a=new Map,ba.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||c,v===c&&a.set(null,g),a.set(S,g),this.count++,c=_a.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var Gr={$$typeof:A,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Rx(n,s,a,c,g,v,S,w,I){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.hiddenUpdates=bl(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Vm(n,s,a,c,g,v,S,w,I,L,H,$){return n=new Rx(n,s,a,S,I,L,H,$,w),s=1,v===!0&&(s|=24),v=Mt(3,null,null,s),n.current=v,v.stateNode=n,s=su(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:s},lu(v),n}function Fm(n){return n?(n=rs,n):rs}function $m(n,s,a,c,g,v){g=Fm(g),c.context===null?c.context=g:c.pendingContext=g,c=Jn(s),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Yn(n,c,s),a!==null&&(Tt(a,n,s),xr(a,n,s))}function Jm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Cc(n,s){Jm(n,s),(n=n.alternate)&&Jm(n,s)}function Ym(n){if(n.tag===13||n.tag===31){var s=Si(n,67108864);s!==null&&Tt(s,n,67108864),Cc(n,67108864)}}function Km(n){if(n.tag===13||n.tag===31){var s=Pt();s=xl(s);var a=Si(n,s);a!==null&&Tt(a,n,s),Cc(n,s)}}var Sa=!0;function Mx(n,s,a,c){var g=z.T;z.T=null;var v=X.p;try{X.p=2,Ac(n,s,a,c)}finally{X.p=v,z.T=g}}function Ix(n,s,a,c){var g=z.T;z.T=null;var v=X.p;try{X.p=8,Ac(n,s,a,c)}finally{X.p=v,z.T=g}}function Ac(n,s,a,c){if(Sa){var g=Nc(c);if(g===null)hc(n,s,c,Ea,a),Xm(n,c);else if(kx(g,n,s,a,c))c.stopPropagation();else if(Xm(n,c),s&4&&-1<Dx.indexOf(n)){for(;g!==null;){var v=Yi(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=yi(v.pendingLanes);if(S!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;S;){var I=1<<31-Nt(S);w.entanglements[1]|=I,S&=~I}dn(v),(Ce&6)===0&&(ra=Ct()+500,Lr(0))}}break;case 31:case 13:w=Si(v,2),w!==null&&Tt(w,v,2),aa(),Cc(v,2)}if(v=Nc(c),v===null&&hc(n,s,c,Ea,a),v===g)break;g=v}g!==null&&c.stopPropagation()}else hc(n,s,c,null,a)}}function Nc(n){return n=Ml(n),Rc(n)}var Ea=null;function Rc(n){if(Ea=null,n=Ji(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ea=n,null}function Qm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(y_()){case sf:return 2;case rf:return 8;case fo:case v_:return 32;case of:return 268435456;default:return 32}default:return 32}}var Mc=!1,ri=null,oi=null,ai=null,Vr=new Map,Fr=new Map,li=[],Dx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xm(n,s){switch(n){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Vr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(s.pointerId)}}function $r(n,s,a,c,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Yi(s),s!==null&&Ym(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function kx(n,s,a,c,g){switch(s){case"focusin":return ri=$r(ri,n,s,a,c,g),!0;case"dragenter":return oi=$r(oi,n,s,a,c,g),!0;case"mouseover":return ai=$r(ai,n,s,a,c,g),!0;case"pointerover":var v=g.pointerId;return Vr.set(v,$r(Vr.get(v)||null,n,s,a,c,g)),!0;case"gotpointercapture":return v=g.pointerId,Fr.set(v,$r(Fr.get(v)||null,n,s,a,c,g)),!0}return!1}function Wm(n){var s=Ji(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,ff(n.priority,function(){Km(a)});return}}else if(s===31){if(s=f(a),s!==null){n.blockedOn=s,ff(n.priority,function(){Km(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wa(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Nc(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Rl=c,a.target.dispatchEvent(c),Rl=null}else return s=Yi(a),s!==null&&Ym(s),n.blockedOn=a,!1;s.shift()}return!0}function Zm(n,s,a){wa(n)&&a.delete(s)}function Ux(){Mc=!1,ri!==null&&wa(ri)&&(ri=null),oi!==null&&wa(oi)&&(oi=null),ai!==null&&wa(ai)&&(ai=null),Vr.forEach(Zm),Fr.forEach(Zm)}function Ta(n,s){n.blockedOn===s&&(n.blockedOn=null,Mc||(Mc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ux)))}var Ca=null;function eg(n){Ca!==n&&(Ca=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ca===n&&(Ca=null);for(var s=0;s<n.length;s+=3){var a=n[s],c=n[s+1],g=n[s+2];if(typeof c!="function"){if(Rc(c||a)===null)continue;break}var v=Yi(a);v!==null&&(n.splice(s,3),s-=3,Nu(v,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function Rs(n){function s(I){return Ta(I,n)}ri!==null&&Ta(ri,n),oi!==null&&Ta(oi,n),ai!==null&&Ta(ai,n),Vr.forEach(s),Fr.forEach(s);for(var a=0;a<li.length;a++){var c=li[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<li.length&&(a=li[0],a.blockedOn===null);)Wm(a),a.blockedOn===null&&li.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],v=a[c+1],S=g[_t]||null;if(typeof v=="function")S||eg(a);else if(S){var w=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[_t]||null)w=S.formAction;else if(Rc(g)!==null)continue}else w=S.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),eg(a)}}}function tg(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Ic(n){this._internalRoot=n}Aa.prototype.render=Ic.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,c=Pt();$m(a,c,n,s,null,null)},Aa.prototype.unmount=Ic.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;$m(n.current,2,null,n,null,null),aa(),s[$i]=null}};function Aa(n){this._internalRoot=n}Aa.prototype.unstable_scheduleHydration=function(n){if(n){var s=df();n={blockedOn:null,target:n,priority:s};for(var a=0;a<li.length&&s!==0&&s<li[a].priority;a++);li.splice(a,0,n),a===0&&Wm(n)}};var ng=e.version;if(ng!=="19.2.0")throw Error(r(527,ng,"19.2.0"));X.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=h(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var Px={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{tr=Na.inject(Px),At=Na}catch{}}return Yr.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,c="",g=up,v=cp,S=dp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Vm(n,1,!1,null,null,a,c,null,g,v,S,tg),n[$i]=s.current,fc(n),new Ic(s)},Yr.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var c=!1,g="",v=up,S=cp,w=dp,I=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),s=Vm(n,1,!0,s,a??null,c,g,I,v,S,w,tg),s.context=Fm(null),a=s.current,c=Pt(),c=xl(c),g=Jn(c),g.callback=null,Yn(a,g,c),a=c,s.current.lanes=a,ir(s,a),dn(s),n[$i]=s.current,fc(n),new Aa(s)},Yr.version="19.2.0",Yr}var fg;function Yx(){if(fg)return Uc.exports;fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uc.exports=Jx(),Uc.exports}var Kx=Yx();var hg="popstate";function Qx(t={}){function e(r,o){let{pathname:l,search:u,hash:f}=r.location;return Wc("",{pathname:l,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(r,o){return typeof o=="string"?o:to(o)}return Wx(e,i,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xx(){return Math.random().toString(36).substring(2,10)}function pg(t,e){return{usr:t.state,key:t.key,idx:e}}function Wc(t,e,i=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Js(e):e,state:i,key:e&&e.key||r||Xx()}}function to({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Js(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Wx(t,e,i,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,u=o.history,f="POP",p=null,h=_();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function _(){return(u.state||{idx:null}).idx}function b(){f="POP";let R=_(),T=R==null?null:R-h;h=R,p&&p({action:f,location:N.location,delta:T})}function x(R,T){f="PUSH";let D=Wc(N.location,R,T);h=_()+1;let A=pg(D,h),j=N.createHref(D);try{u.pushState(A,"",j)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(j)}l&&p&&p({action:f,location:N.location,delta:1})}function E(R,T){f="REPLACE";let D=Wc(N.location,R,T);h=_();let A=pg(D,h),j=N.createHref(D);u.replaceState(A,"",j),l&&p&&p({action:f,location:N.location,delta:0})}function C(R){return Zx(R)}let N={get action(){return f},get location(){return t(o,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(hg,b),p=R,()=>{o.removeEventListener(hg,b),p=null}},createHref(R){return e(o,R)},createURL:C,encodeLocation(R){let T=C(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:E,go(R){return u.go(R)}};return N}function Zx(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(i,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:to(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=i+r),new URL(r,i)}function Sv(t,e,i="/"){return eS(t,e,i,!1)}function eS(t,e,i,r){let o=typeof e=="string"?Js(e):e,l=Pn(o.pathname||"/",i);if(l==null)return null;let u=Ev(t);tS(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let h=fS(l);f=cS(u[p],h,r)}return f}function Ev(t,e=[],i=[],r="",o=!1){let l=(u,f,p=o,h)=>{let _={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&p)return;Ve(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let b=Un([r,_.relativePath]),x=i.concat(_);u.children&&u.children.length>0&&(Ve(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Ev(u.children,e,x,b,p)),!(u.path==null&&!u.index)&&e.push({path:b,score:lS(b,u.index),routesMeta:x})};return t.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))l(u,f);else for(let p of wv(u.path))l(u,f,!0,p)}),e}function wv(t){let e=t.split("/");if(e.length===0)return[];let[i,...r]=e,o=i.endsWith("?"),l=i.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let u=wv(r.join("/")),f=[];return f.push(...u.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...u),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function tS(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:uS(e.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}var nS=/^:[\w-]+$/,iS=3,sS=2,rS=1,oS=10,aS=-2,mg=t=>t==="*";function lS(t,e){let i=t.split("/"),r=i.length;return i.some(mg)&&(r+=aS),e&&(r+=sS),i.filter(o=>!mg(o)).reduce((o,l)=>o+(nS.test(l)?iS:l===""?rS:oS),r)}function uS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function cS(t,e,i=!1){let{routesMeta:r}=t,o={},l="/",u=[];for(let f=0;f<r.length;++f){let p=r[f],h=f===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=Fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},_),x=p.route;if(!b&&h&&i&&!r[r.length-1].route.index&&(b=Fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),u.push({params:o,pathname:Un([l,b.pathname]),pathnameBase:yS(Un([l,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(l=Un([l,b.pathnameBase]))}return u}function Fa(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=dS(t.path,t.caseSensitive,t.end),o=e.match(i);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:r.reduce((h,{paramName:_,isOptional:b},x)=>{if(_==="*"){let C=f[x]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const E=f[x];return b&&!E?h[_]=void 0:h[_]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:u,pattern:t}}function dS(t,e=!1,i=!0){rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(r.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function fS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&r!=="/"?null:t.slice(i)||"/"}var hS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pS=t=>hS.test(t);function mS(t,e="/"){let{pathname:i,search:r="",hash:o=""}=typeof t=="string"?Js(t):t,l;if(i)if(pS(i))l=i;else{if(i.includes("//")){let u=i;i=i.replace(/\/\/+/g,"/"),rn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${i}`)}i.startsWith("/")?l=gg(i.substring(1),"/"):l=gg(i,e)}else l=e;return{pathname:l,search:vS(r),hash:_S(o)}}function gg(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function qc(t,e,i,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gS(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Tv(t){let e=gS(t);return e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase)}function Cv(t,e,i,r=!1){let o;typeof t=="string"?o=Js(t):(o={...t},Ve(!o.pathname||!o.pathname.includes("?"),qc("?","pathname","search",o)),Ve(!o.pathname||!o.pathname.includes("#"),qc("#","pathname","hash",o)),Ve(!o.search||!o.search.includes("#"),qc("#","search","hash",o)));let l=t===""||o.pathname==="",u=l?"/":o.pathname,f;if(u==null)f=i;else{let b=e.length-1;if(!r&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),b-=1;o.pathname=x.join("/")}f=b>=0?e[b]:"/"}let p=mS(o,f),h=u&&u!=="/"&&u.endsWith("/"),_=(l||u===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||_)&&(p.pathname+="/"),p}var Un=t=>t.join("/").replace(/\/\/+/g,"/"),yS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_S=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Av=["POST","PUT","PATCH","DELETE"];new Set(Av);var xS=["GET",...Av];new Set(xS);var Ys=M.createContext(null);Ys.displayName="DataRouter";var il=M.createContext(null);il.displayName="DataRouterState";M.createContext(!1);var Nv=M.createContext({isTransitioning:!1});Nv.displayName="ViewTransition";var SS=M.createContext(new Map);SS.displayName="Fetchers";var ES=M.createContext(null);ES.displayName="Await";var fn=M.createContext(null);fn.displayName="Navigation";var oo=M.createContext(null);oo.displayName="Location";var hn=M.createContext({outlet:null,matches:[],isDataRoute:!1});hn.displayName="Route";var Ad=M.createContext(null);Ad.displayName="RouteError";function wS(t,{relative:e}={}){Ve(ao(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=M.useContext(fn),{hash:o,pathname:l,search:u}=lo(t,{relative:e}),f=l;return i!=="/"&&(f=l==="/"?i:Un([i,l])),r.createHref({pathname:f,search:u,hash:o})}function ao(){return M.useContext(oo)!=null}function Qt(){return Ve(ao(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(oo).location}var Rv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mv(t){M.useContext(fn).static||M.useLayoutEffect(t)}function on(){let{isDataRoute:t}=M.useContext(hn);return t?qS():TS()}function TS(){Ve(ao(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Ys),{basename:e,navigator:i}=M.useContext(fn),{matches:r}=M.useContext(hn),{pathname:o}=Qt(),l=JSON.stringify(Tv(r)),u=M.useRef(!1);return Mv(()=>{u.current=!0}),M.useCallback((p,h={})=>{if(rn(u.current,Rv),!u.current)return;if(typeof p=="number"){i.go(p);return}let _=Cv(p,JSON.parse(l),o,h.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Un([e,_.pathname])),(h.replace?i.replace:i.push)(_,h.state,h)},[e,i,l,o,t])}M.createContext(null);function CS(){let{matches:t}=M.useContext(hn),e=t[t.length-1];return e?e.params:{}}function lo(t,{relative:e}={}){let{matches:i}=M.useContext(hn),{pathname:r}=Qt(),o=JSON.stringify(Tv(i));return M.useMemo(()=>Cv(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function AS(t,e){return Iv(t,e)}function Iv(t,e,i,r,o){Ve(ao(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(fn),{matches:u}=M.useContext(hn),f=u[u.length-1],p=f?f.params:{},h=f?f.pathname:"/",_=f?f.pathnameBase:"/",b=f&&f.route;{let D=b&&b.path||"";Dv(h,!b||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let x=Qt(),E;if(e){let D=typeof e=="string"?Js(e):e;Ve(_==="/"||D.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=x;let C=E.pathname||"/",N=C;if(_!=="/"){let D=_.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=Sv(t,{pathname:N});rn(b||R!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),rn(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=DS(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:Un([_,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?_:Un([_,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),u,i,r,o);return e&&T?M.createElement(oo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},T):T}function NS(){let t=LS(),e=bS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),i?M.createElement("pre",{style:o},i):null,u)}var RS=M.createElement(NS,null),MS=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(hn.Provider,{value:this.props.routeContext},M.createElement(Ad.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IS({routeContext:t,match:e,children:i}){let r=M.useContext(Ys);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(hn.Provider,{value:t},i)}function DS(t,e=[],i=null,r=null,o=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,u=i?.errors;if(u!=null){let _=l.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);Ve(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let f=!1,p=-1;if(i)for(let _=0;_<l.length;_++){let b=l[_];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=_),b.route.id){let{loaderData:x,errors:E}=i,C=b.route.loader&&!x.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||C){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&r?(_,b)=>{r(_,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:b})}:void 0;return l.reduceRight((_,b,x)=>{let E,C=!1,N=null,R=null;i&&(E=u&&b.route.id?u[b.route.id]:void 0,N=b.route.errorElement||RS,f&&(p<0&&x===0?(Dv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,R=null):p===x&&(C=!0,R=b.route.hydrateFallbackElement||null)));let T=e.concat(l.slice(0,x+1)),D=()=>{let A;return E?A=N:C?A=R:b.route.Component?A=M.createElement(b.route.Component,null):b.route.element?A=b.route.element:A=_,M.createElement(IS,{match:b,routeContext:{outlet:_,matches:T,isDataRoute:i!=null},children:A})};return i&&(b.route.ErrorBoundary||b.route.errorElement||x===0)?M.createElement(MS,{location:i.location,revalidation:i.revalidation,component:N,error:E,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):D()},null)}function Nd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kS(t){let e=M.useContext(Ys);return Ve(e,Nd(t)),e}function US(t){let e=M.useContext(il);return Ve(e,Nd(t)),e}function PS(t){let e=M.useContext(hn);return Ve(e,Nd(t)),e}function Rd(t){let e=PS(t),i=e.matches[e.matches.length-1];return Ve(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function OS(){return Rd("useRouteId")}function LS(){let t=M.useContext(Ad),e=US("useRouteError"),i=Rd("useRouteError");return t!==void 0?t:e.errors?.[i]}function qS(){let{router:t}=kS("useNavigate"),e=Rd("useNavigate"),i=M.useRef(!1);return Mv(()=>{i.current=!0}),M.useCallback(async(o,l={})=>{rn(i.current,Rv),i.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...l}))},[t,e])}var yg={};function Dv(t,e,i){!e&&!yg[t]&&(yg[t]=!0,rn(!1,i))}M.memo(BS);function BS({routes:t,future:e,state:i,unstable_onError:r}){return Iv(t,void 0,i,r,e)}function en(t){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jS({basename:t="/",children:e=null,location:i,navigationType:r="POP",navigator:o,static:l=!1}){Ve(!ao(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:u,navigator:o,static:l,future:{}}),[u,o,l]);typeof i=="string"&&(i=Js(i));let{pathname:p="/",search:h="",hash:_="",state:b=null,key:x="default"}=i,E=M.useMemo(()=>{let C=Pn(p,u);return C==null?null:{location:{pathname:C,search:h,hash:_,state:b,key:x},navigationType:r}},[u,p,h,_,b,x,r]);return rn(E!=null,`<Router basename="${u}"> is not able to match the URL "${p}${h}${_}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:M.createElement(fn.Provider,{value:f},M.createElement(oo.Provider,{children:e,value:E}))}function zS({children:t,location:e}){return AS(Zc(t),e)}function Zc(t,e=[]){let i=[];return M.Children.forEach(t,(r,o)=>{if(!M.isValidElement(r))return;let l=[...e,o];if(r.type===M.Fragment){i.push.apply(i,Zc(r.props.children,l));return}Ve(r.type===en,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Zc(r.props.children,l)),i.push(u)}),i}var ja="get",za="application/x-www-form-urlencoded";function sl(t){return t!=null&&typeof t.tagName=="string"}function HS(t){return sl(t)&&t.tagName.toLowerCase()==="button"}function GS(t){return sl(t)&&t.tagName.toLowerCase()==="form"}function VS(t){return sl(t)&&t.tagName.toLowerCase()==="input"}function FS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $S(t,e){return t.button===0&&(!e||e==="_self")&&!FS(t)}var Ra=null;function JS(){if(Ra===null)try{new FormData(document.createElement("form"),0),Ra=!1}catch{Ra=!0}return Ra}var YS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bc(t){return t!=null&&!YS.has(t)?(rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${za}"`),null):t}function KS(t,e){let i,r,o,l,u;if(GS(t)){let f=t.getAttribute("action");r=f?Pn(f,e):null,i=t.getAttribute("method")||ja,o=Bc(t.getAttribute("enctype"))||za,l=new FormData(t)}else if(HS(t)||VS(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(r=p?Pn(p,e):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||ja,o=Bc(t.getAttribute("formenctype"))||Bc(f.getAttribute("enctype"))||za,l=new FormData(f,t),!JS()){let{name:h,type:_,value:b}=t;if(_==="image"){let x=h?`${h}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else h&&l.append(h,b)}}else{if(sl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ja,r=null,o=za,u=t}return l&&o==="text/plain"&&(u=l,l=void 0),{action:r,method:i.toLowerCase(),encType:o,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Md(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QS(t,e,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${i}`:e&&Pn(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function XS(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ZS(t,e,i){let r=await Promise.all(t.map(async o=>{let l=e.routes[o.route.id];if(l){let u=await XS(l,i);return u.links?u.links():[]}return[]}));return iE(r.flat(1).filter(WS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function vg(t,e,i,r,o,l){let u=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,f=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>u(p,h)||f(p,h)):l==="data"?e.filter((p,h)=>{let _=r.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(u(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function eE(t,e,{includeHydrateFallback:i}={}){return tE(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function tE(t){return[...new Set(t)]}function nE(t){let e={},i=Object.keys(t).sort();for(let r of i)e[r]=t[r];return e}function iE(t,e){let i=new Set;return new Set(e),t.reduce((r,o)=>{let l=JSON.stringify(nE(o));return i.has(l)||(i.add(l),r.push({key:l,link:o})),r},[])}function kv(){let t=M.useContext(Ys);return Md(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sE(){let t=M.useContext(il);return Md(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Id=M.createContext(void 0);Id.displayName="FrameworkContext";function Uv(){let t=M.useContext(Id);return Md(t,"You must render this element inside a <HydratedRouter> element"),t}function rE(t,e){let i=M.useContext(Id),[r,o]=M.useState(!1),[l,u]=M.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:_,onTouchStart:b}=e,x=M.useRef(null);M.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let N=T=>{T.forEach(D=>{u(D.isIntersecting)})},R=new IntersectionObserver(N,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[t]),M.useEffect(()=>{if(r){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[r]);let E=()=>{o(!0)},C=()=>{o(!1),u(!1)};return i?t!=="intent"?[l,x,{}]:[l,x,{onFocus:Kr(f,E),onBlur:Kr(p,C),onMouseEnter:Kr(h,E),onMouseLeave:Kr(_,C),onTouchStart:Kr(b,E)}]:[!1,x,{}]}function Kr(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function oE({page:t,...e}){let{router:i}=kv(),r=M.useMemo(()=>Sv(i.routes,t,i.basename),[i.routes,t,i.basename]);return r?M.createElement(lE,{page:t,matches:r,...e}):null}function aE(t){let{manifest:e,routeModules:i}=Uv(),[r,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return ZS(t,e,i).then(u=>{l||o(u)}),()=>{l=!0}},[t,e,i]),r}function lE({page:t,matches:e,...i}){let r=Qt(),{manifest:o,routeModules:l}=Uv(),{basename:u}=kv(),{loaderData:f,matches:p}=sE(),h=M.useMemo(()=>vg(t,e,p,o,r,"data"),[t,e,p,o,r]),_=M.useMemo(()=>vg(t,e,p,o,r,"assets"),[t,e,p,o,r]),b=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,N=!1;if(e.forEach(T=>{let D=o.routes[T.route.id];!D||!D.hasLoader||(!h.some(A=>A.route.id===T.route.id)&&T.route.id in f&&l[T.route.id]?.shouldRevalidate||D.hasClientLoader?N=!0:C.add(T.route.id))}),C.size===0)return[];let R=QS(t,u,"data");return N&&C.size>0&&R.searchParams.set("_routes",e.filter(T=>C.has(T.route.id)).map(T=>T.route.id).join(",")),[R.pathname+R.search]},[u,f,r,o,h,e,t,l]),x=M.useMemo(()=>eE(_,o),[_,o]),E=aE(_);return M.createElement(M.Fragment,null,b.map(C=>M.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...i})),x.map(C=>M.createElement("link",{key:C,rel:"modulepreload",href:C,...i})),E.map(({key:C,link:N})=>M.createElement("link",{key:C,nonce:i.nonce,...N})))}function uE(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var Pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pv&&(window.__reactRouterVersion="7.9.6")}catch{}function cE({basename:t,children:e,window:i}){let r=M.useRef();r.current==null&&(r.current=Qx({window:i,v5Compat:!0}));let o=r.current,[l,u]=M.useState({action:o.action,location:o.location}),f=M.useCallback(p=>{M.startTransition(()=>u(p))},[u]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.createElement(jS,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o})}var Ov=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lv=M.forwardRef(function({onClick:e,discover:i="render",prefetch:r="none",relative:o,reloadDocument:l,replace:u,state:f,target:p,to:h,preventScrollReset:_,viewTransition:b,...x},E){let{basename:C}=M.useContext(fn),N=typeof h=="string"&&Ov.test(h),R,T=!1;if(typeof h=="string"&&N&&(R=h,Pv))try{let V=new URL(window.location.href),re=h.startsWith("//")?new URL(V.protocol+h):new URL(h),pe=Pn(re.pathname,C);re.origin===V.origin&&pe!=null?h=pe+re.search+re.hash:T=!0}catch{rn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=wS(h,{relative:o}),[A,j,K]=rE(r,x),Q=pE(h,{replace:u,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:b});function Y(V){e&&e(V),V.defaultPrevented||Q(V)}let G=M.createElement("a",{...x,...K,href:R||D,onClick:T||l?e:Y,ref:uE(E,j),target:p,"data-discover":!N&&i==="render"?"true":void 0});return A&&!N?M.createElement(M.Fragment,null,G,M.createElement(oE,{page:D})):G});Lv.displayName="Link";var dE=M.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:r="",end:o=!1,style:l,to:u,viewTransition:f,children:p,...h},_){let b=lo(u,{relative:h.relative}),x=Qt(),E=M.useContext(il),{navigator:C,basename:N}=M.useContext(fn),R=E!=null&&_E(b)&&f===!0,T=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,D=x.pathname,A=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(D=D.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&N&&(A=Pn(A,N)||A);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let K=D===T||!o&&D.startsWith(T)&&D.charAt(j)==="/",Q=A!=null&&(A===T||!o&&A.startsWith(T)&&A.charAt(T.length)==="/"),Y={isActive:K,isPending:Q,isTransitioning:R},G=K?e:void 0,V;typeof r=="function"?V=r(Y):V=[r,K?"active":null,Q?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let re=typeof l=="function"?l(Y):l;return M.createElement(Lv,{...h,"aria-current":G,className:V,ref:_,style:re,to:u,viewTransition:f},typeof p=="function"?p(Y):p)});dE.displayName="NavLink";var fE=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:r,replace:o,state:l,method:u=ja,action:f,onSubmit:p,relative:h,preventScrollReset:_,viewTransition:b,...x},E)=>{let C=yE(),N=vE(f,{relative:h}),R=u.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&Ov.test(f),D=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let j=A.nativeEvent.submitter,K=j?.getAttribute("formmethod")||u;C(j||A.currentTarget,{fetcherKey:e,method:K,navigate:i,replace:o,state:l,relative:h,preventScrollReset:_,viewTransition:b})};return M.createElement("form",{ref:E,method:R,action:N,onSubmit:r?p:D,...x,"data-discover":!T&&t==="render"?"true":void 0})});fE.displayName="Form";function hE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qv(t){let e=M.useContext(Ys);return Ve(e,hE(t)),e}function pE(t,{target:e,replace:i,state:r,preventScrollReset:o,relative:l,viewTransition:u}={}){let f=on(),p=Qt(),h=lo(t,{relative:l});return M.useCallback(_=>{if($S(_,e)){_.preventDefault();let b=i!==void 0?i:to(p)===to(h);f(t,{replace:b,state:r,preventScrollReset:o,relative:l,viewTransition:u})}},[p,f,h,i,r,e,t,o,l,u])}var mE=0,gE=()=>`__${String(++mE)}__`;function yE(){let{router:t}=qv("useSubmit"),{basename:e}=M.useContext(fn),i=OS();return M.useCallback(async(r,o={})=>{let{action:l,method:u,encType:f,formData:p,body:h}=KS(r,e);if(o.navigate===!1){let _=o.fetcherKey||gE();await t.fetch(_,i,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:h,formMethod:o.method||u,formEncType:o.encType||f,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:h,formMethod:o.method||u,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,i])}function vE(t,{relative:e}={}){let{basename:i}=M.useContext(fn),r=M.useContext(hn);Ve(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...lo(t||".",{relative:e})},u=Qt();if(t==null){l.search=u.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(_=>_==="")){f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let _=f.toString();l.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Un([i,l.pathname])),to(l)}function _E(t,{relative:e}={}){let i=M.useContext(Nv);Ve(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qv("useViewTransitionState"),o=lo(t,{relative:e});if(!i.isTransitioning)return!1;let l=Pn(i.currentLocation.pathname,r)||i.currentLocation.pathname,u=Pn(i.nextLocation.pathname,r)||i.nextLocation.pathname;return Fa(o.pathname,u)!=null||Fa(o.pathname,l)!=null}var ed=function(t,e){return ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])},ed(t,e)};function Bv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ed(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var $a=function(){return $a=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},$a.apply(this,arguments)};function Ks(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(i[r[o]]=t[r[o]]);return i}function jv(t,e,i,r){var o=arguments.length,l=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,i,r);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(l=(o<3?u(l):o>3?u(e,i,l):u(e,i))||l);return o>3&&l&&Object.defineProperty(e,i,l),l}function zv(t,e){return function(i,r){e(i,r,t)}}function Hv(t,e,i,r,o,l){function u(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var f=r.kind,p=f==="getter"?"get":f==="setter"?"set":"value",h=!e&&t?r.static?t:t.prototype:null,_=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),b,x=!1,E=i.length-1;E>=0;E--){var C={};for(var N in r)C[N]=N==="access"?{}:r[N];for(var N in r.access)C.access[N]=r.access[N];C.addInitializer=function(T){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(T||null))};var R=(0,i[E])(f==="accessor"?{get:_.get,set:_.set}:_[p],C);if(f==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(b=u(R.get))&&(_.get=b),(b=u(R.set))&&(_.set=b),(b=u(R.init))&&o.unshift(b)}else(b=u(R))&&(f==="field"?o.unshift(b):_[p]=b)}h&&Object.defineProperty(h,r.name,_),x=!0}function Gv(t,e,i){for(var r=arguments.length>2,o=0;o<e.length;o++)i=r?e[o].call(t,i):e[o].call(t);return r?i:void 0}function Vv(t){return typeof t=="symbol"?t:"".concat(t)}function Fv(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function $v(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function te(t,e,i,r){function o(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(_){try{h(r.next(_))}catch(b){u(b)}}function p(_){try{h(r.throw(_))}catch(b){u(b)}}function h(_){_.done?l(_.value):o(_.value).then(f,p)}h((r=r.apply(t,e||[])).next())})}function Jv(t,e){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(_){return p([h,_])}}function p(h){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(i=0)),i;)try{if(r=1,o&&(l=h[0]&2?o.return:h[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,h[1])).done)return l;switch(o=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,o=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=e.call(t,i)}catch(_){h=[6,_],o=0}finally{r=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var rl=Object.create?(function(t,e,i,r){r===void 0&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}):(function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]});function Yv(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&rl(e,t,i)}function Ja(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dd(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(u)throw u.error}}return l}function Kv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Dd(arguments[e]));return t}function Qv(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<i;e++)for(var l=arguments[e],u=0,f=l.length;u<f;u++,o++)r[o]=l[u];return r}function Xv(t,e,i){if(i||arguments.length===2)for(var r=0,o=e.length,l;r<o;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}function $s(t){return this instanceof $s?(this.v=t,this):new $s(t)}function Wv(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(E){return function(C){return Promise.resolve(C).then(E,b)}}function f(E,C){r[E]&&(o[E]=function(N){return new Promise(function(R,T){l.push([E,N,R,T])>1||p(E,N)})},C&&(o[E]=C(o[E])))}function p(E,C){try{h(r[E](C))}catch(N){x(l[0][3],N)}}function h(E){E.value instanceof $s?Promise.resolve(E.value.v).then(_,b):x(l[0][2],E)}function _(E){p("next",E)}function b(E){p("throw",E)}function x(E,C){E(C),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Zv(t){var e,i;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,l){e[o]=t[o]?function(u){return(i=!i)?{value:$s(t[o](u)),done:!1}:l?l(u):u}:l}}function e0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Ja=="function"?Ja(t):t[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=t[l]&&function(u){return new Promise(function(f,p){u=t[l](u),o(f,p,u.done,u.value)})}}function o(l,u,f,p){Promise.resolve(p).then(function(h){l({value:h,done:f})},u)}}function t0(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var bE=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},td=function(t){return td=Object.getOwnPropertyNames||function(e){var i=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[i.length]=r);return i},td(t)};function n0(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=td(t),r=0;r<i.length;r++)i[r]!=="default"&&rl(e,t,i[r]);return bE(e,t),e}function i0(t){return t&&t.__esModule?t:{default:t}}function s0(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)}function r0(t,e,i,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,i):o?o.value=i:e.set(t,i),i}function o0(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function a0(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,o;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var xE=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function l0(t){function e(l){t.error=t.hasError?new xE(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var i,r=0;function o(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(o);if(i.dispose){var l=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else r|=1}catch(u){e(u)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function u0(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,r,o,l,u){return r?e?".jsx":".js":o&&(!l||!u)?i:o+l+"."+u.toLowerCase()+"js"}):t}const SE={__extends:Bv,__assign:$a,__rest:Ks,__decorate:jv,__param:zv,__esDecorate:Hv,__runInitializers:Gv,__propKey:Vv,__setFunctionName:Fv,__metadata:$v,__awaiter:te,__generator:Jv,__createBinding:rl,__exportStar:Yv,__values:Ja,__read:Dd,__spread:Kv,__spreadArrays:Qv,__spreadArray:Xv,__await:$s,__asyncGenerator:Wv,__asyncDelegator:Zv,__asyncValues:e0,__makeTemplateObject:t0,__importStar:n0,__importDefault:i0,__classPrivateFieldGet:s0,__classPrivateFieldSet:r0,__classPrivateFieldIn:o0,__addDisposableResource:a0,__disposeResources:l0,__rewriteRelativeImportExtension:u0},EE=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:a0,get __assign(){return $a},__asyncDelegator:Zv,__asyncGenerator:Wv,__asyncValues:e0,__await:$s,__awaiter:te,__classPrivateFieldGet:s0,__classPrivateFieldIn:o0,__classPrivateFieldSet:r0,__createBinding:rl,__decorate:jv,__disposeResources:l0,__esDecorate:Hv,__exportStar:Yv,__extends:Bv,__generator:Jv,__importDefault:i0,__importStar:n0,__makeTemplateObject:t0,__metadata:$v,__param:zv,__propKey:Vv,__read:Dd,__rest:Ks,__rewriteRelativeImportExtension:u0,__runInitializers:Gv,__setFunctionName:Fv,__spread:Kv,__spreadArray:Xv,__spreadArrays:Qv,__values:Ja,default:SE},Symbol.toStringTag,{value:"Module"})),wE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class kd extends Error{constructor(e,i="FunctionsError",r){super(e),this.name=i,this.context=r}}class TE extends kd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _g extends kd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bg extends kd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var nd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(nd||(nd={}));class CE{constructor(e,{headers:i={},customFetch:r,region:o=nd.Any}={}){this.url=e,this.headers=i,this.region=o,this.fetch=wE(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return te(this,arguments,void 0,function*(i,r={}){var o;let l,u;try{const{headers:f,method:p,body:h,signal:_,timeout:b}=r;let x={},{region:E}=r;E||(E=this.region);const C=new URL(`${this.url}/${i}`);E&&E!=="any"&&(x["x-region"]=E,C.searchParams.set("forceFunctionRegion",E));let N;h&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",N=h):typeof h=="string"?(x["Content-Type"]="text/plain",N=h):typeof FormData<"u"&&h instanceof FormData?N=h:(x["Content-Type"]="application/json",N=JSON.stringify(h)):N=h;let R=_;b&&(u=new AbortController,l=setTimeout(()=>u.abort(),b),_?(R=u.signal,_.addEventListener("abort",()=>u.abort())):R=u.signal);const T=yield this.fetch(C.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:N,signal:R}).catch(K=>{throw new TE(K)}),D=T.headers.get("x-relay-error");if(D&&D==="true")throw new _g(T);if(!T.ok)throw new bg(T);let A=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),j;return A==="application/json"?j=yield T.json():A==="application/octet-stream"||A==="application/pdf"?j=yield T.blob():A==="text/event-stream"?j=T:A==="multipart/form-data"?j=yield T.formData():j=yield T.text(),{data:j,error:null,response:T}}catch(f){return{data:null,error:f,response:f instanceof bg||f instanceof _g?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var ht={};const Qs=Bx(EE);var Ma={},Ia={},Da={},ka={},Ua={},Pa={},xg;function c0(){if(xg)return Pa;xg=1,Object.defineProperty(Pa,"__esModule",{value:!0});class t extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Pa.default=t,Pa}var Sg;function d0(){if(Sg)return Ua;Sg=1,Object.defineProperty(Ua,"__esModule",{value:!0});const e=Qs.__importDefault(c0());class i{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var h,_,b,x;let E=null,C=null,N=null,R=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const K=await p.text();K===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?C=K:C=JSON.parse(K))}const A=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),j=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");A&&j&&j.length>1&&(N=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,N=null,R=406,T="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const A=await p.text();try{E=JSON.parse(A),Array.isArray(E)&&p.status===404&&(C=[],E=null,R=200,T="OK")}catch{p.status===404&&A===""?(R=204,T="No Content"):E={message:A}}if(E&&this.isMaybeSingle&&(!((x=E?.details)===null||x===void 0)&&x.includes("0 rows"))&&(E=null,R=200,T="OK"),E&&this.shouldThrowOnError)throw new e.default(E)}return{error:E,data:C,count:N,status:R,statusText:T}});return this.shouldThrowOnError||(f=f.catch(p=>{var h,_,b,x,E,C;let N="";const R=p?.cause;if(R){const T=(h=R?.message)!==null&&h!==void 0?h:"",D=(_=R?.code)!==null&&_!==void 0?_:"";N=`${(b=p?.name)!==null&&b!==void 0?b:"FetchError"}: ${p?.message}`,N+=`

Caused by: ${(x=R?.name)!==null&&x!==void 0?x:"Error"}: ${T}`,D&&(N+=` (${D})`),R?.stack&&(N+=`
${R.stack}`)}else N=(E=p?.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(C=p?.name)!==null&&C!==void 0?C:"FetchError"}: ${p?.message}`,details:N,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}}return Ua.default=i,Ua}var Eg;function f0(){if(Eg)return ka;Eg=1,Object.defineProperty(ka,"__esModule",{value:!0});const e=Qs.__importDefault(d0());class i extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:p=f}={}){const h=p?`${p}.order`:"order",_=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${_?`${_},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"offset":`${f}.offset`,h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(h,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:p=!1,format:h="text"}={}){var _;const b=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),x=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${x}"; options=${b};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ka.default=i,ka}var wg;function Ud(){if(wg)return Da;wg=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Qs.__importDefault(f0()),i=new RegExp("[,()]");class r extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&i.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:p}={}){let h="";p==="plain"?h="pl":p==="phrase"?h="ph":p==="websearch"&&(h="w");const _=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${h}fts${_}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}}return Da.default=r,Da}var Tg;function h0(){if(Tg)return Ia;Tg=1,Object.defineProperty(Ia,"__esModule",{value:!0});const e=Qs.__importDefault(Ud());class i{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},p=u?"HEAD":"GET";let h=!1;const _=(o??"*").split("").map(b=>/\s/.test(b)&&!h?"":(b==='"'&&(h=!h),b)).join("");return this.url.searchParams.set("select",_),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const h=o.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(h.length>0){const _=[...new Set(h)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:p=!0}={}){var h;const _="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((x,E)=>x.concat(Object.keys(E)),[]);if(b.length>0){const x=[...new Set(b)].map(E=>`"${E}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Ia.default=i,Ia}var Cg;function AE(){if(Cg)return Ma;Cg=1,Object.defineProperty(Ma,"__esModule",{value:!0});const t=Qs,e=t.__importDefault(h0()),i=t.__importDefault(Ud());class r{constructor(l,{headers:u={},schema:f,fetch:p}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=p}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:p=!1,count:h}={}){var _;let b;const x=new URL(`${this.url}/rpc/${l}`);let E;f||p?(b=f?"HEAD":"GET",Object.entries(u).filter(([N,R])=>R!==void 0).map(([N,R])=>[N,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([N,R])=>{x.searchParams.append(N,R)})):(b="POST",E=u);const C=new Headers(this.headers);return h&&C.set("Prefer",`count=${h}`),new i.default({method:b,url:x,headers:C,schema:this.schemaName,body:E,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return Ma.default=r,Ma}var Ag;function NE(){if(Ag)return ht;Ag=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.PostgrestError=ht.PostgrestBuilder=ht.PostgrestTransformBuilder=ht.PostgrestFilterBuilder=ht.PostgrestQueryBuilder=ht.PostgrestClient=void 0;const t=Qs,e=t.__importDefault(AE());ht.PostgrestClient=e.default;const i=t.__importDefault(h0());ht.PostgrestQueryBuilder=i.default;const r=t.__importDefault(Ud());ht.PostgrestFilterBuilder=r.default;const o=t.__importDefault(f0());ht.PostgrestTransformBuilder=o.default;const l=t.__importDefault(d0());ht.PostgrestBuilder=l.default;const u=t.__importDefault(c0());return ht.PostgrestError=u.default,ht.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},ht}var p0=NE();const m0=qx(p0),RE=Lx({__proto__:null,default:m0},[p0]),{PostgrestClient:ME,PostgrestQueryBuilder:HI,PostgrestFilterBuilder:GI,PostgrestTransformBuilder:VI,PostgrestBuilder:FI,PostgrestError:$I}=m0||RE;class IE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const r=i.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const r=this.getWebSocketConstructor();return new r(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DE="2.86.0",kE=`realtime-js/${DE}`,g0="1.0.0",UE="2.0.0",Ng=g0,id=1e4,PE=1e3,OE=100;var ji;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ji||(ji={}));var it;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(it||(it={}));var sn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(sn||(sn={}));var sd;(function(t){t.websocket="websocket"})(sd||(sd={}));var zi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zi||(zi={}));class LE{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,r;const o=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var i,r;const o=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,i,r){var o,l;const u=e.topic,f=(o=e.ref)!==null&&o!==void 0?o:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",h=e.payload.event,_=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(_).length===0?"":JSON.stringify(_);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+u.length+h.length+b.length,E=new ArrayBuffer(this.HEADER_LENGTH+x);let C=new DataView(E),N=0;C.setUint8(N++,this.KINDS.userBroadcastPush),C.setUint8(N++,p.length),C.setUint8(N++,f.length),C.setUint8(N++,u.length),C.setUint8(N++,h.length),C.setUint8(N++,b.length),C.setUint8(N++,i),Array.from(p,T=>C.setUint8(N++,T.charCodeAt(0))),Array.from(f,T=>C.setUint8(N++,T.charCodeAt(0))),Array.from(u,T=>C.setUint8(N++,T.charCodeAt(0))),Array.from(h,T=>C.setUint8(N++,T.charCodeAt(0))),Array.from(b,T=>C.setUint8(N++,T.charCodeAt(0)));var R=new Uint8Array(E.byteLength+r.byteLength);return R.set(new Uint8Array(E),0),R.set(new Uint8Array(r),E.byteLength),R.buffer}decode(e,i){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return i(r)}if(typeof e=="string"){const r=JSON.parse(e),[o,l,u,f,p]=r;return i({join_ref:o,ref:l,topic:u,event:f,payload:p})}return i({})}_binaryDecode(e){const i=new DataView(e),r=i.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,o)}}_decodeUserBroadcast(e,i,r){const o=i.getUint8(1),l=i.getUint8(2),u=i.getUint8(3),f=i.getUint8(4);let p=this.HEADER_LENGTH+4;const h=r.decode(e.slice(p,p+o));p=p+o;const _=r.decode(e.slice(p,p+l));p=p+l;const b=r.decode(e.slice(p,p+u));p=p+u;const x=e.slice(p,e.byteLength),E=f===this.JSON_ENCODING?JSON.parse(r.decode(x)):x,C={type:this.BROADCAST_EVENT,event:_,payload:E};return u>0&&(C.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>i.includes(r)))}}class y0{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Le||(Le={}));const Rg=(t,e,i={})=>{var r;const o=(r=i.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=qE(u,t,e,o),l),{}):{}},qE=(t,e,i,r)=>{const o=e.find(f=>f.name===t),l=o?.type,u=i[t];return l&&!r.includes(l)?v0(l,u):rd(u)},v0=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return HE(e,i)}switch(t){case Le.bool:return BE(e);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return jE(e);case Le.json:case Le.jsonb:return zE(e);case Le.timestamp:return GE(e);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return rd(e);default:return rd(e)}},rd=t=>t,BE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},jE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},HE=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,r=t[i];if(t[0]==="{"&&r==="}"){let l;const u=t.slice(1,i);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>v0(e,f))}return t},GE=t=>typeof t=="string"?t.replace(" ","T"):t,_0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class jc{constructor(e,i,r={},o=id){this.channel=e,this.event=i,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var r;return this._hasReceived(e)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Mg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Mg||(Mg={}));class Wr{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wr.syncState(this.state,o,l,u),this.pendingDiffs.forEach(p=>{this.state=Wr.syncDiff(this.state,p,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(r.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Wr.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,r,o){const l=this.cloneDeep(e),u=this.transformState(i),f={},p={};return this.map(l,(h,_)=>{u[h]||(p[h]=_)}),this.map(u,(h,_)=>{const b=l[h];if(b){const x=_.map(R=>R.presence_ref),E=b.map(R=>R.presence_ref),C=_.filter(R=>E.indexOf(R.presence_ref)<0),N=b.filter(R=>x.indexOf(R.presence_ref)<0);C.length>0&&(f[h]=C),N.length>0&&(p[h]=N)}else f[h]=_}),this.syncDiff(l,{joins:f,leaves:p},r,o)}static syncDiff(e,i,r,o){const{joins:l,leaves:u}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(l,(f,p)=>{var h;const _=(h=e[f])!==null&&h!==void 0?h:[];if(e[f]=this.cloneDeep(p),_.length>0){const b=e[f].map(E=>E.presence_ref),x=_.filter(E=>b.indexOf(E.presence_ref)<0);e[f].unshift(...x)}r(f,_,p)}),this.map(u,(f,p)=>{let h=e[f];if(!h)return;const _=p.map(b=>b.presence_ref);h=h.filter(b=>_.indexOf(b.presence_ref)<0),e[f]=h,o(f,h,p),h.length===0&&delete e[f]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(r=>i(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,r)=>{const o=e[r];return"metas"in o?i[r]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[r]=o,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ig;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ig||(Ig={}));var Zr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Zr||(Zr={}));var Dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Pd{constructor(e,i={config:{}},r){var o,l;if(this.topic=e,this.params=i,this.socket=r,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new jc(this,sn.join,this.params,this.timeout),this.rejoinTimer=new y0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new Wr(this),this.broadcastEndpointURL=_0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var r,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==it.closed){const{config:{broadcast:u,presence:f,private:p}}=this.params,h=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&o!==void 0?o:[],_=!!this.bindings[Zr.PRESENCE]&&this.bindings[Zr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:_}),postgres_changes:h,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(E=>e?.(Dn.CHANNEL_ERROR,E)),this._onClose(()=>e?.(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:E})=>{var C;if(this.socket.setAuth(),E===void 0){e?.(Dn.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,R=(C=N?.length)!==null&&C!==void 0?C:0,T=[];for(let D=0;D<R;D++){const A=N[D],{filter:{event:j,schema:K,table:Q,filter:Y}}=A,G=E&&E[D];if(G&&G.event===j&&G.schema===K&&G.table===Q&&G.filter===Y)T.push(Object.assign(Object.assign({},A),{id:G.id}));else{this.unsubscribe(),this.state=it.errored,e?.(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Dn.SUBSCRIBED);return}}).receive("error",E=>{this.state=it.errored,e?.(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e?.(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,r){return this.state===it.joined&&e===Zr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,r)}async httpSend(e,i,r={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const h=await f.json();p=h.error||h.message||p}catch{}return Promise.reject(new Error(p))}async send(e,i={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,p;const h=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=it.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new jc(this,sn.leave,{},e),r.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=it.closed,this.bindings={}}async _fetchWithTimeout(e,i,r){const o=new AbortController,l=setTimeout(()=>o.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(l),u}_push(e,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new jc(this,e,i,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>OE){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,r){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,r){var o,l;const u=e.toLocaleLowerCase(),{close:f,error:p,leave:h,join:_}=sn;if(r&&[f,p,h,_].indexOf(u)>=0&&r!==this._joinRef())return;let x=this._onMessage(u,i,r);if(i&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(E=>{var C,N,R;return((C=E.filter)===null||C===void 0?void 0:C.event)==="*"||((R=(N=E.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===u}).map(E=>E.callback(x,r)):(l=this.bindings[u])===null||l===void 0||l.filter(E=>{var C,N,R,T,D,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in E){const j=E.id,K=(C=E.filter)===null||C===void 0?void 0:C.event;return j&&((N=i.ids)===null||N===void 0?void 0:N.includes(j))&&(K==="*"||K?.toLocaleLowerCase()===((R=i.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const j=(D=(T=E?.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return j==="*"||j===((A=i?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===u}).map(E=>{if(typeof x=="object"&&"ids"in x){const C=x.data,{schema:N,table:R,commit_timestamp:T,type:D,errors:A}=C;x=Object.assign(Object.assign({},{schema:N,table:R,commit_timestamp:T,eventType:D,new:{},old:{},errors:A}),this._getPayloadRecords(C))}E.callback(x,r)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,r){const o=e.toLocaleLowerCase(),l={type:o,filter:i,callback:r};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,i){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&Pd.isEqual(o.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const r in e)if(e[r]!==i[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(sn.close,{},e)}_onError(e){this._on(sn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Rg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Rg(e.columns,e.old_record)),i}}const zc=()=>{},Oa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VE=[1e3,2e3,5e3,1e4],FE=1e4,$E=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JE{constructor(e,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=id,this.transport=null,this.heartbeatIntervalMs=Oa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zc,this.ref=0,this.reconnectTimer=null,this.vsn=Ng,this.logger=zc,this.conn=null,this.sendBuffer=[],this.serializer=new LE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((r=i?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${sd.websocket}`,this.httpEndpoint=_0(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=IE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,r){this.logger(e,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ji.connecting:return zi.Connecting;case ji.open:return zi.Open;case ji.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===r);if(o)return o;{const l=new Pd(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:r,payload:o,ref:l}=e,u=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${i} ${r} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(PE,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Oa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:l,ref:u}=i,f=u?`(${u})`:"",p=l.status||"";this.log("receive",`${p} ${r} ${o} ${f}`.trim(),l),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(o,l,u)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ji.open||this.conn.readyState===ji.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(sn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${e}${r}${o}`}_workerObjectUrl(e){let i;if(e)i=e;else{const r=new Blob([$E],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const o={access_token:i,version:kE};i&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(sn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(i)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new y0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,r,o,l,u,f,p,h,_,b,x,E;switch(this.transport=(i=e?.transport)!==null&&i!==void 0?i:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:id,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Oa.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e?.heartbeatCallback)!==null&&f!==void 0?f:zc,this.vsn=(p=e?.vsn)!==null&&p!==void 0?p:Ng,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(C=>VE[C-1]||FE),this.vsn){case g0:this.encode=(_=e?.encode)!==null&&_!==void 0?_:((C,N)=>N(JSON.stringify(C))),this.decode=(b=e?.decode)!==null&&b!==void 0?b:((C,N)=>N(JSON.parse(C)));break;case UE:this.encode=(x=e?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(E=e?.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class ol extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class YE extends ol{constructor(e,i,r){super(e),this.name="StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class od extends ol{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const Od=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),KE=()=>Response,ad=t=>{if(Array.isArray(t))return t.map(i=>ad(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,r])=>{const o=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=ad(r)}),e},QE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},XE=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Hc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},WE=(t,e,i)=>te(void 0,void 0,void 0,function*(){const r=yield KE();t instanceof r&&!i?.noResolveJson?t.json().then(o=>{const l=t.status||500,u=o?.statusCode||l+"";e(new YE(Hc(o),l,u))}).catch(o=>{e(new od(Hc(o),o))}):e(new od(Hc(t),t))}),ZE=(t,e,i,r)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||!r?o:(QE(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),i))};function uo(t,e,i,r,o,l){return te(this,void 0,void 0,function*(){return new Promise((u,f)=>{t(i,ZE(e,r,o,l)).then(p=>{if(!p.ok)throw p;return r?.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>WE(p,f,r))})})}function no(t,e,i,r){return te(this,void 0,void 0,function*(){return uo(t,"GET",e,i,r)})}function nn(t,e,i,r,o){return te(this,void 0,void 0,function*(){return uo(t,"POST",e,r,o,i)})}function ld(t,e,i,r,o){return te(this,void 0,void 0,function*(){return uo(t,"PUT",e,r,o,i)})}function ew(t,e,i,r){return te(this,void 0,void 0,function*(){return uo(t,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),r)})}function Ld(t,e,i,r,o){return te(this,void 0,void 0,function*(){return uo(t,"DELETE",e,r,o,i)})}class tw{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}})}}var b0;class nw{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[b0]="BlobDownloadBuilder",this.promise=null}asStream(){return new tw(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}})}}b0=Symbol.toStringTag;const iw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sw{constructor(e,i={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=r,this.fetch=Od(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,r,o){return te(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Dg),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const h=this._removeEmptyFolders(i),_=this._getFinalPath(h),b=yield(e=="PUT"?ld:nn)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:h,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ge(l))return{data:null,error:l};throw l}})}upload(e,i,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,r)})}uploadToSignedUrl(e,i,r,o){return te(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",i);try{let p;const h=Object.assign({upsert:Dg.upsert},o),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(p=new FormData,p.append("cacheControl",h.cacheControl),p.append("",r)):typeof FormData<"u"&&r instanceof FormData?(p=r,p.append("cacheControl",h.cacheControl)):(p=r,_["cache-control"]=`max-age=${h.cacheControl}`,_["content-type"]=h.contentType);const b=yield ld(this.fetch,f.toString(),p,{headers:_});return{data:{path:l,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ge(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,i){return te(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);i?.upsert&&(o["x-upsert"]="true");const l=yield nn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new ol("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:f},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}update(e,i,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,r)})}move(e,i,r){return te(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}copy(e,i,r){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}createSignedUrl(e,i,r){return te(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield nn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:i},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}createSignedUrls(e,i,r){return te(this,void 0,void 0,function*(){try{const o=yield nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}download(e,i){const o=typeof i?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(i?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(e),p=()=>no(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new nw(p,this.shouldThrowOnError)}info(e){return te(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const r=yield no(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:ad(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}exists(e){return te(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield ew(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r)&&r instanceof od){const o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,i){const r=this._getFinalPath(e),o=[],l=i?.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&o.push(l);const f=typeof i?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(i?.transform||{});p!==""&&o.push(p);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${r}${h}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}list(e,i,r){return te(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},iw),i),{prefix:e||""});return{data:yield nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}listV2(e,i){return te(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const x0="2.86.0",S0={"X-Client-Info":`storage-js/${x0}`};class rw{constructor(e,i={},r,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),i),this.fetch=Od(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return te(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield no(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}createBucket(e){return te(this,arguments,void 0,function*(i,r={public:!1}){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ge(o))return{data:null,error:o};throw o}})}updateBucket(e,i){return te(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}})}emptyBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}var io=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ow(t,e,i){const r=new URL(e,t);if(i)for(const[o,l]of Object.entries(i))l!==void 0&&r.searchParams.set(o,l);return r.toString()}async function aw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function lw(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:o,body:l,headers:u}){const f=ow(t.baseUrl,r,o),p=await aw(t.auth),h=await e(f,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...p,...u},body:l?JSON.stringify(l):void 0}),_=await h.text(),b=(h.headers.get("content-type")||"").includes("application/json"),x=b&&_?JSON.parse(_):_;if(!h.ok){const E=b?x:void 0,C=E?.error;throw new io(C?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:C?.type,icebergCode:C?.code,details:E})}return{status:h.status,headers:h.headers,data:x}}}}function La(t){return t.join("")}var uw=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:La(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${La(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${La(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${La(t.namespace)}`}),!0}catch(e){if(e instanceof io&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof io&&i.status===409)return;throw i}}};function Ms(t){return t.join("")}var cw=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ms(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof io&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof io&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},dw=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=lw({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new uw(this.client,e),this.tableOps=new cw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class fw{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),i),this.fetch=Od(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}listBuckets(e){return te(this,void 0,void 0,function*(){try{const i=new URLSearchParams;e?.limit!==void 0&&i.set("limit",e.limit.toString()),e?.offset!==void 0&&i.set("offset",e.offset.toString()),e?.sortColumn&&i.set("sortColumn",e.sortColumn),e?.sortOrder&&i.set("sortOrder",e.sortOrder),e?.search&&i.set("search",e.search);const r=i.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield no(this.fetch,o,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}from(e){if(!XE(e))throw new ol("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new dw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>te(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const qd={"X-Client-Info":`storage-js/${x0}`,"Content-Type":"application/json"};class E0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Lt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Gc extends E0{constructor(e,i,r){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hw extends E0{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var kg;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(kg||(kg={}));const Bd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ug=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mw=(t,e,i)=>te(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!i?.noResolveJson){const o=t.status||500,l=t;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";e(new Gc(Ug(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;e(new Gc(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;e(new Gc(f,o,u))}}else e(new hw(Ug(t),t))}),gw=(t,e,i,r)=>{const o={method:t,headers:e?.headers||{}};return r?(pw(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),i)):o};function yw(t,e,i,r,o,l){return te(this,void 0,void 0,function*(){return new Promise((u,f)=>{t(i,gw(e,r,o,l)).then(p=>{if(!p.ok)throw p;if(r?.noResolveJson)return p;const h=p.headers.get("content-type");return!h||!h.includes("application/json")?{}:p.json()}).then(p=>u(p)).catch(p=>mw(p,f,r))})})}function qt(t,e,i,r,o){return te(this,void 0,void 0,function*(){return yw(t,"POST",e,r,o,i)})}class vw{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qd),i),this.fetch=Bd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return te(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}getIndex(e,i){return te(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}listIndexes(e){return te(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return te(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}}class _w{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qd),i),this.fetch=Bd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}getVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}listVectors(e){return te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield qt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}queryVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}deleteVectors(e){return te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}}class bw{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qd),i),this.fetch=Bd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}listBuckets(){return te(this,arguments,void 0,function*(e={}){try{return{data:yield qt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}}class xw extends bw{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new Sw(this.url,this.headers,e,this.fetch)}createBucket(e){const i=Object.create(null,{createBucket:{get:()=>super.createBucket}});return te(this,void 0,void 0,function*(){return i.createBucket.call(this,e)})}getBucket(e){const i=Object.create(null,{getBucket:{get:()=>super.getBucket}});return te(this,void 0,void 0,function*(){return i.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return te(this,arguments,void 0,function*(i={}){return e.listBuckets.call(this,i)})}deleteBucket(e){const i=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return te(this,void 0,void 0,function*(){return i.deleteBucket.call(this,e)})}}class Sw extends vw{constructor(e,i,r,o){super(e,i,o),this.vectorBucketName=r}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return te(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return te(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return te(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return te(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Ew(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Ew extends _w{constructor(e,i,r,o,l){super(e,i,l),this.vectorBucketName=r,this.indexName=o}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return te(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return te(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return te(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return te(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return te(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ww extends rw{constructor(e,i={},r,o){super(e,i,r,o)}from(e){return new sw(this.url,this.headers,e,this.fetch)}get vectors(){return new xw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fw(this.url+"/iceberg",this.headers,this.fetch)}}const Tw="2.86.0";let Xr="";typeof Deno<"u"?Xr="deno":typeof document<"u"?Xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xr="react-native":Xr="node";const Cw={"X-Client-Info":`supabase-js-${Xr}/${Tw}`},Aw={headers:Cw},Nw={schema:"public"},Rw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mw={},Iw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Dw=()=>Headers,kw=(t,e,i)=>{const r=Iw(i),o=Dw();return async(l,u)=>{var f;const p=(f=await e())!==null&&f!==void 0?f:t;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${p}`),r(l,Object.assign(Object.assign({},u),{headers:h}))}};function Uw(t){return t.endsWith("/")?t:t+"/"}function Pw(t,e){var i,r;const{db:o,auth:l,realtime:u,global:f}=t,{db:p,auth:h,realtime:_,global:b}=e,x={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},_),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),f),{headers:Object.assign(Object.assign({},(i=b?.headers)!==null&&i!==void 0?i:{}),(r=f?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function Ow(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Uw(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const w0="2.86.0",Os=30*1e3,ud=3,Vc=ud*Os,Lw="http://localhost:9999",qw="supabase.auth.token",Bw={"X-Client-Info":`gotrue-js/${w0}`},cd="X-Supabase-Api-Version",T0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zw=600*1e3;class so extends Error{constructor(e,i,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Hw extends so{constructor(e,i,r){super(e,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function Gw(t){return se(t)&&t.name==="AuthApiError"}class Hi extends so{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class hi extends so{constructor(e,i,r,o){super(e,r,o),this.name=i,this.status=r}}class Ot extends hi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vw(t){return se(t)&&t.name==="AuthSessionMissingError"}class Is extends hi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qa extends hi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ba extends hi{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fw(t){return se(t)&&t.name==="AuthImplicitGrantRedirectError"}class Pg extends hi{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dd extends hi{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Fc(t){return se(t)&&t.name==="AuthRetryableFetchError"}class Og extends hi{constructor(e,i,r){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class fd extends hi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lg=` 	
\r=`.split(""),$w=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Lg.length;e+=1)t[Lg[e].charCodeAt(0)]=-2;for(let e=0;e<Ya.length;e+=1)t[Ya[e].charCodeAt(0)]=e;return t})();function qg(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Ya[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Ya[r]),e.queuedBits-=6}}function C0(t,e,i){const r=$w[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Bg(t){const e=[],i=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{Kw(u,r,i)};for(let u=0;u<t.length;u+=1)C0(t.charCodeAt(u),o,l);return e.join("")}function Jw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Yw(t,e){for(let i=0;i<t.length;i+=1){let r=t.charCodeAt(i);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}Jw(r,e)}}function Kw(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function js(t){const e=[],i={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)C0(t.charCodeAt(o),i,r);return new Uint8Array(e)}function Qw(t){const e=[];return Yw(t,i=>e.push(i)),new Uint8Array(e)}function Gi(t){const e=[],i={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>qg(o,i,r)),qg(null,i,r),e.join("")}function Xw(t){return Math.round(Date.now()/1e3)+t}function Ww(){return Symbol("auth-callback")}const dt=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},A0=()=>{if(!dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function Zw(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return i.searchParams.forEach((r,o)=>{e[o]=r}),e}const N0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),eT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ls=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Oi=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},ci=async(t,e)=>{await t.removeItem(e)};class al{constructor(){this.promise=new al.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}al.promiseConstructor=Promise;function $c(t){const e=t.split(".");if(e.length!==3)throw new fd("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!jw.test(e[r]))throw new fd("JWT not in base64url format");return{header:JSON.parse(Bg(e[0])),payload:JSON.parse(Bg(e[1])),signature:js(e[2]),raw:{header:e[0],payload:e[1]}}}async function tT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nT(t,e){return new Promise((r,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){r(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function iT(t){return("0"+t.toString(16)).substr(-2)}function sT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let o="";for(let l=0;l<56;l++)o+=i.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,iT).join("")}async function rT(t){const i=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(r);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function oT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await rT(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ds(t,e,i=!1){const r=sT();let o=r;i&&(o+="/PASSWORD_RECOVERY"),await Ls(t,`${e}-code-verifier`,o);const l=await oT(r);return[l,r===l?"plain":"s256"]}const aT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lT(t){const e=t.headers.get(cd);if(!e||!e.match(aT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function cT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ks(t){if(!dT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fT(t,e){return new Proxy(t,{get:(i,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,r,o)}})}function jg(t){return JSON.parse(JSON.stringify(t))}const Bi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hT=[502,503,504];async function zg(t){var e;if(!eT(t))throw new dd(Bi(t),0);if(hT.includes(t.status))throw new dd(Bi(t),t.status);let i;try{i=await t.json()}catch(l){throw new Hi(Bi(l),l)}let r;const o=lT(t);if(o&&o.getTime()>=T0["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new Og(Bi(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ot}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Og(Bi(i),t.status,i.weak_password.reasons);throw new Hw(Bi(i),t.status||500,r)}const pT=(t,e,i,r)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),i))};async function le(t,e,i,r){var o;const l=Object.assign({},r?.headers);l[cd]||(l[cd]=T0["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const u=(o=r?.query)!==null&&o!==void 0?o:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await mT(t,e,i+f,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(p):{data:Object.assign({},p),error:null}}async function mT(t,e,i,r,o,l){const u=pT(e,r,o,l);let f;try{f=await t(i,Object.assign({},u))}catch(p){throw console.error(p),new dd(Bi(p),0)}if(f.ok||await zg(f),r?.noResolveJson)return f;try{return await f.json()}catch(p){await zg(p)}}function tn(t){var e;let i=null;vT(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=Xw(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:r},error:null}}function Hg(t){const e=tn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function di(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gT(t){return{data:t,error:null}}function yT(t){const{action_link:e,email_otp:i,hashed_token:r,redirect_to:o,verification_type:l}=t,u=Ks(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:i,hashed_token:r,redirect_to:o,verification_type:l},p=Object.assign({},u);return{data:{properties:f,user:p},error:null}}function Gg(t){return t}function vT(t){return t.access_token&&t.refresh_token&&t.expires_in}const Yc=["global","local","others"];class _T{constructor({url:e="",headers:i={},fetch:r}){this.url=e,this.headers=i,this.fetch=N0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Yc[0]){if(Yc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yc.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,i={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:di})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:i}=e,r=Ks(e,["options"]),o=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(o.new_email=r?.newEmail,delete o.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:yT,redirectTo:i?.redirectTo})}catch(i){if(se(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:di})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,r,o,l,u,f,p;try{const h={nextPage:null,lastPage:0,total:0},_=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Gg});if(_.error)throw _.error;const b=await _.json(),x=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(p=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(C=>{const N=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);h[`${R}Page`]=N}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(se(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){ks(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:di})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){ks(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:di})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,i=!1){ks(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:di})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ks(e.userId);try{const{data:i,error:r}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:r}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _deleteFactor(e){ks(e.userId),ks(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,r,o,l,u,f,p;try{const h={nextPage:null,lastPage:0,total:0},_=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Gg});if(_.error)throw _.error;const b=await _.json(),x=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,E=(p=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(C=>{const N=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);h[`${R}Page`]=N}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(se(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}}function Vg(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const Us={debug:!!(globalThis&&A0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class bT extends R0{}async function xT(t,e,i){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await i()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new bT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Us.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function ST(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function M0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function ET(t){return parseInt(t,16)}function wT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function TT(t){var e;const{chainId:i,domain:r,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:p,resources:h,scheme:_,uri:b,version:x}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=M0(t.address),C=_?`${_}://${r}`:r,N=t.statement?`${t.statement}
`:"",R=`${C} wants you to sign in with your Ethereum account:
${E}

${N}`;let T=`URI: ${b}
Version: ${x}
Chain ID: ${i}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),f&&(T+=`
Not Before: ${f.toISOString()}`),p&&(T+=`
Request ID: ${p}`),h){let D=`
Resources:`;for(const A of h){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);D+=`
- ${A}`}T+=D}return`${R}
${T}`}class et extends Error{constructor({message:e,code:i,cause:r,name:o}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=o??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class Ka extends et{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function CT({error:t,options:e}){var i,r,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(I0(u)){if(l.rp.id!==u)return new et({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AT({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(I0(r)){if(i.rpId!==r)return new et({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class NT{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const RT=new NT;function MT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:r}=t,o=Ks(t,["challenge","user","excludeCredentials"]),l=js(e).buffer,u=Object.assign(Object.assign({},i),{id:js(i.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(r&&r.length>0){f.excludeCredentials=new Array(r.length);for(let p=0;p<r.length;p++){const h=r[p];f.excludeCredentials[p]=Object.assign(Object.assign({},h),{id:js(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return f}function IT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,r=Ks(t,["challenge","allowCredentials"]),o=js(e).buffer,l=Object.assign(Object.assign({},r),{challenge:o});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let u=0;u<i.length;u++){const f=i[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:js(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function DT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Gi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Gi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Gi(new Uint8Array(o.authenticatorData)),clientDataJSON:Gi(new Uint8Array(o.clientDataJSON)),signature:Gi(new Uint8Array(o.signature)),userHandle:o.userHandle?Gi(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Fg(){var t,e;return!!(dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function UT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ka("Browser returned unexpected credential type",e)}:{data:null,error:new Ka("Empty credential response",e)}}catch(e){return{data:null,error:CT({error:e,options:t})}}}async function PT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ka("Browser returned unexpected credential type",e)}:{data:null,error:new Ka("Empty credential response",e)}}catch(e){return{data:null,error:AT({error:e,options:t})}}}const OT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qa(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))r[l]=u;else if(i(u))r[l]=u;else if(e(u)){const f=r[l];e(f)?r[l]=Qa(f,u):r[l]=Qa(u)}else r[l]=u}return r}function qT(t,e){return Qa(OT,t,e||{})}function BT(t,e){return Qa(LT,t,e||{})}class jT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:r,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!u)return{data:null,error:f};const p=o??RT.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:h}=u.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(u.webauthn.type){case"create":{const h=qT(u.webauthn.credential_options.publicKey,l?.create),{data:_,error:b}=await UT({publicKey:h,signal:p});return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:b}}case"request":{const h=BT(u.webauthn.credential_options.publicKey,l?.request),{data:_,error:b}=await PT(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:h,signal:p}));return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:b}}}}catch(u){return se(u)?{data:null,error:u}:{data:null,error:new Hi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!i)return{data:null,error:new so("rpId is required for WebAuthn authentication")};try{if(!Fg())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:r},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:p}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:p.type,rpId:i,rpOrigins:r,credential_response:p.credential_response}})}catch(u){return se(u)?{data:null,error:u}:{data:null,error:new Hi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!i)return{data:null,error:new so("rpId is required for WebAuthn registration")};try{if(!Fg())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(_=>{var b;return(b=_.data)===null||b===void 0?void 0:b.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:f};const{data:p,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:o},{create:l});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:i,rpOrigins:r,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:h}}catch(u){return se(u)?{data:null,error:u}:{data:null,error:new Hi("Unexpected error in register",u)}}}}ST();const zT={url:Lw,storageKey:qw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Bw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function $g(t,e,i){return await i()}const Ps={};class ro{get jwks(){var e,i;return(i=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Ps[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{cachedAt:e})}constructor(e){var i,r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},zT),e);if(this.storageKey=l.storageKey,this.instanceID=(i=ro.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ro.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&dt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new _T({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=N0(l.fetch),this.lock=l.lock||$g,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:dt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=xT:this.lock=$g,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:A0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Vg(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${w0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},r="none";if(dt()&&(i=Zw(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),dt()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:l}=await this._getSessionFromURL(i,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Fw(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return se(i)?this._returnResult({error:i}):this._returnResult({error:new Hi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,r,o;try{const l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:tn}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const p=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:h,session:p},error:null})}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,r,o;try{let l;if("email"in e){const{email:_,password:b,options:x}=e;let E=null,C=null;this.flowType==="pkce"&&([E,C]=await Ds(this.storage,this.storageKey)),l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:_,password:b,data:(i=x?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:E,code_challenge_method:C},xform:tn})}else if("phone"in e){const{phone:_,password:b,options:x}=e;l=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:b,data:(r=x?.data)!==null&&r!==void 0?r:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:tn})}else throw new qa("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const p=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:h,session:p},error:null})}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:u,options:f}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Hg})}else if("phone"in e){const{phone:l,password:u,options:f}=e;i=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Hg})}else throw new qa("You must provide either an email or phone number and a password");const{data:r,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!r||!r.session||!r.user){const l=new Is;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,r,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,r,o,l,u,f,p,h,_,b,x;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:N,wallet:R,statement:T,options:D}=e;let A;if(dt())if(typeof R=="object")A=R;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")A=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=R}const j=new URL((i=D?.url)!==null&&i!==void 0?i:window.location.href),K=await A.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=M0(K[0]);let Y=(r=D?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!Y){const V=await A.request({method:"eth_chainId"});Y=ET(V)}const G={domain:j.host,address:Q,statement:T,uri:j.href,version:"1",chainId:Y,nonce:(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=D?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=D?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(h=D?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(_=D?.signInWithEthereum)===null||_===void 0?void 0:_.resources};E=TT(G),C=await A.request({method:"personal_sign",params:[wT(E),Q]})}try{const{data:N,error:R}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:C},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:tn});if(R)throw R;if(!N||!N.session||!N.user){const T=new Is;return this._returnResult({data:{user:null,session:null},error:T})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:R})}catch(N){if(se(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(e){var i,r,o,l,u,f,p,h,_,b,x,E;let C,N;if("message"in e)C=e.message,N=e.signature;else{const{chain:R,wallet:T,statement:D,options:A}=e;let j;if(dt())if(typeof T=="object")j=T;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))j=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const K=new URL((i=A?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in j&&j.signIn){const Q=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),D?{statement:D}:null));let Y;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")Y=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)Y=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)C=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),N=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${K.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(o=(r=A?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=A?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((b=(_=A?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||b===void 0)&&b.length?["Resources",...A.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const Q=await j.signMessage(new TextEncoder().encode(C),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Q}}try{const{data:R,error:T}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Gi(N)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:tn});if(T)throw T;if(!R||!R.session||!R.user){const D=new Is;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:T})}catch(R){if(se(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(i??"").split("/");try{const{data:l,error:u}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tn});if(await ci(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:r,token:o,access_token:l,nonce:u}=e,f=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:tn}),{data:p,error:h}=f;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!p||!p.session||!p.user){const _=new Is;return this._returnResult({data:{user:null,session:null},error:_})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:h})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,r,o,l,u;try{if("email"in e){const{email:f,options:p}=e;let h=null,_=null;this.flowType==="pkce"&&([h,_]=await Ds(this.storage,this.storageKey));const{error:b}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(i=p?.data)!==null&&i!==void 0?i:{},create_user:(r=p?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:h,code_challenge_method:_},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:f,options:p}=e,{data:h,error:_}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(u=p?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:_})}throw new qa("You must provide either an email or phone number.")}catch(f){if(se(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var i,r;try{let o,l;"options"in e&&(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:f}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:tn});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,h=u.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:h,session:p},error:null})}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var i,r,o,l,u;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Ds(this.storage,this.storageKey));const h=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:gT});return!((l=h.data)===null||l===void 0)&&l.url&&dt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(f){if(se(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new Ot;const{error:o}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:l}=e,{error:u}=await le(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:r,type:o,options:l}=e,{data:u,error:f}=await le(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new qa("You must provide either an email or phone number and a type")}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Vc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Oi(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Jc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=fT(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:di}):await this._useSession(async i=>{var r,o,l;const{data:u,error:f}=i;if(f)throw f;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ot}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:di})})}catch(i){if(se(i))return Vw(i)&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async r=>{const{data:o,error:l}=r;if(l)throw l;if(!o.session)throw new Ot;const u=o.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await Ds(this.storage,this.storageKey));const{data:h,error:_}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:u.access_token,xform:di});if(_)throw _;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(r){if(se(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ot;const i=Date.now()/1e3;let r=i,o=!0,l=null;const{payload:u}=$c(e.access_token);if(u.exp&&(r=u.exp,o=r<=i),o){const{data:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(se(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var r;if(!e){const{data:u,error:f}=i;if(f)throw f;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Ot;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!dt())throw new Ba("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ba(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ba("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pg("No code detected.");const{data:D,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:p,token_type:h}=e;if(!l||!f||!u||!h)throw new Ba("No session defined in URL");const _=Math.round(Date.now()/1e3),b=parseInt(f);let x=_+b;p&&(x=parseInt(p));const E=x-_;E*1e3<=Os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${b}s`);const C=x-b;_-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,x,_):_-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,x,_);const{data:N,error:R}=await this._getUser(l);if(R)throw R;const T={provider_token:r,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:x,refresh_token:u,token_type:h,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:o,error:l}=i;if(l)return this._returnResult({error:l});const u=(r=o.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(Gw(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=Ww(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async i=>{var r,o;try{const{data:{session:l},error:u}=i;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Ds(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(se(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:r,error:o}=await this._useSession(async l=>{var u,f,p,h,_;const{data:b,error:x}=l;if(x)throw x;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",E,{headers:this.headers,jwt:(_=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return dt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(se(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var r;try{const{error:o,data:{session:l}}=i;if(o)throw o;const{options:u,provider:f,token:p,access_token:h,nonce:_}=e,b=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:f,id_token:p,access_token:h,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:tn}),{data:x,error:E}=b;return E?this._returnResult({data:{user:null,session:null},error:E}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Is}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:E}))}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var r,o;const{data:l,error:u}=i;if(u)throw u;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await nT(async o=>(o>0&&await tT(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tn})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Fc(l)&&Date.now()+u-r<Os})}catch(r){if(this._debug(i,"error",r),se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),dt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Oi(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ls(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u?.user)!==null&&e!==void 0?e:Jc()}else if(o&&!o.user&&!o.user){const u=await Oi(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await ci(this.storage,this.storageKey+"-user"),await Ls(this.storage,this.storageKey,o)):o.user=Jc()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const l=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Vc;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Vc}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Fc(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var i,r;if(!e)throw new Ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new al;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Ot;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),se(l)){const u={data:null,error:l};return Fc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,i,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,i)}catch(p){l.push(p)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await Ls(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const l=jg(o);await Ls(this.storage,this.storageKey,l)}else{const o=jg(i);await Ls(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ci(this.storage,this.storageKey),await ci(this.storage,this.storageKey+"-code-verifier"),await ci(this.storage,this.storageKey+"-user"),this.userStorage&&await ci(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Os);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Os}ms, refresh threshold is ${ud} ticks`),o<=ud&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof R0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,r){const o=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ds(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);o.push(l.toString())}return r?.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var r;const{data:o,error:l}=i;return l?this._returnResult({data:null,error:l}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var r,o;const{data:l,error:u}=i;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:h}=await le(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&p.type==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:o,error:l}=i;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?DT(e.webauthn.credential_response):kT(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:p}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:o,error:l}=i;if(l)return this._returnResult({data:null,error:l});const u=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:MT(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:IT(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i?.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:r},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=$c(r.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((i=(e=r.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;return o?this._returnResult({data:null,error:o}):r?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ot})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ot});const u=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&dt()&&!i?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ot});const u=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&dt()&&!i?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ot})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;return o?this._returnResult({data:null,error:o}):r?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ot})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let r=i.keys.find(f=>f.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(f=>f.kid===e),r&&this.jwks_cached_at+zw>o)return r;const{data:l,error:u}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,r=l.keys.find(f=>f.kid===e),!r)?null:r}async getClaims(e,i={}){try{let r=e;if(!r){const{data:E,error:C}=await this.getSession();if(C||!E.session)return this._returnResult({data:null,error:C});r=E.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:p}}=$c(r);i?.allowExpired||uT(l.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!h){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:l,header:o,signature:u},error:null}}const _=cT(o.alg),b=await crypto.subtle.importKey("jwk",h,_,!0,["verify"]);if(!await crypto.subtle.verify(_,b,u,Qw(`${f}.${p}`)))throw new fd("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}}ro.nextInstanceID={};const HT=ro;class GT extends HT{constructor(e){super(e)}}class VT{constructor(e,i,r){var o,l,u;this.supabaseUrl=e,this.supabaseKey=i;const f=Ow(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,h={db:Nw,realtime:Mw,auth:Object.assign(Object.assign({},Rw),{storageKey:p}),global:Aw},_=Pw(r??{},h);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=_.auth)!==null&&u!==void 0?u:{},this.headers,_.global.fetch),this.fetch=kw(i,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new ME(new URL("rest/v1",f).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new ww(this.storageUrl.href,this.headers,this.fetch,r?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new CE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,r)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(i=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:r,storage:o,userStorage:l,storageKey:u,flowType:f,lock:p,debug:h,throwOnError:_},b,x){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GT({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),b),storageKey:u,autoRefreshToken:e,persistSession:i,detectSessionInUrl:r,storage:o,userStorage:l,flowType:f,lock:p,debug:h,throwOnError:_,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new JE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r?.access_token)})}_handleTokenChanged(e,i,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FT=(t,e,i)=>new VT(t,e,i);function $T(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$T()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ge=FT("https://mhitmeonldhipjhqzmqs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oaXRtZW9ubGRoaXBqaHF6bXFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3ODc3NDIsImV4cCI6MjA4MDM2Mzc0Mn0.xg-p51CDQAjlIQZPNORAxz6MaI3vcPNcK-eJx7ujg04");async function D0(t,e,i,r){try{const o={id:t,email:e,fullname:i,role:r},{data:l,error:u}=await ge.from("users").upsert(o,{onConflict:"id",returning:"representation"}).select();return u?(console.error("Upsert error:",u),u.code==="PGRST204"||u.message?.includes("Could not find")?{success:!1,reason:"schema_cache",error:u}:u.message?.toLowerCase().includes("permission denied")||u.message?.toLowerCase().includes("policy")?{success:!1,reason:"rls_policy",error:u}:{success:!1,reason:"other",error:u}):(console.log("User row upserted successfully:",l),{success:!0,reason:"upserted",data:l})}catch(o){return console.error("Unexpected error:",o),{success:!1,reason:"exception",error:o}}}async function Kc(){try{const{data:t,error:e}=await ge.from("pets").select("*").order("created_at",{ascending:!1});if(e)throw e;return{success:!0,pets:t||[]}}catch(t){return{success:!1,error:t.message||"Failed to fetch pets",pets:[]}}}async function JT(t){try{const{data:e,error:i}=await ge.from("pets").select("*").eq("id",t).single();if(i)throw i;return{success:!0,pet:e}}catch(e){return{success:!1,error:e.message||"Failed to fetch pet"}}}async function jd(){try{const{data:t,error:e}=await ge.from("pets").select("*").eq("status","Available").order("created_at",{ascending:!1});if(e)throw e;return{success:!0,pets:t||[]}}catch(t){return{success:!1,error:t.message||"Failed to fetch available pets",pets:[]}}}async function YT(t,e){try{if(!t.name||!t.category)throw new Error("Pet name and category are required");const i=t.category,r=typeof i=="string"?i.trim().toLowerCase():i;let o=e;if(!o)try{const{data:x}=await ge.auth.getUser();o=x?.user?.id||null}catch{o=null}if(!o)throw new Error("`created_by` is required and no authenticated user was found. Sign in as staff/admin to add pets.");const l=t.gender;let u=null;if(l!=null){const x=String(l).trim().toLowerCase();x==="m"||x==="male"?u="male":x==="f"||x==="female"?u="female":x==="unknown"||x==="unspecified"||x==="n/a"?u="unknown":u=x}const f=t.size,p=typeof f=="string"?f.trim().toLowerCase():f,h={name:t.name,category:r,breed:t.breed||null,age:t.age||null,gender:u,size:p||null,color:t.color||null,description:t.description||null,health_status:t.health_status||"healthy",vaccination_status:t.vaccination_status==="true"||t.vaccination_status===!0,neutered_spayed:t.neutered_spayed==="true"||t.neutered_spayed===!0,image_url:t.image_url||null,status:t.status||"Available",created_by:o};console.log("Inserting pet with payload (normalized):",h);const{data:_,error:b}=await ge.from("pets").insert(h).select().single();if(b){console.error("Supabase insert error details:",{code:b.code,message:b.message,details:b.details,hint:b.hint});try{console.error("Supabase insert error (full):",JSON.stringify(b,null,2))}catch(x){console.error("Failed to stringify Supabase error",x)}throw b}return console.log("Pet inserted successfully:",_),{success:!0,message:"Pet added successfully",pet:_}}catch(i){return console.error("addPet error:",i),{success:!1,error:i.message||"Failed to add pet. Check console for details."}}}async function KT(t,e){try{if(!t)throw new Error("Pet ID is required");const i=e.category,r=typeof i=="string"?i.trim().toLowerCase():i,o=e.gender;let l=null;if(o!=null){const b=String(o).trim().toLowerCase();b==="m"||b==="male"?l="male":b==="f"||b==="female"?l="female":b==="unknown"||b==="unspecified"||b==="n/a"?l="unknown":l=b}const u=e.size,f=typeof u=="string"?u.trim().toLowerCase():u,p={...e.name&&{name:e.name},...r&&{category:r},...e.breed!==void 0&&{breed:e.breed||null},...e.age!==void 0&&{age:e.age||null},...l!==void 0&&{gender:l},...f!==void 0&&{size:f||null},...e.color!==void 0&&{color:e.color||null},...e.description!==void 0&&{description:e.description||null},...e.health_status!==void 0&&{health_status:e.health_status||"healthy"},...e.vaccination_status!==void 0&&{vaccination_status:e.vaccination_status==="true"||e.vaccination_status===!0},...e.neutered_spayed!==void 0&&{neutered_spayed:e.neutered_spayed==="true"||e.neutered_spayed===!0},...e.image_url!==void 0&&{image_url:e.image_url||null},...e.status!==void 0&&{status:e.status||"Available"}};console.log("Updating pet",t,"with payload:",p);const{data:h,error:_}=await ge.from("pets").update(p).eq("id",t).select().single();if(_)throw console.error("Supabase update error:",{code:_.code,message:_.message,details:_.details}),_;return console.log("Pet updated successfully:",h),{success:!0,message:"Pet updated successfully",pet:h}}catch(i){return console.error("updatePet error:",i),{success:!1,error:i.message||"Failed to update pet"}}}async function QT(t){try{if(!t)throw new Error("Pet ID is required");const{data:e}=await ge.from("pets").select("image_url").eq("id",t).single();if(e?.image_url)try{const r=e.image_url.match(/pet-images\/(.+)/);r&&await XT(r[1])}catch(r){console.warn("Failed to delete pet image:",r)}const{error:i}=await ge.from("pets").delete().eq("id",t);if(i)throw i;return{success:!0,message:"Pet deleted successfully"}}catch(e){return console.error("deletePet error:",e),{success:!1,error:e.message||"Failed to delete pet"}}}async function Jg(t,e){try{if(!t)throw new Error("File is required");const i="pet-images",r=(t.name||"").split(".").pop(),o=`pets/${e||"unknown"}/${Date.now()}.${r}`,l=await ge.storage.from(i).upload(o,t,{cacheControl:"3600",upsert:!1,contentType:t.type||"application/octet-stream"});if(console.log("Supabase storage upload result:",l),l.error){const p=l.error,h=`Storage upload error: ${p.message||JSON.stringify(p)} (status: ${p.status||"unknown"})`;throw new Error(h)}const u=ge.storage.from(i).getPublicUrl(o);console.log("Supabase getPublicUrl result:",u);const f=u.data?.publicUrl||null;if(!f)throw new Error("Failed to generate public URL for image");return{success:!0,message:"Image uploaded successfully",imageUrl:f,filePath:o}}catch(i){return{success:!1,error:i.message||"Failed to upload image"}}}async function XT(t){try{const{error:e}=await ge.storage.from("pet-images").remove([t]);if(e)throw e;return{success:!0,message:"Image deleted successfully"}}catch(e){return{success:!1,error:e.message||"Failed to delete image"}}}const WT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),Yg=t=>{const e=ZT(t);return e.charAt(0).toUpperCase()+e.slice(1)},k0=(...t)=>t.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),eC=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var tC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nC=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:u,...f},p)=>M.createElement("svg",{ref:p,...tC,width:e,height:e,stroke:t,strokeWidth:r?Number(i)*24/Number(e):i,className:k0("lucide",o),...!l&&!eC(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>M.createElement(h,_)),...Array.isArray(l)?l:[l]]));const ze=(t,e)=>{const i=M.forwardRef(({className:r,...o},l)=>M.createElement(nC,{ref:l,iconNode:e,className:k0(`lucide-${WT(Yg(t))}`,`lucide-${t}`,r),...o}));return i.displayName=Yg(t),i};const iC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xa=ze("arrow-left",iC);const sC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Qc=ze("bell",sC);const rC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],oC=ze("briefcase",rC);const aC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lC=ze("calendar",aC);const uC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kn=ze("check",uC);const cC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],dC=ze("circle-user",cC);const fC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zd=ze("circle-x",fC);const hC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pC=ze("clock",hC);const mC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hd=ze("eye-off",mC);const gC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pd=ze("eye",gC);const yC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qs=ze("file-text",yC);const vC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],U0=ze("heart",vC);const _C=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],P0=ze("house",_C);const bC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],xC=ze("log-in",bC);const SC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],md=ze("lock",SC);const EC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],O0=ze("mail",EC);const wC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],TC=ze("map-pin",wC);const CC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],AC=ze("menu",CC);const NC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],RC=ze("message-circle",NC);const MC=[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]],pi=ze("paw-print",MC);const IC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],DC=ze("phone",IC);const kC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wa=ze("search",kC);const UC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PC=ze("settings",UC);const OC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gd=ze("user",OC);const LC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zs=ze("x",LC);function qC(){const t=on();return y.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-amber-100 px-6 py-3",children:y.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 rounded-lg bg-linear-amber",children:y.jsx(pi,{size:24,className:"text-white"})}),y.jsx("h1",{className:"text-xl font-bold text-amber-700 hidden sm:block",children:"Pet Peeve"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:()=>t("/login"),className:"btn-secondary px-4 py-2 text-sm border-amber-500 text-amber-600 bg-amber-100 shadow-md rounded-full w-25 hover:text-white hover:bg-amber-600 hover:animate-pulse cursor-pointer",children:"Login"}),y.jsx("button",{onClick:()=>t("/signup"),className:"btn-primary px-4 py-2 text-sm border-amber-500 bg-linear-amber text-white shadow-md rounded-full w-25 hover:animate-pulse cursor-pointer",children:"Sign Up"})]})]})})}function BC(){const t=on(),[e,i]=M.useState([]),[r,o]=M.useState([]),[l,u]=M.useState(!1),[f,p]=M.useState(""),[h,_]=M.useState(""),[b,x]=M.useState(""),[E,C]=M.useState(""),N=async()=>{u(!0),p("");try{const T=await jd();T&&T.success?i(T.pets||[]):p(T?.error||"Failed to load pets")}catch{p("Failed to load pets"),i([])}finally{u(!1)}};M.useEffect(()=>{N()},[]),M.useEffect(()=>{let T=e.slice();if(h.trim()){const D=h.toLowerCase();T=T.filter(A=>(A.name||"").toLowerCase().includes(D)||(A.breed||"").toLowerCase().includes(D))}b&&(T=T.filter(D=>D.category===b)),E&&(T=T.filter(D=>D.status===E)),o(T)},[e,h,b,E]);const R=T=>t(`/pet/${T}`);return y.jsxs(y.Fragment,{children:[y.jsx(qC,{}),y.jsxs("div",{className:"min-h-screen bg-dark pt-16",children:[y.jsx("div",{className:"bg-linear-amber px-6 py-20",children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm mb-6",children:[y.jsx(Wa,{size:16,className:"text-white"}),y.jsx("span",{className:"text-sm font-bold text-white",children:"FIND PETS"})]}),y.jsx("h1",{className:"text-5xl font-extrabold text-white mb-4",children:"Find Your Perfect Pet"}),y.jsx("p",{className:"text-xl text-white/90",children:"Browse our available pets and find your new best friend"})]})}),y.jsx("div",{className:"px-6 py-12",children:y.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsx("div",{className:"md:col-span-2",children:y.jsxs("div",{className:"relative",children:[y.jsx("input",{className:"w-full px-6 py-4 rounded-xl border border-gray-200 bg-white focus:border-amber-400 focus:ring-4 focus:ring-amber-50 outline-none transition-all",placeholder:"Search by name or breed...",value:h,onChange:T=>_(T.target.value)}),y.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-amber-500",children:y.jsx(Wa,{size:18})})]})}),y.jsxs("select",{className:"px-6 py-4 rounded-xl border border-gray-200 bg-white",value:b,onChange:T=>x(T.target.value),children:[y.jsx("option",{value:"",children:"All Categories"}),y.jsx("option",{value:"Dog",children:" Dogs"}),y.jsx("option",{value:"Cat",children:" Cats"}),y.jsx("option",{value:"Bird",children:" Birds"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Category"}),y.jsxs("select",{className:"w-full p-2 border rounded",value:b,onChange:T=>x(T.target.value),children:[y.jsx("option",{value:"",children:"All Categories"}),y.jsx("option",{value:"Dog",children:" Dogs"}),y.jsx("option",{value:"Cat",children:" Cats"}),y.jsx("option",{value:"Bird",children:" Birds"}),y.jsx("option",{value:"Rabbit",children:" Rabbits"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Status"}),y.jsxs("select",{className:"w-full p-2 border rounded",value:E,onChange:T=>C(T.target.value),children:[y.jsx("option",{value:"",children:"All Status"}),y.jsx("option",{value:"Available",children:"Available"}),y.jsx("option",{value:"Pending",children:"Pending"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Actions"}),y.jsx("button",{className:"btn-secondary w-full font-semibold p-2 rounded",onClick:N,children:" Refresh"})]}),y.jsx("div",{})]}),f&&y.jsx("div",{className:"alert-error",children:f}),l&&y.jsx("div",{className:"text-center py-12 text-amber-700",children:"Loading pets..."}),!l&&r.length>0&&y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(T=>y.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-md hover:translate-y-1 transition-transform",onClick:()=>R(T.id),children:[T.image_url?y.jsx("img",{src:T.image_url,alt:T.name,className:"w-full h-48 object-cover"}):y.jsx("div",{className:"h-48 bg-linear-amber-br flex items-center justify-center text-6xl",children:T.category==="Dog"?"":T.category==="Cat"?"":T.category==="Bird"?"":""}),y.jsxs("div",{className:"p-6 space-y-3",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsx("h3",{className:"text-2xl font-semibold text-amber-900",children:T.name}),y.jsx(U0,{size:22,className:"text-amber-400 hover:text-red-500 cursor-pointer transition-colors"})]}),y.jsxs("div",{className:"space-y-1 text-sm text-amber-700",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Category:"})," ",T.category]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Breed:"})," ",T.breed]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Age:"})," ",T.age]})]}),y.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full text-xs font-semibold bg-green-50 text-green-700",children:T.status}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{className:"w-full py-3 rounded-xl font-semibold bg-linear-amber text-white hover:shadow-md transition-all",onClick:D=>{D.stopPropagation(),R(T.id)},children:"View Details"})})]})]},T.id))})]})})]})]})}function jC(){const t=on(),[e,i]=M.useState({email:"",password:""}),[r,o]=M.useState(!1),[l,u]=M.useState(""),[f,p]=M.useState(""),[h,_]=M.useState(!1),b=N=>{i({...e,[N.target.name]:N.target.value}),u(""),p("")},x=async N=>{if(N.preventDefault(),o(!0),u(""),p(""),!e.email||!e.password){u("Please fill in all fields!"),o(!1);return}try{const{data:R,error:T}=await ge.auth.signInWithPassword({email:e.email,password:e.password});if(T){u(T.message||"Login failed. Please try again."),o(!1);return}const D=R?.user;let{data:A,error:j}=await ge.from("users").select("*").eq("id",D.id).maybeSingle();if(!A){const Y=D?.user_metadata?.role||D?.role||"adopter",G=D?.user_metadata?.fullname||D?.user_metadata?.fullName||D?.user_metadata?.full_name||"",V=await D0(D.id,D.email,G,Y);if(!V.success&&V.reason==="rls_policy"){u("Database permissions issue: Please contact support to enable public access to users table."),o(!1);return}A={id:D.id,email:D.email,fullname:G,role:Y}}const K=(A.role||D?.user_metadata?.role||"adopter").toLowerCase();if(K==="staff"||K==="admin"){p(" Login successful! Redirecting to admin..."),setTimeout(()=>t("/admindashboard"),800),o(!1);return}A&&A.phone_number&&A.address&&A.city&&A.state&&A.zip_code?(p(" Login successful! Redirecting..."),setTimeout(()=>t("/browsepet"),800)):(p(" Login successful! Please complete your profile..."),setTimeout(()=>t("/profile"),800)),o(!1)}catch{u("An unexpected error occurred. Please try again."),o(!1)}},E=()=>{t("/")},C=()=>{t("/signup")};return y.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-4 bg-linear-to-br from-amber-50 via-white to-orange-50",children:y.jsxs("div",{className:"w-full max-w-5xl",children:[y.jsxs("button",{onClick:E,className:"mb-3 flex items-center gap-2 text-amber-700 hover:text-amber-900 font-semibold transition-all group cursor-pointer",children:[y.jsx(Xa,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Home"]}),y.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-amber-100 overflow-hidden",children:y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[y.jsxs("div",{className:"bg-linear-to-br from-amber-500 to-orange-500 px-8 py-12 flex flex-col items-center justify-center text-center",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm mb-4",children:y.jsx(pi,{size:40,className:"text-white"})}),y.jsxs("h1",{className:"text-4xl font-black text-white mb-2",children:["Welcome Back ",y.jsx("br",{})," PetPeeve!"]}),y.jsx("p",{className:"text-lg text-white/90 mb-6",children:"Sign in to continue your journey"}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/80",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Secure"})]}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Protected"})]}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Private"})]})]})]}),y.jsxs("div",{className:"p-8",children:[l&&y.jsxs("div",{className:"mb-4 bg-linear-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-xl p-2.5 flex items-center gap-2",children:[y.jsx(zd,{className:"text-red-500 shrink-0",size:18}),y.jsx("p",{className:"text-red-700 font-semibold text-sm",children:l})]}),f&&y.jsxs("div",{className:"mb-4 bg-linear-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-2.5 flex items-center gap-2",children:[y.jsx(kn,{className:"text-green-500 shrink-0",size:18}),y.jsx("p",{className:"text-green-700 font-semibold text-sm",children:f})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(O0,{size:14}),"Email Address"]}),y.jsx("input",{type:"email",name:"email",placeholder:"you@example.com",value:e.email,onChange:b,className:"w-full px-4 py-3 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all",required:!0})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900",children:[y.jsx(md,{size:14}),"Password"]}),y.jsx("button",{type:"button",className:"text-xs font-semibold text-amber-600 hover:text-amber-800 transition-colors cursor-pointer",children:"Forgot?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:h?"text":"password",name:"password",placeholder:"",value:e.password,onChange:b,className:"w-full px-4 py-3 pr-11 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all",required:!0}),y.jsx("button",{type:"button",onClick:()=>_(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 text-amber-600 hover:text-amber-800 transition-colors cursor-pointer",children:h?y.jsx(hd,{size:18}):y.jsx(pd,{size:18})})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"remember",className:"w-4 h-4 rounded border-2 border-amber-300 text-amber-500 focus:ring-2 focus:ring-amber-200 cursor-pointer"}),y.jsx("label",{htmlFor:"remember",className:"text-sm text-amber-700 cursor-pointer",children:"Remember me"})]}),y.jsx("button",{onClick:x,disabled:r,className:"w-full py-3.5 rounded-xl font-bold text-base bg-linear-to-r from-amber-500 to-orange-500 text-white hover:shadow-2xl hover:shadow-amber-300 transition-all hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 flex items-center justify-center gap-2 cursor-pointer",children:r?y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):y.jsxs(y.Fragment,{children:[y.jsx(xC,{size:20}),"Sign In"]})})]}),y.jsxs("div",{className:"relative my-4",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-amber-200"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-4 bg-white text-amber-600 font-semibold",children:"OR"})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-amber-200 hover:border-amber-300 hover:bg-linear-to-br from-amber-50 to-orange-50 transition-all font-semibold text-amber-900 text-sm cursor-pointer",children:[y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),y.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-amber-200 hover:border-amber-300 hover:bg-linear-to-br from-amber-50 to-orange-50 transition-all font-semibold text-amber-900 text-sm cursor-pointer",children:[y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]}),y.jsxs("p",{className:"mt-4 text-center text-amber-700 text-sm",children:["Don't have an account?"," ",y.jsx("button",{onClick:C,className:"font-bold text-amber-600 hover:text-amber-800 hover:underline transition-all cursor-pointer",children:"Create one"})]})]})]})})]})})}async function zC(){try{const{error:t}=await ge.auth.signOut();if(t)throw t;return{success:!0,message:"Logged out successfully"}}catch(t){return{success:!1,error:t.message||"Logout failed"}}}function Vi({message:t,type:e="info",onClose:i,duration:r=2500}){if(M.useEffect(()=>{if(!t)return;const l=setTimeout(()=>{i&&i()},r);return()=>clearTimeout(l)},[t,r,i]),!t)return null;let o="bg-gray-800";return e==="success"&&(o="bg-green-600"),e==="error"&&(o="bg-red-600"),e==="warning"&&(o="bg-yellow-500"),y.jsxs("div",{className:`fixed bottom-8 right-8 z-[9999] px-6 py-3 rounded-xl shadow-lg text-white font-semibold text-base ${o} animate-fade-in`,children:[t,y.jsx("button",{className:"ml-4 text-white/80 hover:text-white font-bold",onClick:i,children:""})]})}function Hd(){const[t,e]=M.useState(null),[i,r]=M.useState(!0);return M.useEffect(()=>{let o=!0;return(async()=>{try{const{data:u}=await ge.auth.getUser(),f=u?.user;if(f&&o){const{data:p,error:h}=await ge.from("users").select("id, email, fullname, role").eq("id",f.id).single();h?(console.warn("[useAuth] Error fetching user role:",h),e(f)):p&&o&&e({...f,role:p.role,fullname:p.fullname})}else o&&e(null)}catch(u){console.error("[useAuth] Error:",u)}finally{o&&r(!1)}})(),()=>o=!1},[]),{user:t,loading:i}}function Li({children:t,requiredRole:e}){const[i,r]=M.useState(!0),[o,l]=M.useState(!1),[u,f]=M.useState(""),p=on(),h=Qt();return M.useEffect(()=>{let _=!0;return(async()=>{try{const{data:b}=await ge.auth.getUser(),x=b?.user;if(!_)return;if(x){if(e){const E=x.user_metadata?.role||x.user_metadata?.Role||x.user_metadata?.role?.toLowerCase();if(!E||(Array.isArray(e)?!e.includes(E):E!==e)){f("Access denied: insufficient permissions."),l(!1),setTimeout(()=>p("/",{replace:!0}),1800);return}}l(!0)}else l(!1),f("Please log in to access this page."),setTimeout(()=>p("/login",{state:{from:h},replace:!0}),1800)}catch{l(!1),f("Authentication error. Please log in."),setTimeout(()=>p("/login",{state:{from:h},replace:!0}),1800)}finally{_&&r(!1)}})(),()=>_=!1},[h,p,e]),i?y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mb-4"}),y.jsx("div",{className:"text-lg font-semibold text-amber-700",children:"Checking authentication..."}),u&&y.jsx(Vi,{message:u,type:"error",onClose:()=>f("")})]}):o?y.jsx(y.Fragment,{children:t}):u?y.jsx(Vi,{message:u,type:"error",onClose:()=>f("")}):null}async function L0(t){try{console.log("[GetUnreadNotifications] Fetching for user:",t);const{data:e,error:i}=await ge.from("notifications").select("*").eq("user_id",t).eq("read",!1).order("created_at",{ascending:!1});if(i)throw console.error("[GetUnreadNotifications] Error:",i),i;return console.log("[GetUnreadNotifications] Success, found",e?.length||0,"notifications"),{success:!0,notifications:e||[]}}catch(e){return console.error("[GetUnreadNotifications] Catch block error:",e),{success:!1,error:e.message||"Failed to fetch notifications",notifications:[]}}}async function ll(t,e,i,r,o={}){try{if(!t)return console.error("[CreateNotification] user_id is required but got:",t),{success:!1,error:"user_id is required"};console.log("[CreateNotification] Creating notification:",{userId:t,type:e,title:i});const{data:l,error:u}=await ge.from("notifications").insert({user_id:t,type:e,title:i,message:r,related_data:o,read:!1,created_at:new Date().toISOString()}).select().single();if(u)throw console.error("[CreateNotification] Supabase error:",u),u;return console.log("[CreateNotification] Success:",l),{success:!0,notification:l}}catch(l){return{success:!1,error:l.message||"Failed to create notification"}}}async function Gd(t,e,i,r){try{console.log(`

========== NOTIFY ADMINS FUNCTION ==========`),console.log("[Notify] STEP 1 - Input params:",{petId:t,petName:e,adopterId:i,adopterName:r}),console.log("[Notify] STEP 2 - Fetching admin/staff users from database...");const{data:o,error:l}=await ge.from("users").select("id, fullname, email, role").in("role",["admin","staff"]);if(l)throw console.error("[Notify] STEP 2 FAILED - Query error:",l),l;if(console.log("[Notify] STEP 2 SUCCESS - Found users:",o),console.log("[Notify] Total admin/staff users:",o?.length||0),!o||o.length===0)return console.log("[Notify] STEP 2 - No admin users found in database"),{success:!0,message:"No admin users to notify",notifiedCount:0};o.forEach((h,_)=>{console.log(`[Notify] Admin ${_+1}:`,{id:h.id,fullname:h.fullname,email:h.email,role:h.role})}),console.log("[Notify] STEP 3 - Creating notifications for each admin...");const u=o.map((h,_)=>h.id?(console.log(`[Notify] STEP 3.${_+1} - Creating notification for admin:`,h.id),ll(h.id,"application_submitted","New Adoption Application",`${r} submitted an application for ${e}`,{petId:t,petName:e,adopterId:i,adopterName:r})):(console.error("[Notify] STEP 3 - Admin has no ID:",h),Promise.resolve({success:!1,error:"Admin user missing ID"}))),f=await Promise.all(u),p=f.filter(h=>!h.success);return console.log("[Notify] STEP 4 - Results:"),console.log("  - Total admins:",o.length),console.log("  - Successful notifications:",f.filter(h=>h.success).length),console.log("  - Failed notifications:",p.length),console.log("  - Details:",f),console.log(`[Notify] ========== COMPLETE ==========
`),{success:f.every(h=>h.success),notifiedCount:f.filter(h=>h.success).length}}catch(o){return console.error("[Notify] ========== FATAL ERROR =========="),console.error("[Notify] Error:",o),{success:!1,error:o.message||"Failed to notify admins"}}}const Vd=Object.freeze(Object.defineProperty({__proto__:null,createNotification:ll,getUnreadNotifications:L0,notifyAdminsAboutApplication:Gd},Symbol.toStringTag,{value:"Module"}));async function q0(t,e){try{if(!t.pet_id||!t.living_situation)throw new Error("Pet ID and living situation are required");const i={...t,pet_id:t.pet_id,user_id:e,status:"Pending",household_members:t.household_members?parseInt(t.household_members):null,landlord_allows_pets:t.landlord_allows_pets==="yes"?!0:t.landlord_allows_pets==="no"?!1:null,created_at:new Date().toISOString()};console.log("Submitting application data:",i);const{data:r,error:o}=await ge.from("adoption_applications").insert(i).select().single();if(o)throw console.error("Supabase error:",o),o;return{success:!0,message:"Application submitted successfully",application:r}}catch(i){return console.error("Application submission error:",i),{success:!1,error:i.message||"Failed to submit application"}}}async function Kg(t){try{const{data:e,error:i}=await ge.from("adoption_applications").select(`
        *,
        pets:pet_id(id, name, category, image_url, status)
      `).eq("user_id",t).order("created_at",{ascending:!1});if(i)throw i;return{success:!0,applications:e||[]}}catch(e){return{success:!1,error:e.message||"Failed to fetch applications",applications:[]}}}async function B0(t){try{const{data:e,error:i}=await ge.from("adoption_applications").select(`
        *,
        pets:pet_id(*),
        users:user_id(*)
      `).eq("id",t).single();if(i)throw i;return{success:!0,application:e}}catch(e){return{success:!1,error:e.message||"Failed to fetch application"}}}async function Ha(){try{const{data:t,error:e}=await ge.from("adoption_applications").select(`
        *,
        pets:pet_id(id, name, category, image_url),
        users:user_id(id, fullname, email, phone_number)
      `).order("created_at",{ascending:!1});if(e)throw e;return{success:!0,applications:t||[]}}catch(t){return console.error("Error fetching applications:",t),{success:!1,error:t.message||"Failed to fetch applications",applications:[]}}}async function HC(t,e,i){try{const{error:r}=await ge.from("adoption_applications").update({status:"Approved",reviewed_by:i,reviewed_at:new Date().toISOString()}).eq("id",t);if(r)throw r;const{error:o}=await ge.from("pets").update({status:"Adopted"}).eq("id",e);if(o)throw o;try{const l=await B0(t);if(l.success&&l.application){const u=l.application.user_id,f=l.application.pets?.name||"your selected pet";await ll(u,"application_approved","Application Approved",`Your application for ${f} has been approved!`,{applicationId:t,petId:e})}}catch(l){console.warn("Failed to notify applicant about approval:",l)}return{success:!0,message:"Application approved successfully"}}catch(r){return{success:!1,error:r.message||"Failed to approve application"}}}async function GC(t,e="",i){try{if(console.log(`

========== DECLINE APPLICATION FUNCTION ==========`),console.log("[DeclineApplication] STEP 1 - Input parameters:"),console.log("  - applicationId:",t,typeof t),console.log("  - reason:",e,typeof e),console.log("  - reviewedByUserId:",i,typeof i),!t)throw console.error("[DeclineApplication] VALIDATION FAILED: applicationId is missing!"),new Error("applicationId is required");console.log("[DeclineApplication] STEP 2 - Validation passed, updating database...");const r={status:"Declined",decline_reason:e,reviewed_by:i,reviewed_at:new Date().toISOString()};console.log("[DeclineApplication] STEP 2a - Update payload:",r);const{error:o}=await ge.from("adoption_applications").update(r).eq("id",t);if(o)throw console.error("[DeclineApplication] STEP 2 FAILED - Database error:",o),o;console.log("[DeclineApplication] STEP 3 - Application updated successfully in database"),console.log("[DeclineApplication] STEP 4 - Fetching application details for notification...");try{const l=await B0(t);if(console.log("[DeclineApplication] STEP 4a - Application fetch result:",l),l.success&&l.application){const u=l.application.user_id,f=l.application.pets?.name||"the pet";console.log("[DeclineApplication] STEP 5 - Creating notification..."),console.log("  - Recipient (applicantId):",u),console.log("  - Pet name:",f),console.log("  - Reason:",e);const p=await ll(u,"application_declined","Application Declined",`Your application for ${f} was declined. Reason: ${e}`,{applicationId:t,reason:e});console.log("[DeclineApplication] STEP 5a - Notification creation result:",p)}else console.warn("[DeclineApplication] STEP 4b - Could not fetch application for notification")}catch(l){console.error("[DeclineApplication] STEP 5 - NOTIFICATION FAILED (non-fatal):",l)}return console.log(`[DeclineApplication] ========== SUCCESS ==========
`),{success:!0,message:"Application declined successfully"}}catch(r){return console.error("[DeclineApplication] ========== FATAL ERROR =========="),console.error("[DeclineApplication] Error details:",r),console.log("[DeclineApplication] Stack:",r.stack),{success:!1,error:r.message||"Failed to decline application"}}}function VC({userId:t,userRole:e}){const[i,r]=M.useState([]),[o,l]=M.useState(0),[u,f]=M.useState(!1),[p,h]=M.useState(!1),_=e==="admin"||e==="staff";M.useEffect(()=>{if(!t){console.log("[NotificationBell] No userId provided");return}const x=async()=>{console.log("[NotificationBell] Loading for user:",t,"role:",e),h(!0);try{if(_){const C=await Ha();if(console.log("[NotificationBell] Applications Result:",C),C.success){const N=(C.applications||[]).filter(R=>R.status==="Pending");r(N),l(N.length),console.log("[NotificationBell] Pending applications count:",N.length)}}else{const C=await L0(t);console.log("[NotificationBell] Notifications Result:",C),C.success&&(r(C.notifications||[]),l(C.notifications?.length||0),console.log("[NotificationBell] Unread notifications count:",C.notifications?.length||0))}}catch(C){console.error("[NotificationBell] Error loading data:",C)}finally{h(!1)}};x();const E=setInterval(x,1e4);return()=>clearInterval(E)},[t,e,_]);const b=x=>{r(E=>E.filter(C=>C.id!==x)),l(E=>Math.max(0,E-1))};return y.jsxs("div",{className:"relative",children:[y.jsxs("button",{onClick:()=>f(!u),className:"relative p-2 hover:bg-gray-100 rounded-lg transition",title:"Notifications",children:[y.jsx(Qc,{size:24,style:{color:"var(--text-dark)"}}),o>0&&y.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white rounded-full",style:{backgroundColor:"#dc2626"},children:o})]}),u&&y.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",style:{maxHeight:"400px",overflowY:"auto"},children:[y.jsx("div",{className:"p-4 border-b border-gray-200",style:{backgroundColor:"var(--primary-beige)"},children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"font-bold",style:{color:"var(--text-dark)"},children:_?"New Applications":"Notifications"}),y.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-gray-200 rounded",children:y.jsx(zs,{size:18})})]})}),y.jsxs("div",{className:"divide-y divide-gray-200",children:[p&&y.jsx("div",{className:"p-4 text-center",style:{color:"var(--text-light)"},children:"Loading..."}),!p&&i.length===0&&y.jsx("div",{className:"p-6 text-center",style:{color:"var(--text-light)"},children:y.jsx("p",{className:"text-sm",children:_?"No pending applications":"No new notifications"})}),i.map(x=>_?y.jsx("div",{className:"p-4 hover:bg-gray-50 transition",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"p-2 rounded-full shrink-0",style:{backgroundColor:"var(--primary-beige)"},children:y.jsx(Qc,{size:16,style:{color:"var(--accent-warm)"}})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h4",{className:"font-semibold text-sm",style:{color:"var(--text-dark)"},children:"Application Submitted"}),y.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-light)"},children:[y.jsx("strong",{children:x.users?.fullname||"An adopter"})," submitted an application for ",y.jsx("strong",{children:x.pets?.name||"a pet"})]}),y.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--text-lighter)"},children:[new Date(x.created_at).toLocaleDateString()," ",new Date(x.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),y.jsx("div",{className:"flex gap-2 shrink-0",children:y.jsx("button",{onClick:()=>b(x.id),className:"p-1 hover:bg-gray-200 rounded transition",title:"Dismiss",children:y.jsx(zs,{size:16,style:{color:"var(--text-light)"}})})})]})},x.id):y.jsx("div",{className:"p-4 hover:bg-gray-50 transition",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"p-2 rounded-full shrink-0",style:{backgroundColor:"var(--primary-beige)"},children:y.jsx(Qc,{size:16,style:{color:"var(--accent-warm)"}})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h4",{className:"font-semibold text-sm",style:{color:"var(--text-dark)"},children:x.title}),y.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-light)"},children:x.message}),y.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--text-lighter)"},children:[new Date(x.created_at).toLocaleDateString()," ",new Date(x.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),y.jsx("div",{className:"flex gap-2 shrink-0",children:y.jsx("button",{onClick:()=>b(x.id),className:"p-1 hover:bg-gray-200 rounded transition",title:"Dismiss",children:y.jsx(zs,{size:16,style:{color:"var(--text-light)"}})})})]})},x.id))]})]})]})}function j0({toggleSidebar:t}){const{user:e}=Hd(),[i,r]=M.useState(!1),[o,l]=M.useState(!1),u=M.useRef(),f=M.useRef();return M.useEffect(()=>{console.log("[Header] User loaded:",e),e&&(console.log("[Header] User ID:",e.id),console.log("[Header] User role:",e.role))},[e]),M.useEffect(()=>{const p=h=>{u.current&&!u.current.contains(h.target)&&r(!1),f.current&&!f.current.contains(h.target)&&l(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),y.jsxs("header",{className:"flex items-center justify-between bg-white/95 backdrop-blur-sm border-b border-gray-200 px-6 py-3 fixed top-0 left-0 right-0 z-50 md:static shadow-sm",children:[y.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 text-gray-700 transition-colors",onClick:t,children:y.jsx(AC,{size:22})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 rounded-lg bg-linear-amber",children:y.jsx(pi,{size:24,className:"text-white"})}),y.jsx("h1",{className:"text-xl font-bold text-amber-700 hidden sm:block",children:"Pet Peeve"})]}),y.jsxs("div",{className:"flex items-center gap-2 relative",children:[e&&e.id&&y.jsx(VC,{userId:e.id,userRole:e.role}),y.jsxs("div",{className:"relative cursor-pointer hover:bg-gray-100 p-2 rounded-lg text-gray-600 transition-colors",onClick:()=>l(!o),ref:f,children:[y.jsx(PC,{size:20}),o&&y.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden",children:y.jsx("button",{className:"w-full text-left px-4 py-2.5 hover:bg-gray-50 text-gray-800 text-sm transition-colors font-medium",onClick:async()=>{await zC(),window.location.href="/"},children:"Logout"})})]})]})]})}function FC({isOpen:t,setIsOpen:e}){const i=on(),o=Qt().pathname||"/";return y.jsxs(y.Fragment,{children:[t&&y.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm md:hidden z-10",onClick:()=>e(!1)}),y.jsxs("aside",{className:`
          fixed md:static inset-y-0 left-0 w-64 bg-white/95 backdrop-blur-sm border-r border-gray-200 shadow-lg md:shadow-none
          transform transition-all duration-300 z-20 pt-16 md:pt-0 top-0 md:top-auto
          ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,children:[y.jsx("button",{className:"md:hidden p-2.5 m-3 rounded-lg hover:bg-gray-100 text-gray-600 transition-colors",onClick:()=>e(!1),children:y.jsx(zs,{size:20})}),y.jsxs("nav",{className:"mt-4 space-y-1 px-3",children:[y.jsxs("button",{onClick:()=>{i("/admindashboard"),e(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all text-sm font-medium ${o.startsWith("/admindashboard")?"bg-linear-amber text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[y.jsx(P0,{size:18}),y.jsx("span",{children:"Dashboard"})]}),y.jsxs("button",{onClick:()=>{i("/browsepetsadmin"),e(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all text-sm font-medium ${o.startsWith("/browsepetsadmin")?"bg-linear-amber text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[y.jsx(pi,{size:18}),y.jsx("span",{children:"Browse Pets"})]}),y.jsxs("button",{onClick:()=>{i("/applicationadmin"),e(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all text-sm font-medium ${o.startsWith("/applicationadmin")?"bg-linear-amber text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[y.jsx(qs,{size:18}),y.jsx("span",{children:"Applications"})]})]})]})]})}function Fd({children:t}){const[e,i]=M.useState(!1);return y.jsxs("div",{className:"flex min-h-screen bg-light",children:[y.jsx(FC,{isOpen:e,setIsOpen:i}),y.jsxs("div",{className:"flex flex-col flex-1 w-full md:ml-0 ml-0 pt-16 md:pt-0",children:[y.jsx(j0,{toggleSidebar:()=>i(!e)}),y.jsx("main",{className:"p-6 flex-1 overflow-auto",children:t})]})]})}async function $C(){try{const{count:t,error:e}=await ge.from("pets").select("*",{count:"exact",head:!0});if(e)throw e;const{count:i,error:r}=await ge.from("pets").select("*",{count:"exact",head:!0}).eq("status","Available");if(r)throw r;const{count:o,error:l}=await ge.from("pets").select("*",{count:"exact",head:!0}).eq("status","Adopted");if(l)throw l;const{count:u,error:f}=await ge.from("adoption_applications").select("*",{count:"exact",head:!0}).eq("status","Pending");if(f)throw f;const{count:p,error:h}=await ge.from("adoption_applications").select("*",{count:"exact",head:!0});if(h)throw h;const{count:_,error:b}=await ge.from("adoption_applications").select("*",{count:"exact",head:!0}).eq("status","Approved");if(b)throw b;const{count:x,error:E}=await ge.from("users").select("*",{count:"exact",head:!0});if(E)throw E;return{success:!0,total_pets:t||0,available_pets:i||0,adopted_pets:o||0,pending_applications:u||0,total_applications:p||0,approved_applications:_||0,total_users:x||0}}catch(t){return console.error("Error fetching statistics:",t),{success:!1,error:t.message||"Failed to fetch statistics",total_pets:0,available_pets:0,adopted_pets:0,pending_applications:0,total_applications:0,approved_applications:0,total_users:0}}}const qi=({icon:t,label:e,value:i,color:r="var(--accent-warm)"})=>y.jsx("div",{className:"p-8 rounded-2xl shadow-lg",style:{backgroundColor:"var(--white)",border:"1px solid var(--primary-beige)"},children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{style:{color:"var(--text-light)"},className:"text-sm font-medium mb-1",children:e}),y.jsx("p",{style:{color:r},className:"text-3xl font-bold",children:i})]}),y.jsx("span",{className:"text-3xl",children:t})]})});function JC(){const[t,e]=M.useState(null),[i,r]=M.useState(!0),[o,l]=M.useState({message:"",type:"info"});return M.useEffect(()=>{(async()=>{r(!0);const f=await $C();f.success?e(f):l({message:f.error||"Failed to load statistics",type:"error"}),r(!1)})()},[]),y.jsx(Fd,{children:y.jsxs("div",{style:{backgroundColor:"var(--white)",minHeight:"100vh"},children:[y.jsx("div",{style:{backgroundColor:"var(--primary-beige)",padding:"3rem 1.5rem"},children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsx("p",{style:{color:"var(--accent-dark)",fontSize:"0.875rem",fontWeight:"600",marginBottom:"0.5rem"},children:" OVERVIEW"}),y.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"var(--text-dark)",marginBottom:"0.5rem"},children:"Admin Dashboard"}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"1.125rem"},children:"Monitor shelter operations and key statistics"})]})}),y.jsxs("div",{className:"p-6 space-y-8",style:{maxWidth:"1400px",margin:"0 auto"},children:[o.message&&y.jsx(Vi,{message:o.message,type:o.type,onClose:()=>l({message:"",type:"info"})}),i&&y.jsx("p",{style:{color:"var(--text-light)"},children:"Loading statistics..."}),!i&&t&&y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[y.jsx(qi,{icon:"",label:"Total Pets",value:t.total_pets||0,color:"var(--accent-warm)"}),y.jsx(qi,{icon:"",label:"Available",value:t.available_pets||0,color:"#2D7A3A"}),y.jsx(qi,{icon:"",label:"Adopted",value:t.adopted_pets||0,color:"#8B6F47"}),y.jsx(qi,{icon:"",label:"Pending Applications",value:t.pending_applications||0,color:"#D4A574"})]}),!i&&t&&y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[y.jsx(qi,{icon:"",label:"Approved Applications",value:t.approved_applications||0,color:"#2D7A3A"}),y.jsx(qi,{icon:"",label:"Total Applications",value:t.total_applications||0,color:"var(--accent-warm)"}),y.jsx(qi,{icon:"",label:"Total Users",value:t.total_users||0,color:"#8B6F47"})]}),y.jsxs("div",{className:"p-8 rounded-2xl shadow-lg",style:{backgroundColor:"var(--white)",border:"1px solid var(--primary-beige)"},children:[y.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-dark)",marginBottom:"1.5rem"},children:"Quick Actions"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsx("button",{className:"btn-primary py-3 font-semibold",children:" Add New Pet"}),y.jsx("button",{className:"btn-secondary py-3 font-semibold",children:" Review Applications"}),y.jsx("button",{className:"btn-secondary py-3 font-semibold",children:" View Reports"})]})]}),y.jsxs("div",{className:"p-8 rounded-2xl shadow-lg",style:{backgroundColor:"var(--white)",border:"1px solid var(--primary-beige)"},children:[y.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text-dark)",marginBottom:"1.5rem"},children:"Recent Activity"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"pb-3 border-b-2",style:{borderColor:"var(--secondary-beige)"},children:[y.jsxs("p",{style:{color:"var(--text-dark)"},children:[" ",y.jsx("strong",{children:"Buddy"})," was adopted by ",y.jsx("strong",{children:"Mark Johnson"})]}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:"2 hours ago"})]}),y.jsxs("div",{className:"pb-3 border-b-2",style:{borderColor:"var(--secondary-beige)"},children:[y.jsxs("p",{style:{color:"var(--text-dark)"},children:[" New pet ",y.jsx("strong",{children:"Luna"})," added to the shelter"]}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:"5 hours ago"})]}),y.jsxs("div",{className:"pb-3",children:[y.jsxs("p",{style:{color:"var(--text-dark)"},children:[" ",y.jsx("strong",{children:"3 new adoption applications"})," received"]}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:"Yesterday"})]})]})]})]})]})})}function ul({open:t,onClose:e,children:i,width:r="600px",height:o="auto"}){return t?y.jsx("div",{className:"fixed inset-0 z-[9998] flex items-center justify-center bg-black/30 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 relative animate-fade-in",style:{minWidth:"400px",maxWidth:r,width:r,height:o},children:[y.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-xl font-bold",onClick:e,"aria-label":"Close",children:""}),i]})}):null}function yt({children:t,variant:e="primary",className:i="",...r}){const o="inline-flex items-center justify-center rounded-md transition-colors",l={primary:"bg-amber-600 text-white hover:bg-amber-700",secondary:"bg-white border border-gray-200 text-gray-800 hover:bg-gray-50",ghost:"bg-transparent text-gray-800 hover:bg-gray-100"};return y.jsx("button",{className:`${o} ${l[e]||l.primary} ${i}`,...r,children:t})}function YC({isOpen:t,onClose:e,onSubmit:i,loading:r=!1}){const[o,l]=M.useState(null),[u,f]=M.useState({name:"",breed:"",category:"",age:"",gender:"",size:"",color:"",description:"",health_status:"healthy",vaccination_status:"false",neutered_spayed:"false",status:"Available",image_url:""}),p=b=>{f({...u,[b.target.name]:b.target.value})},h=b=>{const x=b.target.files?.[0];if(x){l(x);try{const E=URL.createObjectURL(x);f({...u,_preview:E})}catch{}}},_=async b=>{b.preventDefault(),await i(u,o),f({name:"",breed:"",category:"",age:"",gender:"",size:"",color:"",description:"",health_status:"healthy",vaccination_status:"",neutered_spayed:"false",status:"Available",image_url:""}),l(null)};return y.jsxs(ul,{open:t,onClose:e,width:"700px",height:"auto",children:[y.jsx("h2",{className:"text-2xl font-bold text-amber-700 mb-6",children:"Add New Pet"}),y.jsxs("form",{onSubmit:_,className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Pet Name *"}),y.jsx("input",{type:"text",name:"name",value:u.name,onChange:p,placeholder:"e.g., Max",required:!0,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Category *"}),y.jsxs("select",{name:"category",value:u.category,onChange:p,required:!0,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select category..."}),y.jsx("option",{value:"Dog",children:"Dog"}),y.jsx("option",{value:"Cat",children:"Cat"}),y.jsx("option",{value:"Bird",children:"Bird"}),y.jsx("option",{value:"Rabbit",children:"Rabbit"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Breed"}),y.jsx("input",{type:"text",name:"breed",value:u.breed,onChange:p,placeholder:"e.g., Golden Retriever",className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Gender"}),y.jsxs("select",{name:"gender",value:u.gender,onChange:p,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select..."}),y.jsx("option",{value:"Male",children:"Male"}),y.jsx("option",{value:"Female",children:"Female"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Age"}),y.jsx("input",{type:"text",name:"age",value:u.age,onChange:p,placeholder:"e.g., 2 years",className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Size"}),y.jsxs("select",{name:"size",value:u.size,onChange:p,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select size..."}),y.jsx("option",{value:"small",children:"Small"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"large",children:"Large"}),y.jsx("option",{value:"extra large",children:"Extra Large"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Color"}),y.jsx("input",{type:"text",name:"color",value:u.color,onChange:p,placeholder:"e.g., Brown and white",className:"w-full p-2 border rounded"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Health Status"}),y.jsxs("select",{name:"health_status",value:u.health_status,onChange:p,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"healthy",children:"Healthy"}),y.jsx("option",{value:"sick",children:"Sick"}),y.jsx("option",{value:"recovering",children:"Recovering"}),y.jsx("option",{value:"special_needs",children:"Special Needs"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Vaccination Status"}),y.jsxs("select",{name:"vaccination_status",value:u.vaccination_status||"false",onChange:p,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"false",children:"Not Vaccinated"}),y.jsx("option",{value:"true",children:"Vaccinated"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Neutered / Spayed"}),y.jsxs("select",{name:"neutered_spayed",value:u.neutered_spayed,onChange:p,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"false",children:"Incomplete (False)"}),y.jsx("option",{value:"true",children:"Complete (True)"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Description"}),y.jsx("textarea",{name:"description",value:u.description,onChange:p,placeholder:"Tell us about this pet...",rows:"2",className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Pet Image"}),y.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"w-full p-2 border rounded"}),o&&y.jsxs("div",{className:"mt-2 flex gap-4 items-center",children:[y.jsxs("p",{className:"text-sm text-green-600",children:[" ",o.name," selected"]}),u._preview&&y.jsx("img",{src:u._preview,alt:"preview",className:"w-32 h-24 object-cover rounded border"})]})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx(yt,{type:"submit",variant:"primary",className:"flex-1 py-3 font-semibold",disabled:r,children:r?"Adding...":"Add Pet"}),y.jsx(yt,{type:"button",variant:"secondary",onClick:e,className:"flex-1 py-3 font-semibold",children:"Cancel"})]})]})]})}function KC({isOpen:t,onClose:e,pet:i,onSubmit:r,loading:o=!1}){const[l,u]=M.useState(null),[f,p]=M.useState({name:"",breed:"",category:"",age:"",gender:"",size:"",color:"",description:"",health_status:"healthy",vaccination_status:"false",neutered_spayed:"false",status:"Available",image_url:"",_preview:""});M.useEffect(()=>{i&&(p({...i,neutered_spayed:i.neutered_spayed?"true":"false",health_status:i.health_status||"healthy",_preview:i.image_url}),u(null))},[i,t]);const h=x=>{p({...f,[x.target.name]:x.target.value})},_=x=>{const E=x.target.files?.[0];if(E){u(E);try{const C=URL.createObjectURL(E);p({...f,_preview:C})}catch{}}},b=async x=>{x.preventDefault(),await r(f,l)};return y.jsxs(ul,{open:t,onClose:e,width:"700px",height:"auto",children:[y.jsx("h2",{className:"text-2xl font-bold text-amber-700 mb-6",children:"Edit Pet"}),f&&y.jsxs("form",{onSubmit:b,className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Pet Name *"}),y.jsx("input",{type:"text",name:"name",value:f.name,onChange:h,required:!0,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Category *"}),y.jsxs("select",{name:"category",value:f.category,onChange:h,required:!0,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select category..."}),y.jsx("option",{value:"Dog",children:"Dog"}),y.jsx("option",{value:"Cat",children:"Cat"}),y.jsx("option",{value:"Bird",children:"Bird"}),y.jsx("option",{value:"Rabbit",children:"Rabbit"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Breed"}),y.jsx("input",{type:"text",name:"breed",value:f.breed,onChange:h,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Gender"}),y.jsxs("select",{name:"gender",value:f.gender,onChange:h,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select..."}),y.jsx("option",{value:"Male",children:"Male"}),y.jsx("option",{value:"Female",children:"Female"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Age"}),y.jsx("input",{type:"text",name:"age",value:f.age,onChange:h,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Size"}),y.jsxs("select",{name:"size",value:f.size,onChange:h,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"",children:"Select size..."}),y.jsx("option",{value:"small",children:"Small"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"large",children:"Large"}),y.jsx("option",{value:"extra large",children:"Extra Large"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Color"}),y.jsx("input",{type:"text",name:"color",value:f.color,onChange:h,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Health Status"}),y.jsxs("select",{name:"health_status",value:f.health_status,onChange:h,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"healthy",children:"Healthy"}),y.jsx("option",{value:"sick",children:"Sick"}),y.jsx("option",{value:"recovering",children:"Recovering"}),y.jsx("option",{value:"special_needs",children:"Special Needs"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Vaccination Status"}),y.jsxs("select",{name:"vaccination_status",value:f.vaccination_status||"false",onChange:h,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"false",children:"Not Vaccinated"}),y.jsx("option",{value:"true",children:"Vaccinated"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Neutered / Spayed"}),y.jsxs("select",{name:"neutered_spayed",value:f.neutered_spayed,onChange:h,className:"w-full p-2 border rounded",children:[y.jsx("option",{value:"false",children:"Incomplete (False)"}),y.jsx("option",{value:"true",children:"Complete (True)"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Description"}),y.jsx("textarea",{name:"description",value:f.description,onChange:h,rows:"2",className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"Pet Image"}),y.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"w-full p-2 border rounded"}),l&&y.jsxs("div",{className:"mt-2 flex gap-4 items-center",children:[y.jsxs("p",{className:"text-sm text-green-600",children:[" ",l.name," selected"]}),f._preview&&y.jsx("img",{src:f._preview,alt:"preview",className:"w-32 h-24 object-cover rounded border"})]}),!l&&f._preview&&y.jsx("div",{className:"mt-2",children:y.jsx("img",{src:f._preview,alt:"preview",className:"w-32 h-24 object-cover rounded border"})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx(yt,{type:"submit",variant:"primary",className:"flex-1 py-3 font-semibold",disabled:o,children:o?"Saving...":"Save Changes"}),y.jsx(yt,{type:"button",variant:"secondary",onClick:e,className:"flex-1 py-3 font-semibold",children:"Cancel"})]})]})]})}function QC({pet:t,onEdit:e,onDelete:i,showDeleteButton:r=!1}){return y.jsxs("div",{className:"pet-card shadow-sm rounded-lg overflow-hidden border bg-white",children:[t.image_url?y.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-44 object-cover"}):y.jsxs("div",{className:"w-full h-44 flex items-center justify-center bg-amber-100 text-4xl",children:[t.category==="dog"&&"",t.category==="cat"&&"",t.category==="bird"&&"",t.category==="rabbit"&&"",!t.category&&""]}),y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),y.jsx("p",{className:"text-sm text-gray-500",children:t.breed||"Unknown breed"})]}),y.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="Available"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:t.status})]}),y.jsxs("div",{className:"mt-3 text-sm text-gray-600 space-y-1",children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Category:"})," ",t.category||""]}),t.age&&y.jsxs("div",{children:[y.jsx("strong",{children:"Age:"})," ",t.age]}),t.gender&&y.jsxs("div",{children:[y.jsx("strong",{children:"Gender:"})," ",t.gender]})]}),y.jsxs("div",{className:"mt-4 flex gap-2",children:[y.jsx(yt,{variant:"primary",className:"flex-1 text-sm",onClick:()=>e&&e(t),children:"Edit"}),r&&y.jsx(yt,{variant:"ghost",className:"flex-1 text-sm text-red-600 hover:bg-red-50",onClick:()=>i&&i(t.id),children:"Delete"})]})]})]})}function XC(){const[t,e]=M.useState([]),[i,r]=M.useState([]),[o,l]=M.useState(!0),[u,f]=M.useState(""),[p,h]=M.useState({message:"",type:"info"}),[_,b]=M.useState(""),[x,E]=M.useState(""),[C,N]=M.useState(!1),[R,T]=M.useState(!1),[D,A]=M.useState(null),j=async()=>{l(!0),f("");const G=await Kc();G.success?e(G.pets):f(G.error),l(!1)};M.useEffect(()=>{(async()=>{l(!0),f("");const V=await Kc();V.success?e(V.pets):f(V.error),l(!1)})()},[]),M.useEffect(()=>{let G=t;_&&(G=G.filter(V=>V.name.toLowerCase().includes(_.toLowerCase())||V.breed&&V.breed.toLowerCase().includes(_.toLowerCase()))),x&&(G=G.filter(V=>V.category===x)),r(G)},[_,x,t]);const K=async(G,V)=>{h({message:"",type:"info"}),l(!0);let re="";if(V){const Oe=await Jg(V,`temp-${Date.now()}`);if(Oe.success)re=Oe.imageUrl;else{h({message:"Image upload failed: "+Oe.error,type:"error"}),l(!1);return}}const pe={...G,image_url:re},ce=await YT(pe,null);ce.success?(h({message:"Pet added successfully!",type:"success"}),N(!1),(async()=>{const tt=await Kc();tt.success&&e(tt.pets)})()):h({message:ce.error||"Failed to add pet.",type:"error"}),l(!1)},Q=async(G,V)=>{h({message:"",type:"info"}),l(!0);let re=G.image_url;if(V){const ce=await Jg(V,G.id);if(ce.success)re=ce.imageUrl;else{h({message:"Image upload failed: "+ce.error,type:"error"}),l(!1);return}}const pe=await KT(D.id,{...G,image_url:re});pe.success?(h({message:"Pet updated!",type:"success"}),T(!1),A(null),j()):h({message:pe.error||"Failed to update pet.",type:"error"}),l(!1)},Y=async G=>{if(!window.confirm("Are you sure you want to delete this pet?"))return;l(!0);const V=await QT(G);V.success?(h({message:"Pet deleted successfully!",type:"success"}),j()):h({message:V.error||"Failed to delete pet.",type:"error"}),l(!1)};return y.jsx(Fd,{children:y.jsxs("div",{style:{backgroundColor:"var(--white)",minHeight:"100vh"},children:[y.jsx("div",{style:{backgroundColor:"var(--primary-beige)",padding:"3rem 1.5rem"},children:y.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("p",{style:{color:"var(--accent-dark)",fontSize:"0.875rem",fontWeight:"600",marginBottom:"0.5rem"},children:" MANAGE INVENTORY"}),y.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"var(--text-dark)",marginBottom:"0.5rem"},children:"Pet Management"}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"1.125rem"},children:"View, edit, and add pets to the shelter"})]}),y.jsx(yt,{onClick:()=>N(!0),variant:"primary",className:"px-6 py-3",children:" Add Pet"})]})}),y.jsxs("div",{className:"p-6 space-y-8",style:{maxWidth:"1400px",margin:"0 auto"},children:[p.message&&y.jsx(Vi,{message:p.message,type:p.type,onClose:()=>h({message:"",type:"info"})}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.jsx("input",{type:"text",placeholder:"Search by name or breed...",value:_,onChange:G=>b(G.target.value)}),y.jsxs("select",{value:x,onChange:G=>E(G.target.value),children:[y.jsx("option",{value:"",children:"All Categories"}),y.jsx("option",{value:"dog",children:" Dogs"}),y.jsx("option",{value:"cat",children:" Cats"}),y.jsx("option",{value:"bird",children:" Birds"}),y.jsx("option",{value:"rabbit",children:" Rabbits"})]}),y.jsx(yt,{onClick:j,variant:"secondary",className:"font-semibold",children:" Refresh"})]}),o&&y.jsx("p",{style:{color:"var(--text-light)"},children:"Loading pets..."}),!o&&i.length>0&&y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(G=>y.jsx(QC,{pet:G,onEdit:V=>{A(V),T(!0)},onDelete:Y,showDeleteButton:!0},G.id))}),!o&&i.length===0&&!u&&y.jsxs("div",{className:"text-center py-12",children:[y.jsx("p",{className:"text-2xl mb-2",children:""}),y.jsx("p",{style:{color:"var(--text-light)"},children:"No pets found. Try adjusting your filters or add a new pet."})]}),y.jsx(YC,{isOpen:C,onClose:()=>N(!1),onSubmit:K,loading:o}),y.jsx(KC,{isOpen:R,onClose:()=>T(!1),pet:D,onSubmit:Q,loading:o})]})]})})}const WC="modulepreload",ZC=function(t){return"/"+t},Qg={},$d=function(e,i,r){let o=Promise.resolve();if(i&&i.length>0){let h=function(_){return Promise.all(_.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var u=h;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");o=h(i.map(_=>{if(_=ZC(_),_ in Qg)return;Qg[_]=!0;const b=_.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${x}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":WC,b||(E.as="script"),E.crossOrigin="",E.href=_,p&&E.setAttribute("nonce",p),document.head.appendChild(E),b)return new Promise((C,N)=>{E.addEventListener("load",C),E.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return o.then(f=>{for(const p of f||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function eA(){const{user:t}=Hd(),[e,i]=M.useState([]),[r,o]=M.useState(!0),[l,u]=M.useState("Pending"),[f,p]=M.useState({message:"",type:"info"}),[h,_]=M.useState(!1),[b,x]=M.useState(""),[E,C]=M.useState(null);M.useEffect(()=>{(async()=>{o(!0);const j=await Ha();j.success?i(j.applications):p({message:j.error||"Failed to load applications",type:"error"}),o(!1)})()},[]);const N=async(A,j)=>{o(!0);const K=await HC(A,j,t?.id);if(K.success){try{const{createNotification:Y}=await $d(async()=>{const{createNotification:V}=await Promise.resolve().then(()=>Vd);return{createNotification:V}},[]),G=e.find(V=>V.id===A);G&&await Y(G.user_id,"application_approved","Application Approved",`Your application for ${G.pets?.name||"a pet"} has been approved! Congratulations!`,{applicationId:A,petName:G.pets?.name})}catch(Y){console.error("[AdminApp] Error notifying adopter of approval:",Y)}p({message:"Application approved!",type:"success"});const Q=await Ha();Q.success&&i(Q.applications)}else p({message:K.error||"Failed to approve application",type:"error"});o(!1)},R=A=>{console.log("[AdminApp] ===== DECLINE BUTTON CLICKED ====="),console.log("[AdminApp] App data:",A),console.log("[AdminApp] App ID:",A?.id),console.log("[AdminApp] Setting selectedAppForDecline and showing modal"),C(A),x(""),_(!0),console.log("[AdminApp] State updated - should show modal")},T=async()=>{if(console.log("[AdminApp] ===== DECLINE SUBMIT CLICKED ====="),console.log("[AdminApp] Decline reason entered:",b),console.log("[AdminApp] Selected app:",E),console.log("[AdminApp] Selected app ID:",E?.id),console.log("[AdminApp] User ID:",t?.id),!b.trim()){console.log("[AdminApp] VALIDATION FAILED - No reason provided"),p({message:"Please provide a reason for declining",type:"error"});return}if(!E?.id){console.log("[AdminApp] VALIDATION FAILED - No app selected"),p({message:"No application selected",type:"error"});return}if(!t?.id){console.log("[AdminApp] VALIDATION FAILED - No user ID"),p({message:"User not authenticated",type:"error"});return}o(!0),console.log("[AdminApp] CALLING declineApplication with:",{applicationId:E.id,reason:b,reviewedByUserId:t?.id});try{const A=await GC(E.id,b,t?.id);if(console.log("[AdminApp] ===== DECLINE RESULT =====",A),A.success){console.log("[AdminApp] SUCCESS - Reloading applications"),p({message:"Application declined",type:"success"});const j=await Ha();j.success&&i(j.applications),_(!1),x(""),C(null),console.log("[AdminApp] SUCCESS - Modal closed and state cleared")}else console.log("[AdminApp] FAILED - Error:",A.error),p({message:A.error||"Failed to decline application",type:"error"})}catch(A){console.log("[AdminApp] EXCEPTION in handleDeclineSubmit:",A),p({message:"Exception: "+A.message,type:"error"})}o(!1)},D=e.filter(A=>!l||A.status===l);return y.jsx(Fd,{children:y.jsxs("div",{style:{backgroundColor:"var(--white)",minHeight:"100vh"},children:[y.jsx("div",{style:{backgroundColor:"var(--primary-beige)",padding:"3rem 1.5rem"},children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsx("p",{style:{color:"var(--accent-dark)",fontSize:"0.875rem",fontWeight:"600",marginBottom:"0.5rem"},children:" MANAGE APPLICATIONS"}),y.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"var(--text-dark)",marginBottom:"0.5rem"},children:"Adoption Applications"}),y.jsx("p",{style:{color:"var(--text-light)",fontSize:"1.125rem"},children:"Review and manage pending adoption requests"})]})}),y.jsxs("div",{className:"p-6 space-y-8",style:{maxWidth:"1400px",margin:"0 auto"},children:[f.message&&y.jsx(Vi,{message:f.message,type:f.type,onClose:()=>p({message:"",type:"info"})}),y.jsx("div",{className:"flex gap-4",children:["Pending","Approved","Declined"].map(A=>y.jsxs("button",{onClick:()=>u(A===l?"":A),className:`px-6 py-2 rounded-lg font-semibold transition ${l===A?"btn-primary":"btn-secondary"}`,children:[A," ",A==="Pending"&&`(${e.filter(j=>j.status==="Pending").length})`]},A))}),r&&y.jsx("p",{style:{color:"var(--text-light)"},children:"Loading applications..."}),!r&&D.length>0&&y.jsx("div",{className:"space-y-4",children:D.map(A=>y.jsx("div",{className:"p-8 rounded-2xl shadow-lg",style:{backgroundColor:"var(--white)",border:"1px solid var(--primary-beige)",borderLeft:`4px solid ${A.status==="Pending"?"var(--accent-warm)":A.status==="Approved"?"#2D7A3A":"#8B4513"}`},children:y.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--text-dark)"},children:A.users?.fullname||"Unknown User"}),y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"14px"},children:["Applied for ",y.jsx("strong",{children:A.pets?.name||"Unknown Pet"})," (",A.pets?.category,")"]})]}),y.jsx("span",{className:"px-4 py-2 rounded-full text-sm font-bold",style:{backgroundColor:A.status==="Approved"?"#D4F1D4":A.status==="Declined"?"#FFE8D4":"var(--primary-beige)",color:A.status==="Approved"?"#2D7A3A":A.status==="Declined"?"#8B4513":"var(--accent-dark)"},children:A.status})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[y.jsx("div",{children:y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:[y.jsx("strong",{children:"Email:"})," ",A.users?.email||"N/A"]})}),y.jsx("div",{children:y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:[y.jsx("strong",{children:"Phone:"})," ",A.users?.phone_number||"N/A"]})})]}),A.living_situation&&y.jsxs("div",{className:"space-y-2 mb-4",children:[y.jsx("div",{className:"section-subtitle",style:{marginTop:"0"},children:"Application Details"}),y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"13px"},children:[y.jsx("strong",{children:"Living Situation:"})," ",A.living_situation]}),A.reason&&y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"13px"},children:[y.jsx("strong",{children:"Why they want to adopt:"})," ",A.reason.substring(0,200),"..."]})]}),y.jsxs("p",{style:{color:"var(--text-light)",fontSize:"12px"},children:["Submitted ",new Date(A.created_at).toLocaleDateString()]})]}),A.status==="Pending"&&y.jsxs("div",{className:"flex gap-3",children:[y.jsx(yt,{onClick:()=>N(A.id,A.pet_id),variant:"primary",className:"px-6 py-2 whitespace-nowrap",style:{backgroundColor:"#2D7A3A"},children:" Approve"}),y.jsx(yt,{onClick:()=>R(A),variant:"ghost",className:"px-6 py-2 whitespace-nowrap text-red-600 hover:bg-red-50",children:" Decline"})]})]})},A.id))}),!r&&D.length===0&&!f.message&&y.jsxs("div",{className:"text-center py-12",children:[y.jsx("p",{className:"text-2xl mb-2",children:""}),y.jsxs("p",{style:{color:"var(--text-light)"},children:["No ",l?l.toLowerCase():""," applications found."]})]})]}),E&&y.jsx(ul,{open:h,onClose:()=>_(!1),children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{children:y.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Declining application from ",y.jsx("strong",{children:E.users?.fullname})," for"," ",y.jsx("strong",{children:E.pets?.name})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Declining *"}),y.jsx("textarea",{value:b,onChange:A=>x(A.target.value),placeholder:"Provide a reason for declining this application...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",rows:"4"})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx(yt,{onClick:()=>_(!1),variant:"secondary",className:"flex-1",children:"Cancel"}),y.jsx(yt,{onClick:T,variant:"primary",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:r,children:r?"Processing...":"Decline Application"})]})]}),width:500})]})})}function tA({isOpen:t,setIsOpen:e}){const i=on(),o=Qt().pathname||"/";return y.jsxs(y.Fragment,{children:[t&&y.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm md:hidden z-10",onClick:()=>e(!1)}),y.jsxs("aside",{className:`
          fixed md:static inset-y-0 left-0 w-64 bg-white/95 backdrop-blur-sm border-r border-gray-200 shadow-lg md:shadow-none
          transform transition-all duration-300 z-20 pt-16 md:pt-0 top-0 md:top-auto
          ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,children:[y.jsx("button",{className:"md:hidden p-2.5 m-3 rounded-lg hover:bg-gray-100 text-gray-600 transition-colors",onClick:()=>e(!1),children:y.jsx(zs,{size:20})}),y.jsxs("nav",{className:"mt-4 space-y-1 px-3",children:[y.jsxs("button",{onClick:()=>{i("/browsepet"),e(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all text-sm font-medium ${o.startsWith("/browsepet")?"bg-linear-amber text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[y.jsx(pi,{size:18}),y.jsx("span",{children:"Browse Pets"})]}),y.jsxs("button",{onClick:()=>{i("/application"),e(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all text-sm font-medium ${o.startsWith("/application")?"bg-linear-amber text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[y.jsx(qs,{size:18}),y.jsx("span",{children:"My Applications"})]})]})]})]})}function Hs({children:t}){const[e,i]=M.useState(!1);return y.jsxs("div",{className:"flex min-h-screen bg-light",children:[y.jsx(tA,{isOpen:e,setIsOpen:i}),y.jsxs("div",{className:"flex flex-col flex-1 w-full md:ml-0 ml-0 pt-16 md:pt-0",children:[y.jsx(j0,{toggleSidebar:()=>i(!e)}),y.jsx("main",{className:"p-6 flex-1 overflow-auto",children:t})]})]})}function nA(){const t=on(),[e,i]=M.useState([]),[r,o]=M.useState([]),[l,u]=M.useState(!1),[f,p]=M.useState(""),[h,_]=M.useState(""),[b,x]=M.useState(""),[E,C]=M.useState(""),N=async()=>{u(!0),p("");try{const T=await jd();T&&T.success?i(T.pets||[]):p(T?.error||"Failed to load pets")}catch{p("Failed to load pets"),i([])}finally{u(!1)}};M.useEffect(()=>{N()},[]),M.useEffect(()=>{let T=e.slice();if(h.trim()){const D=h.toLowerCase();T=T.filter(A=>(A.name||"").toLowerCase().includes(D)||(A.breed||"").toLowerCase().includes(D))}b&&(T=T.filter(D=>D.category===b)),E&&(T=T.filter(D=>D.status===E)),o(T)},[e,h,b,E]);const R=T=>t(`/pet/${T}`);return y.jsx(Hs,{children:y.jsxs("div",{className:"min-h-screen bg-light",children:[y.jsx("div",{className:"bg-linear-amber px-6 py-20",children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm mb-6",children:[y.jsx(Wa,{size:16,className:"text-white"}),y.jsx("span",{className:"text-sm font-bold text-white",children:"FIND PETS"})]}),y.jsx("h1",{className:"text-5xl font-extrabold text-white mb-4",children:"Find Your Perfect Pet"}),y.jsx("p",{className:"text-xl text-white/90",children:"Browse our available pets and find your new best friend"})]})}),y.jsx("div",{className:"px-6 py-12",children:y.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsx("div",{className:"md:col-span-2",children:y.jsxs("div",{className:"relative",children:[y.jsx("input",{className:"w-full px-6 py-4 rounded-xl border border-gray-200 bg-white focus:border-amber-400 focus:ring-4 focus:ring-amber-50 outline-none transition-all",placeholder:"Search by name or breed...",value:h,onChange:T=>_(T.target.value)}),y.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-amber-500",children:y.jsx(Wa,{size:18})})]})}),y.jsxs("select",{className:"px-6 py-4 rounded-xl border border-gray-200 bg-white",value:b,onChange:T=>x(T.target.value),children:[y.jsx("option",{value:"",children:"All Categories"}),y.jsx("option",{value:"Dog",children:" Dogs"}),y.jsx("option",{value:"Cat",children:" Cats"}),y.jsx("option",{value:"Bird",children:" Birds"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Category"}),y.jsxs("select",{className:"w-full p-2 border rounded",value:b,onChange:T=>x(T.target.value),children:[y.jsx("option",{value:"",children:"All Categories"}),y.jsx("option",{value:"Dog",children:" Dogs"}),y.jsx("option",{value:"Cat",children:" Cats"}),y.jsx("option",{value:"Bird",children:" Birds"}),y.jsx("option",{value:"Rabbit",children:" Rabbits"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Status"}),y.jsxs("select",{className:"w-full p-2 border rounded",value:E,onChange:T=>C(T.target.value),children:[y.jsx("option",{value:"",children:"All Status"}),y.jsx("option",{value:"Available",children:"Available"}),y.jsx("option",{value:"Pending",children:"Pending"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Actions"}),y.jsx("button",{className:"btn-secondary w-full font-semibold p-2 rounded",onClick:N,children:" Refresh"})]}),y.jsx("div",{})]}),f&&y.jsx("div",{className:"alert-error",children:f}),l&&y.jsx("div",{className:"text-center py-12 text-amber-700",children:"Loading pets..."}),!l&&r.length>0&&y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(T=>y.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-md hover:translate-y-1 transition-transform",onClick:()=>R(T.id),children:[T.image_url?y.jsx("img",{src:T.image_url,alt:T.name,className:"w-full h-48 object-cover"}):y.jsx("div",{className:"h-48 bg-linear-amber-br flex items-center justify-center text-6xl",children:T.category==="Dog"?"":T.category==="Cat"?"":T.category==="Bird"?"":""}),y.jsxs("div",{className:"p-6 space-y-3",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsx("h3",{className:"text-2xl font-semibold text-amber-900",children:T.name}),y.jsx(U0,{size:22,className:"text-amber-400 hover:text-red-500 cursor-pointer transition-colors"})]}),y.jsxs("div",{className:"space-y-1 text-sm text-amber-700",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Category:"})," ",T.category]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Breed:"})," ",T.breed]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Age:"})," ",T.age]})]}),y.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full text-xs font-semibold bg-green-50 text-green-700",children:T.status}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{className:"w-full py-3 rounded-xl font-semibold bg-linear-amber text-white hover:shadow-md transition-all",onClick:D=>{D.stopPropagation(),R(T.id)},children:"View Details"})})]})]},T.id))})]})})]})})}function iA(){const[t,e]=M.useState(null),[i,r]=M.useState(!0),[o,l]=M.useState(null);return M.useEffect(()=>{let u=!0;(async()=>{try{const{data:h}=await ge.auth.getUser();u&&(h?.user?e(h.user):e(null))}catch(h){u&&(l(h.message),e(null))}finally{u&&r(!1)}})();const{data:p}=ge.auth.onAuthStateChange((h,_)=>{u&&(_?.user?e(_.user):e(null))});return()=>{u=!1,p?.subscription?.unsubscribe()}},[]),{user:t,loading:i,error:o}}function sA({isOpen:t,onClose:e,pet:i,onSubmit:r,loading:o=!1}){const[l,u]=M.useState({living_situation:"",home_type:"",rent_or_own:"",landlord_allows_pets:"",household_members:"",children_ages:"",other_pets_description:"",reason_for_adoption:"",daily_schedule:"",veterinary_reference:"",personal_reference:""}),[f,p]=M.useState({});M.useEffect(()=>{t&&(u({living_situation:"",home_type:"",rent_or_own:"",landlord_allows_pets:"",household_members:"",children_ages:"",other_pets_description:"",reason_for_adoption:"",daily_schedule:"",veterinary_reference:"",personal_reference:""}),p({}))},[t]);const h=x=>{const{name:E,value:C}=x.target;u(N=>({...N,[E]:C})),f[E]&&p(N=>({...N,[E]:""}))},_=()=>{const x={};return l.living_situation.trim()||(x.living_situation="Living situation is required"),l.home_type.trim()||(x.home_type="Home type is required"),l.rent_or_own.trim()||(x.rent_or_own="Please select rent or own"),l.rent_or_own==="rent"&&!l.landlord_allows_pets&&(x.landlord_allows_pets="Required for renters"),l.household_members||(x.household_members="Household members is required"),l.reason_for_adoption.trim()||(x.reason_for_adoption="Reason for adoption is required"),l.daily_schedule.trim()||(x.daily_schedule="Daily schedule is required"),l.veterinary_reference.trim()||(x.veterinary_reference="Veterinary reference is required"),p(x),Object.keys(x).length===0},b=x=>{x.preventDefault(),_()&&r(l)};return t?y.jsx(ul,{isOpen:t,onClose:e,title:`Apply for ${i?.name||"Pet"}`,width:700,height:"auto",children:y.jsxs("form",{onSubmit:b,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Living Situation *"}),y.jsx("textarea",{name:"living_situation",value:l.living_situation,onChange:h,placeholder:"Describe your living situation (e.g., apartment, house, farm)",className:`w-full px-3 py-2 border rounded-md text-sm ${f.living_situation?"border-red-500":"border-gray-300"}`,rows:"2"}),f.living_situation&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.living_situation})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Home Type *"}),y.jsxs("select",{name:"home_type",value:l.home_type,onChange:h,className:`w-full px-3 py-2 border rounded-md text-sm ${f.home_type?"border-red-500":"border-gray-300"}`,children:[y.jsx("option",{value:"",children:"-- Select Home Type --"}),y.jsx("option",{value:"House",children:"House"}),y.jsx("option",{value:"Apartment",children:"Apartment"}),y.jsx("option",{value:"Condo",children:"Condo"}),y.jsx("option",{value:"Farm",children:"Farm"}),y.jsx("option",{value:"Other",children:"Other"})]}),f.home_type&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.home_type})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rent or Own *"}),y.jsxs("select",{name:"rent_or_own",value:l.rent_or_own,onChange:h,className:`w-full px-3 py-2 border rounded-md text-sm ${f.rent_or_own?"border-red-500":"border-gray-300"}`,children:[y.jsx("option",{value:"",children:"-- Select --"}),y.jsx("option",{value:"own",children:"Own"}),y.jsx("option",{value:"rent",children:"Rent"})]}),f.rent_or_own&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.rent_or_own})]}),l.rent_or_own==="rent"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landlord Allows Pets *"}),y.jsxs("select",{name:"landlord_allows_pets",value:l.landlord_allows_pets,onChange:h,className:`w-full px-3 py-2 border rounded-md text-sm ${f.landlord_allows_pets?"border-red-500":"border-gray-300"}`,children:[y.jsx("option",{value:"",children:"-- Select --"}),y.jsx("option",{value:"yes",children:"Yes"}),y.jsx("option",{value:"no",children:"No"}),y.jsx("option",{value:"pending",children:"Pending Approval"})]}),f.landlord_allows_pets&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.landlord_allows_pets})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Household Members *"}),y.jsx("input",{type:"number",name:"household_members",value:l.household_members,onChange:h,placeholder:"Number of people in household",min:"1",className:`w-full px-3 py-2 border rounded-md text-sm ${f.household_members?"border-red-500":"border-gray-300"}`}),f.household_members&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.household_members})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Children Ages (if any)"}),y.jsx("input",{type:"text",name:"children_ages",value:l.children_ages,onChange:h,placeholder:"e.g., 5, 8, 12 (leave blank if no children)",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Pets Description"}),y.jsx("textarea",{name:"other_pets_description",value:l.other_pets_description,onChange:h,placeholder:"Describe any other pets you have",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",rows:"2"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Adoption *"}),y.jsx("textarea",{name:"reason_for_adoption",value:l.reason_for_adoption,onChange:h,placeholder:"Why do you want to adopt this pet?",className:`w-full px-3 py-2 border rounded-md text-sm ${f.reason_for_adoption?"border-red-500":"border-gray-300"}`,rows:"2"}),f.reason_for_adoption&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.reason_for_adoption})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Schedule *"}),y.jsx("textarea",{name:"daily_schedule",value:l.daily_schedule,onChange:h,placeholder:"Describe a typical day for the pet (e.g., alone 8 hours for work, etc.)",className:`w-full px-3 py-2 border rounded-md text-sm ${f.daily_schedule?"border-red-500":"border-gray-300"}`,rows:"2"}),f.daily_schedule&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.daily_schedule})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Veterinary Reference (Name & Contact) *"}),y.jsx("input",{type:"text",name:"veterinary_reference",value:l.veterinary_reference,onChange:h,placeholder:"Vet name and phone number",className:`w-full px-3 py-2 border rounded-md text-sm ${f.veterinary_reference?"border-red-500":"border-gray-300"}`}),f.veterinary_reference&&y.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.veterinary_reference})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Personal Reference (Name & Contact)"}),y.jsx("input",{type:"text",name:"personal_reference",value:l.personal_reference,onChange:h,placeholder:"Reference name and phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx(yt,{onClick:e,variant:"secondary",className:"flex-1",children:"Cancel"}),y.jsx(yt,{type:"submit",variant:"primary",className:"flex-1",disabled:o,children:o?"Submitting...":"Submit Application"})]})]})}):null}function rA(){const{id:t}=CS(),e=on(),{user:i}=iA(),[r,o]=M.useState(null),[l,u]=M.useState(!0),[f,p]=M.useState(""),[h,_]=M.useState(!1),[b,x]=M.useState({message:"",type:"info"}),[E,C]=M.useState(!1);M.useEffect(()=>{(async()=>{if(u(!0),p(""),!t){p("Pet ID not found"),u(!1);return}try{const T=await JT(t);T.success&&T.pet?o(T.pet):p(T.error||"Pet not found")}catch{p("Failed to load pet details")}finally{u(!1)}})()},[t]);const N=async R=>{C(!0);try{if(!i||!i.id){x({message:"You must be logged in to apply",type:"error"}),C(!1);return}const T=await q0({pet_id:r.id,...R},i.id);if(T.success){await Gd(r.id,r.name,i.id,i.fullname||i.email||"An adopter");const{createNotification:D}=await $d(async()=>{const{createNotification:A}=await Promise.resolve().then(()=>Vd);return{createNotification:A}},void 0);await D(i.id,"application_submitted","Application Submitted",`The application for ${r.name} has been submitted`,{pet_id:r.id,pet_name:r.name}),x({message:"Application submitted successfully! Admins have been notified.",type:"success"}),_(!1),setTimeout(()=>{e("/browsepet")},2e3)}else x({message:T.error||"Failed to submit application",type:"error"})}catch(T){console.error("Error submitting application:",T),x({message:"Error submitting application",type:"error"})}finally{C(!1)}};return l?y.jsx(Hs,{children:y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx("p",{className:"text-amber-700 text-lg",children:"Loading pet details..."})})}):f||!r?y.jsx(Hs,{children:y.jsx("div",{className:"min-h-screen bg-light px-6 py-12",children:y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsxs("button",{onClick:()=>e("/browsepet"),className:"flex items-center gap-2 text-amber-600 hover:text-amber-800 mb-6 font-semibold",children:[y.jsx(Xa,{size:20}),"Back to Browse"]}),y.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:y.jsx("p",{className:"text-red-700 text-lg",children:f||"Pet not found"})})]})})}):y.jsx(Hs,{children:y.jsxs("div",{className:"min-h-screen bg-light",children:[y.jsx("div",{className:"px-6 py-12",children:y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsxs("button",{onClick:()=>e("/browsepet"),className:"flex items-center gap-2 text-amber-600 hover:text-amber-800 mb-6 font-semibold",children:[y.jsx(Xa,{size:20}),"Back to Browse"]}),b.message&&y.jsx(Vi,{message:b.message,type:b.type,onClose:()=>x({message:"",type:"info"})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[y.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm",children:r.image_url?y.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}):y.jsx("div",{className:"h-96 bg-linear-amber-br flex items-center justify-center text-9xl",children:r.category==="dog"?"":r.category==="cat"?"":r.category==="bird"?"":r.category==="rabbit"?"":""})}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-5xl font-bold text-amber-900 mb-2",children:r.name}),y.jsx("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold ${r.status==="Available"?"bg-green-100 text-green-800":r.status==="Adopted"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:r.status})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Category"}),y.jsx("p",{className:"text-lg font-bold text-amber-900 capitalize",children:r.category})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Breed"}),y.jsx("p",{className:"text-lg font-bold text-amber-900",children:r.breed||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Age"}),y.jsx("p",{className:"text-lg font-bold text-amber-900",children:r.age||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Gender"}),y.jsx("p",{className:"text-lg font-bold text-amber-900 capitalize",children:r.gender||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Size"}),y.jsx("p",{className:"text-lg font-bold text-amber-900 capitalize",children:r.size||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Color"}),y.jsx("p",{className:"text-lg font-bold text-amber-900",children:r.color||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Health Status"}),y.jsx("p",{className:"text-lg font-bold text-amber-900 capitalize",children:r.health_status||""})]}),y.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[y.jsx("p",{className:"text-sm text-amber-700 font-semibold",children:"Vaccinated"}),y.jsx("p",{className:"text-lg font-bold text-amber-900",children:r.vaccination_status?"Yes ":"No"})]})]}),r.description&&y.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[y.jsxs("h3",{className:"font-bold text-amber-900 mb-3",children:["About ",r.name]}),y.jsx("p",{className:"text-amber-800 leading-relaxed",children:r.description})]}),r.status==="Available"&&y.jsx(yt,{onClick:()=>e("/application",{state:{pet_id:r.id}}),variant:"primary",className:"w-full py-4 text-lg font-bold",children:" Apply to Adopt"}),r.status!=="Available"&&y.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:y.jsx("p",{className:"text-yellow-800 font-semibold",children:"This pet is no longer available"})})]})]})]})}),y.jsx(sA,{isOpen:h,onClose:()=>_(!1),pet:r,onSubmit:N,loading:E})]})})}function oA(){const{user:t,loading:e}=Hd(),i=Qt(),[r,o]=M.useState({pet_id:"",living_situation:"",home_type:"",rent_or_own:"",landlord_allows_pets:"",household_members:"",children_ages:"",other_pets_description:"",reason_for_adoption:"",daily_schedule:"",veterinary_reference:"",personal_reference:""}),[l,u]=M.useState(!1),[f,p]=M.useState(!1),[h,_]=M.useState(""),[b,x]=M.useState([]),[E,C]=M.useState([]),[N,R]=M.useState({message:"",type:"info"}),[T,D]=M.useState({});M.useEffect(()=>{(async()=>{const V=await jd();V.success&&x(V.pets||[])})()},[]),M.useEffect(()=>{if(i?.state?.pet_id){o(G=>({...G,pet_id:i.state.pet_id}));return}try{const V=new URLSearchParams(window.location.search).get("pet_id");V&&o(re=>({...re,pet_id:V}))}catch{}},[i]),M.useEffect(()=>{t?.id&&(async()=>{const V=await Kg(t.id);V.success&&C(V.applications||[])})()},[t?.id]);const A=G=>{const{name:V,value:re}=G.target;o({...r,[V]:re}),T[V]&&D({...T,[V]:""})},j=()=>{const G={};return r.pet_id||(G.pet_id="Please select a pet"),r.living_situation.trim()||(G.living_situation="Living situation is required"),r.home_type||(G.home_type="Home type is required"),r.rent_or_own||(G.rent_or_own="Please select rent or own"),r.rent_or_own==="rent"&&!r.landlord_allows_pets&&(G.landlord_allows_pets="Required for renters"),r.household_members||(G.household_members="Household members is required"),r.reason_for_adoption.trim()||(G.reason_for_adoption="Reason for adoption is required"),r.daily_schedule.trim()||(G.daily_schedule="Daily schedule is required"),r.veterinary_reference.trim()||(G.veterinary_reference="Veterinary reference is required"),D(G),Object.keys(G).length===0},K=async G=>{if(G.preventDefault(),!j()){R({message:"Please fill in all required fields",type:"error"});return}if(!t?.id){R({message:"You must be logged in to apply",type:"error"});return}p(!0);try{const V={...r};r.rent_or_own!=="rent"&&(V.landlord_allows_pets=null),V.household_members&&(V.household_members=parseInt(V.household_members));const re=await q0(V,t.id);if(re.success){const pe=b.find(tt=>tt.id===r.pet_id);await Gd(r.pet_id,pe?.name||"a pet",t.id,t.user_metadata?.fullname||t.email||"An adopter");const{createNotification:ce}=await $d(async()=>{const{createNotification:tt}=await Promise.resolve().then(()=>Vd);return{createNotification:tt}},void 0);await ce(t.id,"application_submitted","Application Submitted",`The application for ${pe?.name||"a pet"} has been submitted`,{pet_id:r.pet_id,pet_name:pe?.name}),R({message:"Application submitted successfully! Admins have been notified.",type:"success"}),o({pet_id:"",living_situation:"",home_type:"",rent_or_own:"",landlord_allows_pets:"",household_members:"",children_ages:"",other_pets_description:"",reason_for_adoption:"",daily_schedule:"",veterinary_reference:"",personal_reference:""}),D({});const Oe=await Kg(t.id);Oe.success&&C(Oe.applications||[])}else R({message:re.error||"Failed to submit application",type:"error"})}catch(V){console.error("Error submitting application:",V),R({message:"Error submitting application",type:"error"})}finally{p(!1)}},Q=G=>G==="Approved"?y.jsx(kn,{size:16}):G==="Declined"?y.jsx(zd,{size:16}):y.jsx(pC,{size:16}),Y=G=>G==="Approved"?"from-green-500 to-emerald-500":G==="Declined"?"from-red-500 to-orange-500":"from-amber-500 to-orange-500";return e?y.jsx(Hs,{children:y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx("p",{className:"text-amber-700 text-lg",children:"Loading..."})})}):y.jsx(Hs,{children:y.jsxs("div",{className:"min-h-screen bg-linear-to-br from-amber-50 via-white to-orange-50",children:[y.jsx("div",{className:"bg-linear-to-r from-amber-500 to-orange-500 px-6 py-20",children:y.jsxs("div",{className:"max-w-7xl mx-auto",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/20 backdrop-blur-sm mb-6",children:[y.jsx(qs,{size:16,className:"text-white"}),y.jsx("span",{className:"text-sm font-bold text-white",children:"ADOPT A PET"})]}),y.jsx("h1",{className:"text-5xl font-black text-white mb-4",children:"Start Your Adoption Journey"}),y.jsx("p",{className:"text-xl text-white/90",children:"Complete the application form and we'll review your request"})]})}),y.jsx("div",{className:"px-6 py-12",children:y.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[N.message&&y.jsx(Vi,{message:N.message,type:N.type,onClose:()=>R({message:"",type:"info"})}),y.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-amber-100 shadow-2xl",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-linear-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:y.jsx(qs,{size:24,className:"text-white"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl font-black text-amber-900",children:"Adoption Application"}),y.jsx("p",{className:"text-amber-600 text-sm mt-1",children:"All fields marked with * are required"})]})]}),y.jsxs("form",{onSubmit:K,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-3",children:[y.jsx(pi,{size:16}),"Select Pet *"]}),y.jsxs("select",{name:"pet_id",value:r.pet_id,onChange:A,className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.pet_id?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all font-medium text-amber-900`,children:[y.jsx("option",{value:"",children:"Choose a pet..."}),b.map(G=>y.jsxs("option",{value:G.id,children:[G.name," (",G.category,")"]},G.id))]}),T.pet_id&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.pet_id})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-3",children:[y.jsx(P0,{size:16}),"Living Situation *"]}),y.jsx("textarea",{name:"living_situation",value:r.living_situation,onChange:A,placeholder:"Describe your living situation (e.g., apartment, house, farm)",className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.living_situation?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all resize-none`,rows:"2"}),T.living_situation&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.living_situation})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Home Type *"}),y.jsxs("select",{name:"home_type",value:r.home_type,onChange:A,className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.home_type?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all`,children:[y.jsx("option",{value:"",children:"-- Select --"}),y.jsx("option",{value:"apartment",children:" Apartment"}),y.jsx("option",{value:"house",children:" House"}),y.jsx("option",{value:"condo",children:" Condo"}),y.jsx("option",{value:"farm",children:" Farm"}),y.jsx("option",{value:"other",children:" Other"})]}),T.home_type&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.home_type})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Rent or Own *"}),y.jsxs("select",{name:"rent_or_own",value:r.rent_or_own,onChange:A,className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.rent_or_own?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all`,children:[y.jsx("option",{value:"",children:"-- Select --"}),y.jsx("option",{value:"own",children:"Own"}),y.jsx("option",{value:"rent",children:"Rent"})]}),T.rent_or_own&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.rent_or_own})]})]}),r.rent_or_own==="rent"&&y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Landlord Allows Pets *"}),y.jsxs("select",{name:"landlord_allows_pets",value:r.landlord_allows_pets,onChange:A,className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.landlord_allows_pets?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all`,children:[y.jsx("option",{value:"",children:"-- Select --"}),y.jsx("option",{value:"yes",children:"Yes"}),y.jsx("option",{value:"no",children:"No"}),y.jsx("option",{value:"pending",children:"Pending Approval"})]}),T.landlord_allows_pets&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.landlord_allows_pets})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-3",children:[y.jsx(gd,{size:16}),"Household Members *"]}),y.jsx("input",{type:"number",name:"household_members",value:r.household_members,onChange:A,placeholder:"Number of people",min:"1",className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.household_members?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all`}),T.household_members&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.household_members})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Children Ages (if any)"}),y.jsx("input",{type:"text",name:"children_ages",value:r.children_ages,onChange:A,placeholder:"e.g., 5, 8, 12",className:"w-full px-4 py-3.5 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Other Pets Description"}),y.jsx("textarea",{name:"other_pets_description",value:r.other_pets_description,onChange:A,placeholder:"Describe any other pets you have (e.g., 1 dog, 2 cats)",className:"w-full px-4 py-3.5 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all resize-none",rows:"2"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Why Do You Want to Adopt? *"}),y.jsx("textarea",{name:"reason_for_adoption",value:r.reason_for_adoption,onChange:A,placeholder:"Tell us why you want to adopt this pet...",className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.reason_for_adoption?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all resize-none`,rows:"3"}),T.reason_for_adoption&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.reason_for_adoption})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Daily Schedule *"}),y.jsx("textarea",{name:"daily_schedule",value:r.daily_schedule,onChange:A,placeholder:"Describe a typical day for the pet (e.g., alone 8 hours for work, etc.)",className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.daily_schedule?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all resize-none`,rows:"3"}),T.daily_schedule&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.daily_schedule})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Veterinary Reference (Name & Contact) *"}),y.jsx("input",{type:"text",name:"veterinary_reference",value:r.veterinary_reference,onChange:A,placeholder:"Vet name and phone",className:`w-full px-4 py-3.5 rounded-xl border-2 ${T.veterinary_reference?"border-red-400":"border-amber-200"} focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all`}),T.veterinary_reference&&y.jsx("p",{className:"text-red-600 text-xs mt-1",children:T.veterinary_reference})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm font-bold text-amber-900 mb-3 block",children:"Personal Reference (Name & Contact)"}),y.jsx("input",{type:"text",name:"personal_reference",value:r.personal_reference,onChange:A,placeholder:"Reference name and phone",className:"w-full px-4 py-3.5 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all"})]})]}),y.jsx("button",{type:"submit",disabled:f,className:"w-full py-4 rounded-xl font-bold text-lg bg-linear-to-r from-amber-500 to-orange-500 text-white hover:shadow-2xl hover:shadow-amber-300 transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer mt-8",children:f?"Submitting...":"Submit Application"})]})]}),y.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-amber-100 shadow-2xl",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:y.jsx(qs,{size:24,className:"text-white"})}),y.jsx("h2",{className:"text-3xl font-black text-amber-900",children:"Your Applications"})]}),E.length===0?y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"w-20 h-20 rounded-full bg-linear-to-br from-amber-100 to-orange-100 flex items-center justify-center mx-auto mb-4",children:y.jsx(qs,{size:32,className:"text-amber-500"})}),y.jsx("p",{className:"text-amber-700 font-medium",children:"No applications yet. Start by submitting one!"})]}):y.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:E.map(G=>y.jsxs("div",{className:"p-6 rounded-2xl border-2 border-amber-100 hover:border-amber-300 transition-all bg-linear-to-br from-white to-amber-50/30 hover:shadow-lg",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-amber-900 mb-1",children:G.pets?.name||"Unknown Pet"}),y.jsxs("p",{className:"text-sm text-amber-600 flex items-center gap-2",children:[y.jsx(lC,{size:14}),"Submitted ",new Date(G.created_at).toLocaleDateString()]})]}),y.jsxs("span",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold text-white bg-linear-to-r ${Y(G.status)}`,children:[Q(G.status),G.status]})]}),G.reason_for_adoption&&y.jsxs("p",{className:"text-sm text-amber-700 bg-white/60 p-3 rounded-xl border border-amber-100",children:[y.jsx("strong",{children:"Why:"})," ",G.reason_for_adoption.substring(0,150),"..."]}),G.status==="Declined"&&G.decline_reason&&y.jsxs("p",{className:"text-sm text-red-700 bg-red-50/60 p-3 rounded-xl border border-red-200 mt-2",children:[y.jsx("strong",{children:"Decline Reason:"})," ",G.decline_reason]})]},G.id))})]})]})})]})})}let aA,lA;function uA(){return{geminiUrl:aA,vertexUrl:lA}}function cA(t,e,i,r){var o,l;if(!t?.baseUrl){const u=uA();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:i:(l=u.geminiUrl)!==null&&l!==void 0?l:r}return t.baseUrl}class Ln{}function Z(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(i))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];m(p[0],e.slice(l+1),i);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===o)return;if(typeof o=="object"&&typeof i=="object"&&o!==null&&i!==null)Object.assign(o,i);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[r]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return i;const o=e[r];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(r+1),i)):i}else return i}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return i;throw r}}function dA(t,e){for(const[i,r]of Object.entries(e)){const o=i.split("."),l=r.split("."),u=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}yd(t,o,l,0,u)}}function yd(t,e,i,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const p of f[u])yd(p,e,i,r+1,o)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of f)p[h]=u[h];for(const[h,_]of Object.entries(p)){const b=[];for(const x of i.slice(r))x==="*"?b.push(h):b.push(x);m(u,b,_)}for(const h of f)delete u[h]}}else{const u=t;l in u&&yd(u[l],e,i,r+1,o)}}function Jd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function fA(t){const e={},i=d(t,["operationName"]);i!=null&&m(e,["operationName"],i);const r=d(t,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function hA(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],mA(u)),e}function pA(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],gA(u)),e}function mA(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>yA(u))),m(e,["generatedVideos"],l)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function gA(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>vA(u))),m(e,["generatedVideos"],l)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function yA(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],wA(i)),e}function vA(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],TA(i)),e}function _A(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function bA(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function xA(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],SA(u)),e}function SA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["parent"]);r!=null&&m(e,["parent"],r);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function z0(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],EA(u)),e}function EA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["parent"]);r!=null&&m(e,["parent"],r);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function wA(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const r=d(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Jd(r));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function TA(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const r=d(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Jd(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}var Xg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xg||(Xg={}));var Wg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wg||(Wg={}));var Zg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Zg||(Zg={}));var fi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(fi||(fi={}));var ey;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ey||(ey={}));var ty;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ty||(ty={}));var ny;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ny||(ny={}));var iy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(iy||(iy={}));var sy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sy||(sy={}));var ry;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ry||(ry={}));var oy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(oy||(oy={}));var ay;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ay||(ay={}));var ly;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ly||(ly={}));var uy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(uy||(uy={}));var cy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(cy||(cy={}));var dy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dy||(dy={}));var fy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fy||(fy={}));var hy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(hy||(hy={}));var py;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(py||(py={}));var Za;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Za||(Za={}));var my;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(my||(my={}));var gy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gy||(gy={}));var yy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yy||(yy={}));var vd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vd||(vd={}));var vy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vy||(vy={}));var _y;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(_y||(_y={}));var by;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(by||(by={}));var xy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(xy||(xy={}));var Sy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Sy||(Sy={}));var Ey;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ey||(Ey={}));var wy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(wy||(wy={}));var Ty;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ty||(Ty={}));var Cy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Cy||(Cy={}));var Ay;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Ay||(Ay={}));var Ny;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ny||(Ny={}));var Ry;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ry||(Ry={}));var My;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(My||(My={}));var Iy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Iy||(Iy={}));var Dy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Dy||(Dy={}));var ky;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ky||(ky={}));var Uy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Uy||(Uy={}));var Py;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Py||(Py={}));var Oy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Oy||(Oy={}));var Ly;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Ly||(Ly={}));var qy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qy||(qy={}));var By;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(By||(By={}));var jy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(jy||(jy={}));var zy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(zy||(zy={}));var Hy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hy||(Hy={}));var Gy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Gy||(Gy={}));var Vy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Vy||(Vy={}));var Fy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fy||(Fy={}));var $y;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($y||($y={}));var Jy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Jy||(Jy={}));var Bs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bs||(Bs={}));class _d{constructor(e){const i={};for(const r of e.headers.entries())i[r[0]]=r[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Qr{get text(){var e,i,r,o,l,u,f,p;if(((o=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const b=[];for(const x of(p=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[E,C]of Object.entries(x))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(C!==null||C!==void 0)&&b.push(E);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;_=!0,h+=x.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,i,r,o,l,u,f,p;if(((o=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const b of(p=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[x,E]of Object.entries(b))x!=="inlineData"&&(E!==null||E!==void 0)&&_.push(x);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,r,o,l,u,f,p;if(((o=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,r,o,l,u,f,p,h;if(((o=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(_?.length!==0)return(h=_?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,r,o,l,u,f,p,h;if(((o=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(_?.length!==0)return(h=_?.[0])===null||h===void 0?void 0:h.output}}class Yy{}class Ky{}class CA{}class AA{}class NA{}class RA{}class Qy{}class Xy{}class Wy{}class MA{}class el{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new el;let o;const l=e;return i?o=pA(l):o=hA(l),Object.assign(r,o),r}}class Zy{}class ev{}class tv{}class IA{}class DA{}class kA{}class Yd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Yd,l=xA(e);return Object.assign(r,l),r}}class UA{}class PA{}class OA{}class nv{}class LA{get text(){var e,i,r;let o="",l=!1;const u=[];for(const f of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,i,r;let o="";const l=[];for(const u of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[f,p]of Object.entries(u))f!=="inlineData"&&p!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class qA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Kd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Kd,l=z0(e);return Object.assign(r,l),r}}function Te(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function H0(t,e){const i=Te(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function G0(t){return Array.isArray(t)?t.map(e=>tl(e)):[tl(t)]}function tl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function V0(t){const e=tl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function F0(t){const e=tl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function $0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>iv(e)):[iv(t)]}function bd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function sv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function rv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pt(t){if(t==null)throw new Error("ContentUnion is required");return bd(t)?t:{role:"user",parts:$0(t)}}function Qd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const r=pt(i);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const i=pt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>pt(i)):[pt(e)]}function Kt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(sv(t)||rv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pt(t)]}const e=[],i=[],r=bd(t[0]);for(const o of t){const l=bd(o);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(sv(o)||rv(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return r||e.push({role:"user",parts:$0(i)}),e}function BA(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(r=>r!=="null");if(i.length===1)e.type=Object.values(fi).includes(i[0].toUpperCase())?i[0].toUpperCase():fi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of i)e.anyOf.push({type:Object.values(fi).includes(r.toUpperCase())?r.toUpperCase():fi.TYPE_UNSPECIFIED})}}function Gs(t){const e={},i=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&BA(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(fi).includes(f.toUpperCase())?f.toUpperCase():fi.TYPE_UNSPECIFIED}else if(i.includes(u))e[u]=Gs(f);else if(r.includes(u)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(Gs(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(f))p[h]=Gs(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Xd(t){return Gs(t)}function Wd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Zd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Gs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Gs(e.response));return t}function Ws(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function jA(t,e,i,r=1){const o=!e.startsWith(`${i}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:o?`${i}/${e}`:e}function qn(t,e){if(typeof e!="string")throw new Error("name must be a string");return jA(t,e,"cachedContents")}function J0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mi(t){return Jd(t)}function zA(t){return t!=null&&typeof t=="object"&&"name"in t}function HA(t){return t!=null&&typeof t=="object"&&"video"in t}function GA(t){return t!=null&&typeof t=="object"&&"uri"in t}function Y0(t){var e;let i;if(zA(t)&&(i=t.name),!(GA(t)&&(i=t.uri,i===void 0))&&!(HA(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const o=i.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${i}`);i=o[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function K0(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Q0(t){for(const e of["models","tunedModels","publisherModels"])if(VA(t,e))return t[e];return[]}function VA(t,e){return t!==null&&typeof t=="object"&&e in t}function FA(t,e={}){const i=t,r={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(r.responseJsonSchema=i.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function $A(t,e={}){const i=[],r=new Set;for(const o of t){const l=o.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const u=FA(o,e);u.functionDeclarations&&i.push(...u.functionDeclarations)}return{functionDeclarations:i}}function X0(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const r=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,o=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function JA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function W0(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const o=i.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Zs(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Z0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function YA(t){const e={},i=d(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const r=d(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>NN(u))),m(e,["inlinedResponses"],l)}const o=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function KA(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const r=d(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const o=d(t,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function QA(t){const e={},i=d(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const r=d(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ga(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const o=d(t,["metadata","state"]);o!=null&&m(e,["state"],Z0(o));const l=d(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=d(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(t,["metadata","output"]);return h!=null&&m(e,["dest"],YA(W0(h))),e}function xd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["displayName"]);r!=null&&m(e,["displayName"],r);const o=d(t,["state"]);o!=null&&m(e,["state"],Z0(o));const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=d(t,["model"]);_!=null&&m(e,["model"],_);const b=d(t,["inputConfig"]);b!=null&&m(e,["src"],XA(b));const x=d(t,["outputConfig"]);x!=null&&m(e,["dest"],KA(W0(x)));const E=d(t,["completionStats"]);return E!=null&&m(e,["completionStats"],E),e}function XA(t){const e={},i=d(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const r=d(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const o=d(t,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function WA(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&m(i,["fileName"],r);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>AN(t,u))),m(i,["requests","requests"],l)}return i}function ZA(t){const e={},i=d(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const r=d(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function tN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function nN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function iN(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const r=d(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],sN(r));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=d(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(t,["safetyRatings"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["safetyRatings"],x)}const b=d(t,["urlContextMetadata"]);return b!=null&&m(e,["urlContextMetadata"],b),e}function sN(t){const e={},i=d(t,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),m(e,["citations"],r)}return e}function e_(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>PN(l))),m(e,["parts"],o)}const r=d(t,["role"]);return r!=null&&m(e,["role"],r),e}function rN(t,e){const i={},r=d(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function oN(t,e){const i={},r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const o=d(t,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],QA(JA(o))),i}function ov(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["src"]);o!=null&&m(i,["batch","inputConfig"],WA(t,X0(t,o)));const l=d(e,["config"]);return l!=null&&rN(l,i),i}function aN(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["model"],Te(t,r));const o=d(e,["src"]);o!=null&&m(i,["inputConfig"],ZA(X0(t,o)));const l=d(e,["config"]);return l!=null&&oN(l,i),i}function lN(t,e){const i={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),i}function uN(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["src"]);o!=null&&m(i,["batch","inputConfig"],gN(t,o));const l=d(e,["config"]);return l!=null&&lN(l,i),i}function cN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function dN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function fN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["name"]);r!=null&&m(e,["name"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function hN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["name"]);r!=null&&m(e,["name"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function pN(t,e){const i={},r=d(e,["contents"]);if(r!=null){let l=Qd(t,r);Array.isArray(l)&&(l=l.map(u=>u)),m(i,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(m(i,["_self"],mN(o,i)),dA(i,{"requests[].*":"requests[].request.*"})),i}function mN(t,e){const i={},r=d(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function gN(t,e){const i={},r=d(e,["fileName"]);r!=null&&m(i,["file_name"],r);const o=d(e,["inlinedRequests"]);return o!=null&&m(i,["requests"],pN(t,o)),i}function yN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function vN(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const r=d(t,["args"]);r!=null&&m(e,["args"],r);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _N(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const r=d(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bN(t,e,i){const r={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],e_(pt(o)));const l=d(e,["temperature"]);l!=null&&m(r,["temperature"],l);const u=d(e,["topP"]);u!=null&&m(r,["topP"],u);const f=d(e,["topK"]);f!=null&&m(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(r,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(r,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(r,["stopSequences"],_);const b=d(e,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const x=d(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const E=d(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const C=d(e,["frequencyPenalty"]);C!=null&&m(r,["frequencyPenalty"],C);const N=d(e,["seed"]);N!=null&&m(r,["seed"],N);const R=d(e,["responseMimeType"]);R!=null&&m(r,["responseMimeType"],R);const T=d(e,["responseSchema"]);T!=null&&m(r,["responseSchema"],Xd(T));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=d(e,["safetySettings"]);if(i!==void 0&&A!=null){let ce=A;Array.isArray(ce)&&(ce=ce.map(Oe=>ON(Oe))),m(i,["safetySettings"],ce)}const j=d(e,["tools"]);if(i!==void 0&&j!=null){let ce=Ws(j);Array.isArray(ce)&&(ce=ce.map(Oe=>qN(Xs(Oe)))),m(i,["tools"],ce)}const K=d(e,["toolConfig"]);if(i!==void 0&&K!=null&&m(i,["toolConfig"],LN(K)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=d(e,["cachedContent"]);i!==void 0&&Q!=null&&m(i,["cachedContent"],qn(t,Q));const Y=d(e,["responseModalities"]);Y!=null&&m(r,["responseModalities"],Y);const G=d(e,["mediaResolution"]);G!=null&&m(r,["mediaResolution"],G);const V=d(e,["speechConfig"]);if(V!=null&&m(r,["speechConfig"],Wd(V)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=d(e,["thinkingConfig"]);re!=null&&m(r,["thinkingConfig"],re);const pe=d(e,["imageConfig"]);return pe!=null&&m(r,["imageConfig"],CN(pe)),r}function xN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(h=>iN(h))),m(e,["candidates"],p)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=d(t,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function SN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function EN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],Zs(t,r)),i}function wN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function TN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function CN(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const r=d(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AN(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["request","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let f=Kt(o);Array.isArray(f)&&(f=f.map(p=>e_(p))),m(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&m(i,["metadata"],l);const u=d(e,["config"]);return u!=null&&m(i,["request","generationConfig"],bN(t,u,d(i,["request"],{}))),i}function NN(t){const e={},i=d(t,["response"]);i!=null&&m(e,["response"],xN(i));const r=d(t,["error"]);return r!=null&&m(e,["error"],r),e}function RN(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function MN(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=d(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function IN(t){const e={},i=d(t,["config"]);return i!=null&&RN(i,e),e}function DN(t){const e={},i=d(t,["config"]);return i!=null&&MN(i,e),e}function kN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Ga(u))),m(e,["batchJobs"],l)}return e}function UN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>xd(u))),m(e,["batchJobs"],l)}return e}function PN(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=d(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],yN(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],vN(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],eN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const b=d(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function ON(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function LN(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],_N(i));const r=d(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function qN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(b=>b)),m(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=d(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],wN(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],TN(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var On;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(On||(On={}));class Fi{constructor(e,i,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,r,o)}init(e,i,r){var o,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=i.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class BN extends Ln{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new Fi(On.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=ov(this.apiClient,e),r=i._url,o=Z("{model}:batchGenerateContent",r),f=i.batch.inputConfig.requests,p=f.requests,h=[];for(const _ of p){const b=Object.assign({},_);if(b.systemInstruction){const x=b.systemInstruction;delete b.systemInstruction;const E=b.request;E.systemInstruction=x,b.request=E}h.push(b)}return f.requests=h,delete i.config,delete i._url,delete i._query,{path:o,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const r=i?Object.assign({},i):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?r.dest=`${l.slice(0,-6)}/dest`:r.dest=`${l}_dest_${o}`;else if(u)r.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=aN(this.apiClient,e);return f=Z("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>xd(_))}else{const h=ov(this.apiClient,e);return f=Z("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Ga(_))}}async createEmbeddingsInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uN(this.apiClient,e);return l=Z("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>Ga(p))}}async get(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=EN(this.apiClient,e);return f=Z("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>xd(_))}else{const h=SN(this.apiClient,e);return f=Z("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Ga(_))}}async cancel(e){var i,r,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const p=nN(this.apiClient,e);u=Z("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const p=tN(this.apiClient,e);u=Z("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=DN(e);return f=Z("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=UN(_),x=new nv;return Object.assign(x,b),x})}else{const h=IN(e);return f=Z("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=kN(_),x=new nv;return Object.assign(x,b),x})}}async delete(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=dN(this.apiClient,e);return f=Z("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>hN(_))}else{const h=cN(this.apiClient,e);return f=Z("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>fN(_))}}}function jN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function av(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>uR(l))),m(e,["parts"],o)}const r=d(t,["role"]);return r!=null&&m(e,["role"],r),e}function zN(t,e){const i={},r=d(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let _=Kt(u);Array.isArray(_)&&(_=_.map(b=>av(b))),m(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],av(pt(f)));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(b=>dR(b))),m(e,["tools"],_)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],cR(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function HN(t,e){const i={},r=d(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let b=Kt(u);Array.isArray(b)&&(b=b.map(x=>x)),m(e,["contents"],b)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],pt(f));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let b=p;Array.isArray(b)&&(b=b.map(x=>fR(x))),m(e,["tools"],b)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),i}function GN(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["model"],H0(t,r));const o=d(e,["config"]);return o!=null&&zN(o,i),i}function VN(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["model"],H0(t,r));const o=d(e,["config"]);return o!=null&&HN(o,i),i}function FN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],qn(t,r)),i}function $N(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],qn(t,r)),i}function JN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function YN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function KN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function QN(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const r=d(t,["args"]);r!=null&&m(e,["args"],r);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XN(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const r=d(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WN(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const r=d(t,["name"]);r!=null&&m(e,["name"],r);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function ZN(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],qn(t,r)),i}function eR(t,e){const i={},r=d(e,["name"]);return r!=null&&m(i,["_url","name"],qn(t,r)),i}function tR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function nR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function iR(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function sR(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function rR(t){const e={},i=d(t,["config"]);return i!=null&&iR(i,e),e}function oR(t){const e={},i=d(t,["config"]);return i!=null&&sR(i,e),e}function aR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function lR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function uR(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=d(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],KN(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],QN(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],jN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const b=d(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function cR(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],XN(i));const r=d(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function dR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(b=>b)),m(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=d(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],tR(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],nR(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function fR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(x=>WN(x))),m(e,["functionDeclarations"],b)}const r=d(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function hR(t,e){const i={},r=d(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),i}function pR(t,e){const i={},r=d(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),i}function mR(t,e){const i={},r=d(e,["name"]);r!=null&&m(i,["_url","name"],qn(t,r));const o=d(e,["config"]);return o!=null&&hR(o,i),i}function gR(t,e){const i={},r=d(e,["name"]);r!=null&&m(i,["_url","name"],qn(t,r));const o=d(e,["config"]);return o!=null&&pR(o,i),i}class yR extends Ln{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Fi(On.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(i),i)}async create(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=VN(this.apiClient,e);return f=Z("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=GN(this.apiClient,e);return f=Z("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=eR(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=ZN(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=$N(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=YN(_),x=new ev;return Object.assign(x,b),x})}else{const h=FN(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=JN(_),x=new ev;return Object.assign(x,b),x})}}async update(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=gR(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=mR(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=oR(e);return f=Z("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=lR(_),x=new tv;return Object.assign(x,b),x})}else{const h=rR(e);return f=Z("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=aR(_),x=new tv;return Object.assign(x,b),x})}}}function lv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(t){return this instanceof je?(this.v=t,this):new je(t)}function Vs(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(E){return function(C){return Promise.resolve(C).then(E,b)}}function f(E,C){r[E]&&(o[E]=function(N){return new Promise(function(R,T){l.push([E,N,R,T])>1||p(E,N)})},C&&(o[E]=C(o[E])))}function p(E,C){try{h(r[E](C))}catch(N){x(l[0][3],N)}}function h(E){E.value instanceof je?Promise.resolve(E.value.v).then(_,b):x(l[0][2],E)}function _(E){p("next",E)}function b(E){p("throw",E)}function x(E,C){E(C),l.shift(),l.length&&p(l[0][0],l[0][1])}}function eo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof lv=="function"?lv(t):t[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=t[l]&&function(u){return new Promise(function(f,p){u=t[l](u),o(f,p,u.done,u.value)})}}function o(l,u,f,p){Promise.resolve(p).then(function(h){l({value:h,done:f})},u)}}function vR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:t_(i)}function t_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function _R(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function uv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let r=0;for(;r<i;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let l=!0;for(;r<i&&t[r].role==="model";)o.push(t[r]),l&&!t_(t[r])&&(l=!1),r++;l?e.push(...o):e.pop()}return e}class bR{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new xR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xR{constructor(e,i,r,o={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=r,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),_R(l)}async sendMessage(e){var i;await this.sendPromise;const r=pt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,u,f;const p=await o,h=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let x=[];_!=null&&(x=(f=_.slice(b))!==null&&f!==void 0?f:[]);const E=h?[h]:[];this.recordHistory(r,E,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var i;await this.sendPromise;const r=pt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,r)}getHistory(e=!1){const i=e?uv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var r,o;return Vs(this,arguments,function*(){var u,f,p,h;const _=[];try{for(var b=!0,x=eo(e),E;E=yield je(x.next()),u=E.done,!u;b=!0){h=E.value,b=!1;const C=h;if(vR(C)){const N=(o=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;N!==void 0&&_.push(N)}yield yield je(C)}}catch(C){f={error:C}}finally{try{!b&&!u&&(p=x.return)&&(yield je(p.call(x)))}finally{if(f)throw f.error}}this.recordHistory(i,_)})}recordHistory(e,i,r){let o=[];i.length>0&&i.every(l=>l.role!==void 0)?o=i:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...uv(r)):this.history.push(e),this.history.push(...o)}}class cl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,cl.prototype)}}function SR(t){const e={},i=d(t,["file"]);return i!=null&&m(e,["file"],i),e}function ER(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function wR(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],Y0(i)),e}function TR(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function CR(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],Y0(i)),e}function AR(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function NR(t){const e={},i=d(t,["config"]);return i!=null&&AR(i,e),e}function RR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}class MR extends Ln{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Fi(On.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NR(e);return l=Z("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=RR(p),_=new UA;return Object.assign(_,h),_})}}async createInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SR(e);return l=Z("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=ER(p),_=new PA;return Object.assign(_,h),_})}}async get(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CR(e);return l=Z("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wR(e);return l=Z("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=TR(p),_=new OA;return Object.assign(_,h),_})}}}function Va(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function IR(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>JR(l))),m(e,["parts"],o)}const r=d(t,["role"]);return r!=null&&m(e,["role"],r),e}function DR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function kR(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const r=d(t,["args"]);r!=null&&m(e,["args"],r);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UR(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const r=d(t,["name"]);r!=null&&m(e,["name"],r);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function PR(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const r=d(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=d(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(t,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const b=d(t,["presencePenalty"]);b!=null&&m(e,["presencePenalty"],b);const x=d(t,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const E=d(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const C=d(t,["responseModalities"]);C!=null&&m(e,["responseModalities"],C);const N=d(t,["responseSchema"]);N!=null&&m(e,["responseSchema"],N);const R=d(t,["routingConfig"]);R!=null&&m(e,["routingConfig"],R);const T=d(t,["seed"]);T!=null&&m(e,["seed"],T);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],n_(D));const A=d(t,["stopSequences"]);A!=null&&m(e,["stopSequences"],A);const j=d(t,["temperature"]);j!=null&&m(e,["temperature"],j);const K=d(t,["thinkingConfig"]);K!=null&&m(e,["thinkingConfig"],K);const Q=d(t,["topK"]);Q!=null&&m(e,["topK"],Q);const Y=d(t,["topP"]);if(Y!=null&&m(e,["topP"],Y),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function LR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function qR(t,e){const i={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],Zd(b));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],IR(pt(C)));const N=d(t,["tools"]);if(e!==void 0&&N!=null){let Q=Ws(N);Array.isArray(Q)&&(Q=Q.map(Y=>KR(Xs(Y)))),m(e,["setup","tools"],Q)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&m(e,["setup","sessionResumption"],YR(R));const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","inputAudioTranscription"],T);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&m(e,["setup","realtimeInputConfig"],A);const j=d(t,["contextWindowCompression"]);e!==void 0&&j!=null&&m(e,["setup","contextWindowCompression"],j);const K=d(t,["proactivity"]);return e!==void 0&&K!=null&&m(e,["setup","proactivity"],K),i}function BR(t,e){const i={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],PR(r));const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],n_(Zd(b)));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],pt(C));const N=d(t,["tools"]);if(e!==void 0&&N!=null){let Q=Ws(N);Array.isArray(Q)&&(Q=Q.map(Y=>QR(Xs(Y)))),m(e,["setup","tools"],Q)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&m(e,["setup","sessionResumption"],R);const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","inputAudioTranscription"],T);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&m(e,["setup","realtimeInputConfig"],A);const j=d(t,["contextWindowCompression"]);e!==void 0&&j!=null&&m(e,["setup","contextWindowCompression"],j);const K=d(t,["proactivity"]);return e!==void 0&&K!=null&&m(e,["setup","proactivity"],K),i}function jR(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["setup","model"],Te(t,r));const o=d(e,["config"]);return o!=null&&m(i,["config"],qR(o,i)),i}function zR(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["setup","model"],Te(t,r));const o=d(e,["config"]);return o!=null&&m(i,["config"],BR(o,i)),i}function HR(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function GR(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),m(e,["weightedPrompts"],r)}return e}function VR(t){const e={},i=d(t,["media"]);if(i!=null){let h=G0(i);Array.isArray(h)&&(h=h.map(_=>Va(_))),m(e,["mediaChunks"],h)}const r=d(t,["audio"]);r!=null&&m(e,["audio"],Va(F0(r)));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=d(t,["video"]);l!=null&&m(e,["video"],Va(V0(l)));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function FR(t){const e={},i=d(t,["media"]);if(i!=null){let h=G0(i);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const r=d(t,["audio"]);r!=null&&m(e,["audio"],F0(r));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=d(t,["video"]);l!=null&&m(e,["video"],V0(l));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function $R(t){const e={},i=d(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const r=d(t,["serverContent"]);r!=null&&m(e,["serverContent"],r);const o=d(t,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=d(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=d(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],XR(u));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function JR(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=d(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],DR(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],kR(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],Va(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const b=d(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function YR(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const r=d(t,["voiceConfig"]);if(r!=null&&m(e,["voiceConfig"],r),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function KR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(b=>b)),m(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=d(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],OR(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],LR(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function QR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(x=>UR(x))),m(e,["functionDeclarations"],b)}const r=d(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function XR(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const r=d(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const o=d(t,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=d(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(t,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["promptTokensDetails"],E)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["cacheTokensDetails"],E)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["responseTokensDetails"],E)}const b=d(t,["toolUsePromptTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["toolUsePromptTokensDetails"],E)}const x=d(t,["trafficType"]);return x!=null&&m(e,["trafficType"],x),e}function WR(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ZR(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const r=d(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],e1(r));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=d(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(t,["safetyRatings"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["safetyRatings"],x)}const b=d(t,["urlContextMetadata"]);return b!=null&&m(e,["urlContextMetadata"],b),e}function e1(t){const e={},i=d(t,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),m(e,["citations"],r)}return e}function t1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let l=Kt(o);Array.isArray(l)&&(l=l.map(u=>u)),m(i,["contents"],l)}return i}function n1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function i1(t){const e={},i=d(t,["values"]);i!=null&&m(e,["values"],i);const r=d(t,["statistics"]);return r!=null&&m(e,["statistics"],s1(r)),e}function s1(t){const e={},i=d(t,["truncated"]);i!=null&&m(e,["truncated"],i);const r=d(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function dl(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>h2(l))),m(e,["parts"],o)}const r=d(t,["role"]);return r!=null&&m(e,["role"],r),e}function r1(t){const e={},i=d(t,["controlType"]);i!=null&&m(e,["controlType"],i);const r=d(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function o1(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function a1(t,e){const i={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],pt(r));const o=d(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>a_(f))),m(e,["tools"],u)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],W1(l)),i}function l1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let u=Kt(o);Array.isArray(u)&&(u=u.map(f=>dl(f))),m(i,["contents"],u)}const l=d(e,["config"]);return l!=null&&o1(l),i}function u1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let u=Kt(o);Array.isArray(u)&&(u=u.map(f=>f)),m(i,["contents"],u)}const l=d(e,["config"]);return l!=null&&a1(l,i),i}function c1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const o=d(t,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function d1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function f1(t,e){const i={},r=d(e,["model"]);return r!=null&&m(i,["_url","name"],Te(t,r)),i}function h1(t,e){const i={},r=d(e,["model"]);return r!=null&&m(i,["_url","name"],Te(t,r)),i}function p1(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function m1(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function g1(t,e){const i={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const x=d(t,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const E=d(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","mimeType"],C);const N=d(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","compressionQuality"],N);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&m(e,["parameters","addWatermark"],R);const T=d(t,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const D=d(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const A=d(t,["baseSteps"]);return e!==void 0&&A!=null&&m(e,["parameters","editConfig","baseSteps"],A),i}function y1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>_2(p))),m(i,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&g1(u,i),i}function v1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>fl(l))),m(e,["generatedImages"],o)}return e}function _1(t,e){const i={},r=d(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function b1(t,e){const i={},r=d(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const u=d(t,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),i}function x1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let f=Qd(t,o);Array.isArray(f)&&(f=f.map(p=>p)),m(i,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&_1(l,i);const u=d(e,["model"]);return u!==void 0&&m(i,["requests[]","model"],Te(t,u)),i}function S1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let u=Qd(t,o);Array.isArray(u)&&(u=u.map(f=>f)),m(i,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&b1(l,i),i}function E1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["embeddings"],l)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function w1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>i1(u))),m(e,["embeddings"],l)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function T1(t){const e={},i=d(t,["endpoint"]);i!=null&&m(e,["name"],i);const r=d(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function C1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function A1(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const r=d(t,["args"]);r!=null&&m(e,["args"],r);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function N1(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const r=d(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function R1(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const r=d(t,["name"]);r!=null&&m(e,["name"],r);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function M1(t,e,i){const r={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],dl(pt(o)));const l=d(e,["temperature"]);l!=null&&m(r,["temperature"],l);const u=d(e,["topP"]);u!=null&&m(r,["topP"],u);const f=d(e,["topK"]);f!=null&&m(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(r,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(r,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(r,["stopSequences"],_);const b=d(e,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const x=d(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const E=d(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const C=d(e,["frequencyPenalty"]);C!=null&&m(r,["frequencyPenalty"],C);const N=d(e,["seed"]);N!=null&&m(r,["seed"],N);const R=d(e,["responseMimeType"]);R!=null&&m(r,["responseMimeType"],R);const T=d(e,["responseSchema"]);T!=null&&m(r,["responseSchema"],Xd(T));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=d(e,["safetySettings"]);if(i!==void 0&&A!=null){let ce=A;Array.isArray(ce)&&(ce=ce.map(Oe=>b2(Oe))),m(i,["safetySettings"],ce)}const j=d(e,["tools"]);if(i!==void 0&&j!=null){let ce=Ws(j);Array.isArray(ce)&&(ce=ce.map(Oe=>A2(Xs(Oe)))),m(i,["tools"],ce)}const K=d(e,["toolConfig"]);if(i!==void 0&&K!=null&&m(i,["toolConfig"],C2(K)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=d(e,["cachedContent"]);i!==void 0&&Q!=null&&m(i,["cachedContent"],qn(t,Q));const Y=d(e,["responseModalities"]);Y!=null&&m(r,["responseModalities"],Y);const G=d(e,["mediaResolution"]);G!=null&&m(r,["mediaResolution"],G);const V=d(e,["speechConfig"]);if(V!=null&&m(r,["speechConfig"],Wd(V)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=d(e,["thinkingConfig"]);re!=null&&m(r,["thinkingConfig"],re);const pe=d(e,["imageConfig"]);return pe!=null&&m(r,["imageConfig"],i2(pe)),r}function I1(t,e,i){const r={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],pt(o));const l=d(e,["temperature"]);l!=null&&m(r,["temperature"],l);const u=d(e,["topP"]);u!=null&&m(r,["topP"],u);const f=d(e,["topK"]);f!=null&&m(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(r,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(r,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(r,["stopSequences"],_);const b=d(e,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const x=d(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const E=d(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const C=d(e,["frequencyPenalty"]);C!=null&&m(r,["frequencyPenalty"],C);const N=d(e,["seed"]);N!=null&&m(r,["seed"],N);const R=d(e,["responseMimeType"]);R!=null&&m(r,["responseMimeType"],R);const T=d(e,["responseSchema"]);T!=null&&m(r,["responseSchema"],Xd(T));const D=d(e,["responseJsonSchema"]);D!=null&&m(r,["responseJsonSchema"],D);const A=d(e,["routingConfig"]);A!=null&&m(r,["routingConfig"],A);const j=d(e,["modelSelectionConfig"]);j!=null&&m(r,["modelConfig"],j);const K=d(e,["safetySettings"]);if(i!==void 0&&K!=null){let z=K;Array.isArray(z)&&(z=z.map(X=>X)),m(i,["safetySettings"],z)}const Q=d(e,["tools"]);if(i!==void 0&&Q!=null){let z=Ws(Q);Array.isArray(z)&&(z=z.map(X=>a_(Xs(X)))),m(i,["tools"],z)}const Y=d(e,["toolConfig"]);i!==void 0&&Y!=null&&m(i,["toolConfig"],Y);const G=d(e,["labels"]);i!==void 0&&G!=null&&m(i,["labels"],G);const V=d(e,["cachedContent"]);i!==void 0&&V!=null&&m(i,["cachedContent"],qn(t,V));const re=d(e,["responseModalities"]);re!=null&&m(r,["responseModalities"],re);const pe=d(e,["mediaResolution"]);pe!=null&&m(r,["mediaResolution"],pe);const ce=d(e,["speechConfig"]);ce!=null&&m(r,["speechConfig"],o_(Wd(ce)));const Oe=d(e,["audioTimestamp"]);Oe!=null&&m(r,["audioTimestamp"],Oe);const tt=d(e,["thinkingConfig"]);tt!=null&&m(r,["thinkingConfig"],tt);const vt=d(e,["imageConfig"]);return vt!=null&&m(r,["imageConfig"],s2(vt)),r}function cv(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let u=Kt(o);Array.isArray(u)&&(u=u.map(f=>dl(f))),m(i,["contents"],u)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],M1(t,l,i)),i}function dv(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["contents"]);if(o!=null){let u=Kt(o);Array.isArray(u)&&(u=u.map(f=>f)),m(i,["contents"],u)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],I1(t,l,i)),i}function fv(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(h=>ZR(h))),m(e,["candidates"],p)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=d(t,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function hv(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const l=d(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const u=d(t,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function D1(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=d(t,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const x=d(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=d(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function k1(t,e){const i={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const x=d(t,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const E=d(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","mimeType"],C);const N=d(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","compressionQuality"],N);const R=d(t,["addWatermark"]);e!==void 0&&R!=null&&m(e,["parameters","addWatermark"],R);const T=d(t,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const D=d(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const A=d(t,["enhancePrompt"]);return e!==void 0&&A!=null&&m(e,["parameters","enhancePrompt"],A),i}function U1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&D1(l,i),i}function P1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&k1(l,i),i}function O1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Y1(u))),m(e,["generatedImages"],l)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],s_(o)),e}function L1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>fl(u))),m(e,["generatedImages"],l)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],r_(o)),e}function q1(t,e){const i={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(t,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=d(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(t,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],hl(_));const b=d(t,["referenceImages"]);if(e!==void 0&&b!=null){let x=b;Array.isArray(x)&&(x=x.map(E=>j2(E))),m(e,["instances[0]","referenceImages"],x)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function B1(t,e){const i={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=d(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const u=d(t,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const b=d(t,["pubsubTopic"]);e!==void 0&&b!=null&&m(e,["parameters","pubsubTopic"],b);const x=d(t,["negativePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","negativePrompt"],x);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const C=d(t,["generateAudio"]);e!==void 0&&C!=null&&m(e,["parameters","generateAudio"],C);const N=d(t,["lastFrame"]);e!==void 0&&N!=null&&m(e,["instances[0]","lastFrame"],an(N));const R=d(t,["referenceImages"]);if(e!==void 0&&R!=null){let A=R;Array.isArray(A)&&(A=A.map(j=>z2(j))),m(e,["instances[0]","referenceImages"],A)}const T=d(t,["mask"]);e!==void 0&&T!=null&&m(e,["instances[0]","mask"],B2(T));const D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function j1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],V1(u)),e}function z1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],F1(u)),e}function H1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],hl(l));const u=d(e,["video"]);u!=null&&m(i,["instances[0]","video"],l_(u));const f=d(e,["source"]);f!=null&&$1(f,i);const p=d(e,["config"]);return p!=null&&q1(p,i),i}function G1(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],an(l));const u=d(e,["video"]);u!=null&&m(i,["instances[0]","video"],u_(u));const f=d(e,["source"]);f!=null&&J1(f,i);const p=d(e,["config"]);return p!=null&&B1(p,i),i}function V1(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Q1(u))),m(e,["generatedVideos"],l)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function F1(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>X1(u))),m(e,["generatedVideos"],l)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function $1(t,e){const i={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],hl(o));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],l_(l)),i}function J1(t,e){const i={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],an(o));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],u_(l)),i}function Y1(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],r2(i));const r=d(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const o=d(t,["_self"]);return o!=null&&m(e,["safetyAttributes"],s_(o)),e}function fl(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],i_(i));const r=d(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const o=d(t,["_self"]);o!=null&&m(e,["safetyAttributes"],r_(o));const l=d(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function K1(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["mask"],i_(i));const r=d(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function Q1(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],L2(i)),e}function X1(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],q2(i)),e}function W1(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const r=d(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=d(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(t,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const b=d(t,["presencePenalty"]);b!=null&&m(e,["presencePenalty"],b);const x=d(t,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const E=d(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const C=d(t,["responseModalities"]);C!=null&&m(e,["responseModalities"],C);const N=d(t,["responseSchema"]);N!=null&&m(e,["responseSchema"],N);const R=d(t,["routingConfig"]);R!=null&&m(e,["routingConfig"],R);const T=d(t,["seed"]);T!=null&&m(e,["seed"],T);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],o_(D));const A=d(t,["stopSequences"]);A!=null&&m(e,["stopSequences"],A);const j=d(t,["temperature"]);j!=null&&m(e,["temperature"],j);const K=d(t,["thinkingConfig"]);K!=null&&m(e,["thinkingConfig"],K);const Q=d(t,["topK"]);Q!=null&&m(e,["topK"],Q);const Y=d(t,["topP"]);if(Y!=null&&m(e,["topP"],Y),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Z1(t,e){const i={},r=d(e,["model"]);return r!=null&&m(i,["_url","name"],Te(t,r)),i}function e2(t,e){const i={},r=d(e,["model"]);return r!=null&&m(i,["_url","name"],Te(t,r)),i}function t2(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function n2(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function i2(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const r=d(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function s2(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const r=d(t,["imageSize"]);r!=null&&m(e,["imageSize"],r);const o=d(t,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const l=d(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function r2(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],mi(i));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function i_(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const r=d(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],mi(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function hl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],mi(i));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function an(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const r=d(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],mi(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function o2(t,e,i){const r={},o=d(e,["pageSize"]);i!==void 0&&o!=null&&m(i,["_query","pageSize"],o);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const u=d(e,["filter"]);i!==void 0&&u!=null&&m(i,["_query","filter"],u);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],K0(t,f)),r}function a2(t,e,i){const r={},o=d(e,["pageSize"]);i!==void 0&&o!=null&&m(i,["_query","pageSize"],o);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const u=d(e,["filter"]);i!==void 0&&u!=null&&m(i,["_query","filter"],u);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],K0(t,f)),r}function l2(t,e){const i={},r=d(e,["config"]);return r!=null&&o2(t,r,i),i}function u2(t,e){const i={},r=d(e,["config"]);return r!=null&&a2(t,r,i),i}function c2(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["_self"]);if(o!=null){let l=Q0(o);Array.isArray(l)&&(l=l.map(u=>Sd(u))),m(e,["models"],l)}return e}function d2(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["_self"]);if(o!=null){let l=Q0(o);Array.isArray(l)&&(l=l.map(u=>Ed(u))),m(e,["models"],l)}return e}function f2(t){const e={},i=d(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const r=d(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const o=d(t,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Sd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["displayName"]);r!=null&&m(e,["displayName"],r);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const l=d(t,["version"]);l!=null&&m(e,["version"],l);const u=d(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],N2(u));const f=d(t,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=d(t,["temperature"]);_!=null&&m(e,["temperature"],_);const b=d(t,["maxTemperature"]);b!=null&&m(e,["maxTemperature"],b);const x=d(t,["topP"]);x!=null&&m(e,["topP"],x);const E=d(t,["topK"]);E!=null&&m(e,["topK"],E);const C=d(t,["thinking"]);return C!=null&&m(e,["thinking"],C),e}function Ed(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["displayName"]);r!=null&&m(e,["displayName"],r);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const l=d(t,["versionId"]);l!=null&&m(e,["version"],l);const u=d(t,["deployedModels"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(x=>T1(x))),m(e,["endpoints"],b)}const f=d(t,["labels"]);f!=null&&m(e,["labels"],f);const p=d(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],R2(p));const h=d(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=d(t,["checkpoints"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(x=>x)),m(e,["checkpoints"],b)}return e}function h2(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=d(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],C1(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],A1(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],WR(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const b=d(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function p2(t){const e={},i=d(t,["productImage"]);return i!=null&&m(e,["image"],an(i)),e}function m2(t,e){const i={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const o=d(t,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=d(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const b=d(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","compressionQuality"],b);const x=d(t,["enhancePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x);const E=d(t,["labels"]);return e!==void 0&&E!=null&&m(e,["labels"],E),i}function g2(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["source"]);o!=null&&v2(o,i);const l=d(e,["config"]);return l!=null&&m2(l,i),i}function y2(t){const e={},i=d(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>fl(o))),m(e,["generatedImages"],r)}return e}function v2(t,e){const i={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const o=d(t,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],an(o));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>p2(f))),m(e,["instances[0]","productImages"],u)}return i}function _2(t){const e={},i=d(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],an(i));const r=d(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const o=d(t,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=d(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],f2(l));const u=d(t,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],r1(u));const f=d(t,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function s_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const r=d(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function r_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const r=d(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function b2(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function x2(t){const e={},i=d(t,["image"]);return i!=null&&m(e,["image"],an(i)),e}function S2(t,e){const i={},r=d(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const o=d(t,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const u=d(t,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function E2(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["source"]);o!=null&&T2(o,i);const l=d(e,["config"]);return l!=null&&S2(l,i),i}function w2(t){const e={},i=d(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>K1(o))),m(e,["generatedMasks"],r)}return e}function T2(t,e){const i={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],an(o));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],x2(l)),i}function o_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const r=d(t,["voiceConfig"]);if(r!=null&&m(e,["voiceConfig"],r),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function C2(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],N1(i));const r=d(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function A2(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(b=>b)),m(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=d(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],t2(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],n2(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function a_(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(x=>R1(x))),m(e,["functionDeclarations"],b)}const r=d(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function N2(t){const e={},i=d(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const r=d(t,["createTime"]);r!=null&&m(e,["createTime"],r);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function R2(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const r=d(t,["createTime"]);r!=null&&m(e,["createTime"],r);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function M2(t,e){const i={},r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function I2(t,e){const i={},r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function D2(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","name"],Te(t,r));const o=d(e,["config"]);return o!=null&&M2(o,i),i}function k2(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["config"]);return o!=null&&I2(o,i),i}function U2(t,e){const i={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const b=d(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const x=d(t,["numberOfImages"]);e!==void 0&&x!=null&&m(e,["parameters","sampleCount"],x);const E=d(t,["mode"]);return e!==void 0&&E!=null&&m(e,["parameters","mode"],E),i}function P2(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["_url","model"],Te(t,r));const o=d(e,["image"]);o!=null&&m(i,["instances[0]","image"],an(o));const l=d(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&U2(u,i),i}function O2(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>fl(l))),m(e,["generatedImages"],o)}return e}function L2(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const r=d(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],mi(r));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function q2(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const r=d(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],mi(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function B2(t){const e={},i=d(t,["image"]);i!=null&&m(e,["_self"],an(i));const r=d(t,["maskMode"]);return r!=null&&m(e,["maskMode"],r),e}function j2(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],hl(i));const r=d(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function z2(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],an(i));const r=d(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function l_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const r=d(t,["videoBytes"]);r!=null&&m(e,["encodedVideo"],mi(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function u_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const r=d(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],mi(r));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}const H2="Content-Type",G2="X-Server-Timeout",V2="User-Agent",wd="x-goog-api-client",F2="1.30.0",$2=`google-genai-sdk/${F2}`,J2="v1beta1",Y2="v1beta",pv=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class K2{constructor(e){var i,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:J2,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Y2,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,r){const o=[this.getRequestUrlInternal(i)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,i,r);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,i){const r=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(i))typeof l=="object"?r[o]=Object.assign(Object.assign({},r[o]),l):l!==void 0&&(r[o]=l);return r}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,i,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,r,o){if(i&&i.timeout||o){const l=new AbortController,u=l.signal;if(i.timeout&&i?.timeout>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return i&&i.extraBody!==null&&Q2(e,i.extraBody),e.headers=await this.getHeadersInternal(i,r),e}async unaryApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async o=>(await mv(o),new _d(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async o=>(await mv(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var i;return Vs(this,arguments,function*(){const o=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:p}=yield je(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const b=JSON.parse(h);if("error"in b){const x=JSON.parse(JSON.stringify(b.error)),E=x.status,C=x.code,N=`got status: ${E}. ${JSON.stringify(b)}`;if(C>=400&&C<600)throw new cl({message:N,status:C})}}catch(b){if(b.name==="ApiError")throw b}u+=h;let _=u.match(pv);for(;_;){const b=_[1];try{const x=new Response(b,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield je(new _d(x)),u=u.slice(_[0].length),_=u.match(pv)}catch(x){throw new Error(`exception parsing stream chunk ${b}. ${x}`)}}}}finally{o.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},i=$2+" "+this.clientOptions.userAgentExtra;return e[V2]=i,e[wd]=i,e[H2]="application/json",e}async getHeadersInternal(e,i){const r=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))r.append(o,l);e.timeout&&e.timeout>0&&r.append(G2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,i),r}getFileName(e){var i;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(i=r.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),r}async uploadFile(e,i){var r;const o={};i!=null&&(o.mimeType=i.mimeType,o.name=i.name,o.displayName=i.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const f=(r=i?.mimeType)!==null&&r!==void 0?r:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const p={file:o},h=this.getFileName(e),_=Z("upload/v1beta/files",p._url),b=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,i?.httpOptions);return l.upload(e,b,this)}async uploadFileToFileSearchStore(e,i,r){var o;const l=this.clientOptions.uploader,u=await l.stat(i),f=String(u.size),p=(o=r?.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(i),b={};r?.customMetadata&&(b.customMetadata=r.customMetadata),r?.chunkingConfig&&(b.chunkingConfig=r.chunkingConfig);const x=await this.fetchUploadUrl(h,f,p,_,b,r?.httpOptions);return l.uploadToFileSearchStore(i,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,r,o,l,u){var f;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function mv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw i>=400&&i<600?new cl({message:o,status:i}):new Error(o)}}function Q2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,u){const f=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[p]=r(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const o=r(i,e);t.body=JSON.stringify(o)}const X2="mcp_used/unknown";let W2=!1;function c_(t){for(const e of t)if(Z2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return W2}function d_(t){var e;const i=(e=t[wd])!==null&&e!==void 0?e:"";t[wd]=(i+` ${X2}`).trimStart()}function Z2(t){return t!==null&&typeof t=="object"&&t instanceof ef}function eM(t,e=100){return Vs(this,arguments,function*(){let r,o=0;for(;o<e;){const l=yield je(t.listTools({cursor:r}));for(const u of l.tools)yield yield je(u),o++;if(!l.nextCursor)break;r=l.nextCursor}})}class ef{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new ef(e,i)}async initialize(){var e,i,r,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,p=(i=void 0,eo(eM(_))),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const b=o;u.push(b);const x=b.name;if(l[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);l[x]=_}}catch(b){i={error:b}}finally{try{!f&&!e&&(r=p.return)&&await r.call(p)}finally{if(i)throw i.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$A(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:r.name,arguments:r.args},void 0,l);i.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return i}}async function tM(t,e,i){const r=new qA;let o;i.data instanceof Blob?o=JSON.parse(await i.data.text()):o=JSON.parse(i.data),Object.assign(r,o),e(r)}class nM{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r}async connect(e){var i,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=rM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(A=>{h=A}),b=e.callbacks,x=function(){h({})},E=this.apiClient,C={onopen:x,onmessage:A=>{tM(E,b.onmessage,A)},onerror:(i=b?.onerror)!==null&&i!==void 0?i:function(A){},onclose:(r=b?.onclose)!==null&&r!==void 0?r:function(A){}},N=this.webSocketFactory.create(p,sM(u),C);N.connect(),await _;const D={setup:{model:Te(this.apiClient,e.model)}};return N.send(JSON.stringify(D)),new iM(N,this.apiClient)}}class iM{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=GR(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=HR(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Bs.PLAY)}pause(){this.sendPlaybackControl(Bs.PAUSE)}stop(){this.sendPlaybackControl(Bs.STOP)}resetContext(){this.sendPlaybackControl(Bs.RESET_CONTEXT)}close(){this.conn.close()}}function sM(t){const e={};return t.forEach((i,r)=>{e[r]=i}),e}function rM(t){const e=new Headers;for(const[i,r]of Object.entries(t))e.append(i,r);return e}const oM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function aM(t,e,i){const r=new LA;let o;i.data instanceof Blob?o=await i.data.text():i.data instanceof ArrayBuffer?o=new TextDecoder().decode(i.data):o=i.data;const l=JSON.parse(o);if(t.isVertexAI()){const u=$R(l);Object.assign(r,u)}else Object.assign(r,l);e(r)}class lM{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r,this.music=new nM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,r,o,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&c_(e.config.tools)&&d_(b);const x=fM(b);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,_);else{const V=this.apiClient.getApiKey();let re="BidiGenerateContent",pe="key";V?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),re="BidiGenerateContentConstrained",pe="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${re}?${pe}=${V}`}let E=()=>{};const C=new Promise(V=>{E=V}),N=e.callbacks,R=function(){var V;(V=N?.onopen)===null||V===void 0||V.call(N),E({})},T=this.apiClient,D={onopen:R,onmessage:V=>{aM(T,N.onmessage,V)},onerror:(i=N?.onerror)!==null&&i!==void 0?i:function(V){},onclose:(r=N?.onclose)!==null&&r!==void 0?r:function(V){}},A=this.webSocketFactory.create(_,dM(x),D);A.connect(),await C;let j=Te(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const V=this.apiClient.getProject(),re=this.apiClient.getLocation();j=`projects/${V}/locations/${re}/`+j}let K={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Za.AUDIO]}:e.config.responseModalities=[Za.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],Y=[];for(const V of Q)if(this.isCallableTool(V)){const re=V;Y.push(await re.tool())}else Y.push(V);Y.length>0&&(e.config.tools=Y);const G={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=zR(this.apiClient,G):K=jR(this.apiClient,G),delete K.config,A.send(JSON.stringify(K)),new cM(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const uM={turnComplete:!0};class cM{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let r=[];try{r=Kt(i.turns),e.isVertexAI()||(r=r.map(o=>dl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:r,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let r=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?r=i.functionResponses:r=[i.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(oM)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},uM),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:FR(e)}:i={realtimeInput:VR(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function dM(t){const e={};return t.forEach((i,r)=>{e[r]=i}),e}function fM(t){const e=new Headers;for(const[i,r]of Object.entries(t))e.append(i,r);return e}const gv=10;function yv(t){var e,i,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(i=t?.tools)!==null&&i!==void 0?i:[])if(Fs(u)){o=!0;break}if(!o)return!0;const l=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Fs(t){return"callTool"in t&&typeof t.callTool=="function"}function hM(t){var e,i,r;return(r=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(o=>Fs(o)))!==null&&r!==void 0?r:!1}function vv(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(Fs(r))return;const l=r;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(o)}),i}function _v(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class pM extends Ln{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var r,o,l,u,f;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!hM(i)||yv(i.config))return await this.generateContentInternal(p);const h=vv(i);if(h.length>0){const N=h.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let _,b;const x=Kt(p.contents),E=(l=(o=(r=p.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:gv;let C=0;for(;C<E&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const N=_.candidates[0].content,R=[];for(const T of(f=(u=i.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Fs(T)){const A=await T.callTool(_.functionCalls);R.push(...A)}C++,b={role:"user",parts:R},p.contents=Kt(p.contents),p.contents.push(N),p.contents.push(b),_v(p.config)&&(x.push(N),x.push(b))}return _v(p.config)&&(_.automaticFunctionCallingHistory=x),_},this.generateContentStream=async i=>{var r,o,l,u,f;if(this.maybeMoveToResponseJsonSchem(i),yv(i.config)){const b=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(b)}const p=vv(i);if(p.length>0){const b=p.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(o=(r=i?.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=i?.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(r=>{var o;let l;const u=[];if(r?.generatedImages)for(const p of r.generatedImages)p&&p?.safetyAttributes&&((o=p?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p?.safetyAttributes:u.push(p);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},f}),this.list=async i=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Fi(On.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async i=>{const r={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(r.referenceImages=i.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async i=>{let r={numberOfImages:1,mode:"upscale"};i.config&&(r=Object.assign(Object.assign({},r),i.config));const o={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async i=>{var r,o,l,u,f,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=i.video)===null||r===void 0)&&r.uri&&(!((o=i.video)===null||o===void 0)&&o.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((u=(l=i.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(f=i.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,r,o;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>Fs(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&c_(e.config.tools)){const p=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),d_(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var i,r,o;const l=new Map;for(const u of(r=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[])if(Fs(u)){const f=u,p=await f.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var i,r,o;const l=(o=(r=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:gv;let u=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,_,b){var x,E;return Vs(this,arguments,function*(){for(var C,N,R,T;f<l;){u&&(f++,u=!1);const K=yield je(h.processParamsMaybeAddMcpUsage(b)),Q=yield je(h.generateContentStreamInternal(K)),Y=[],G=[];try{for(var D=!0,A=(N=void 0,eo(Q)),j;j=yield je(A.next()),C=j.done,!C;D=!0){T=j.value,D=!1;const V=T;if(yield yield je(V),V.candidates&&(!((x=V.candidates[0])===null||x===void 0)&&x.content)){G.push(V.candidates[0].content);for(const re of(E=V.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(f<l&&re.functionCall){if(!re.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(re.functionCall.name)){const pe=yield je(_.get(re.functionCall.name).callTool([re.functionCall]));Y.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${re.functionCall.name}`)}}}}catch(V){N={error:V}}finally{try{!D&&!C&&(R=A.return)&&(yield je(R.call(A)))}finally{if(N)throw N.error}}if(Y.length>0){u=!0;const V=new Qr;V.candidates=[{content:{role:"user",parts:Y}}],yield yield je(V);const re=[];re.push(...G),re.push({role:"user",parts:Y});const pe=Kt(b.contents).concat(re);b.contents=pe}else break}})})(this,p,e)}async generateContentInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=dv(this.apiClient,e);return f=Z("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=hv(_),x=new Qr;return Object.assign(x,b),x})}else{const h=cv(this.apiClient,e);return f=Z("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=fv(_),x=new Qr;return Object.assign(x,b),x})}}async generateContentStreamInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=dv(this.apiClient,e);return f=Z("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(b){return Vs(this,arguments,function*(){var x,E,C,N;try{for(var R=!0,T=eo(b),D;D=yield je(T.next()),x=D.done,!x;R=!0){N=D.value,R=!1;const A=N,j=hv(yield je(A.json()));j.sdkHttpResponse={headers:A.headers};const K=new Qr;Object.assign(K,j),yield yield je(K)}}catch(A){E={error:A}}finally{try{!R&&!x&&(C=T.return)&&(yield je(C.call(T)))}finally{if(E)throw E.error}}})})}else{const h=cv(this.apiClient,e);return f=Z("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(b){return Vs(this,arguments,function*(){var x,E,C,N;try{for(var R=!0,T=eo(b),D;D=yield je(T.next()),x=D.done,!x;R=!0){N=D.value,R=!1;const A=N,j=fv(yield je(A.json()));j.sdkHttpResponse={headers:A.headers};const K=new Qr;Object.assign(K,j),yield yield je(K)}}catch(A){E={error:A}}finally{try{!R&&!x&&(C=T.return)&&(yield je(C.call(T)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=S1(this.apiClient,e);return f=Z("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=w1(_),x=new Yy;return Object.assign(x,b),x})}else{const h=x1(this.apiClient,e);return f=Z("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=E1(_),x=new Yy;return Object.assign(x,b),x})}}async generateImagesInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=P1(this.apiClient,e);return f=Z("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=L1(_),x=new Ky;return Object.assign(x,b),x})}else{const h=U1(this.apiClient,e);return f=Z("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=O1(_),x=new Ky;return Object.assign(x,b),x})}}async editImageInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=y1(this.apiClient,e);return l=Z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=v1(p),_=new CA;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=P2(this.apiClient,e);return l=Z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=O2(p),_=new AA;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=g2(this.apiClient,e);return l=Z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=y2(p),_=new NA;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=E2(this.apiClient,e);return l=Z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=w2(p),_=new RA;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=e2(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>Ed(_))}else{const h=Z1(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Sd(_))}}async listInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=u2(this.apiClient,e);return f=Z("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=d2(_),x=new Qy;return Object.assign(x,b),x})}else{const h=l2(this.apiClient,e);return f=Z("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=c2(_),x=new Qy;return Object.assign(x,b),x})}}async update(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=k2(this.apiClient,e);return f=Z("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>Ed(_))}else{const h=D2(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Sd(_))}}async delete(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=h1(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=m1(_),x=new Xy;return Object.assign(x,b),x})}else{const h=f1(this.apiClient,e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=p1(_),x=new Xy;return Object.assign(x,b),x})}}async countTokens(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=u1(this.apiClient,e);return f=Z("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=d1(_),x=new Wy;return Object.assign(x,b),x})}else{const h=l1(this.apiClient,e);return f=Z("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=c1(_),x=new Wy;return Object.assign(x,b),x})}}async computeTokens(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=t1(this.apiClient,e);return l=Z("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=n1(p),_=new MA;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=G1(this.apiClient,e);return f=Z("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u.then(_=>{const b=z1(_),x=new el;return Object.assign(x,b),x})}else{const h=H1(this.apiClient,e);return f=Z("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const b=j1(_),x=new el;return Object.assign(x,b),x})}}}class mM extends Ln{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:o,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:o,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=bA(e);return f=Z("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),u}else{const h=_A(e);return f=Z("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=fA(e);return l=Z("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}function gM(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function yM(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>CM(l))),m(e,["parts"],o)}const r=d(t,["role"]);return r!=null&&m(e,["role"],r),e}function vM(t,e,i){const r={},o=d(e,["expireTime"]);i!==void 0&&o!=null&&m(i,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const u=d(e,["uses"]);i!==void 0&&u!=null&&m(i,["uses"],u);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&m(i,["bidiGenerateContentSetup"],TM(t,f));const p=d(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),r}function _M(t,e){const i={},r=d(e,["config"]);return r!=null&&m(i,["config"],vM(t,r,i)),i}function bM(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function xM(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const r=d(t,["args"]);r!=null&&m(e,["args"],r);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SM(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function EM(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function wM(t,e){const i={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","speechConfig"],Zd(b));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=d(t,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],yM(pt(C)));const N=d(t,["tools"]);if(e!==void 0&&N!=null){let Q=Ws(N);Array.isArray(Q)&&(Q=Q.map(Y=>NM(Xs(Y)))),m(e,["setup","tools"],Q)}const R=d(t,["sessionResumption"]);e!==void 0&&R!=null&&m(e,["setup","sessionResumption"],AM(R));const T=d(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","inputAudioTranscription"],T);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&m(e,["setup","realtimeInputConfig"],A);const j=d(t,["contextWindowCompression"]);e!==void 0&&j!=null&&m(e,["setup","contextWindowCompression"],j);const K=d(t,["proactivity"]);return e!==void 0&&K!=null&&m(e,["setup","proactivity"],K),i}function TM(t,e){const i={},r=d(e,["model"]);r!=null&&m(i,["setup","model"],Te(t,r));const o=d(e,["config"]);return o!=null&&m(i,["config"],wM(o,i)),i}function CM(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=d(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],bM(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],xM(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],gM(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const b=d(t,["thoughtSignature"]);b!=null&&m(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function AM(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NM(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(b=>b)),m(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=d(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],SM(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],EM(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function RM(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(l=>`${i}.${l}`);e.push(...o)}else e.push(i)}return e.join(",")}function MM(t,e){let i=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(i){const l=RM(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class IM extends Ln{constructor(e){super(),this.apiClient=e}async create(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=_M(this.apiClient,e);l=Z("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const p=MM(f,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}function DM(t,e){const i={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),i}function kM(t){const e={},i=d(t,["config"]);return i!=null&&DM(i,e),e}function UM(t,e){const i={},r=d(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),i}function PM(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const r=d(t,["config"]);return r!=null&&UM(r,e),e}function OM(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function LM(t,e){const i={},r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["customMetadata"],l)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),i}function qM(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const r=d(t,["metadata"]);r!=null&&m(e,["metadata"],r);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],jM(u)),e}function BM(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const r=d(t,["fileName"]);r!=null&&m(e,["fileName"],r);const o=d(t,["config"]);return o!=null&&LM(o,e),e}function jM(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["parent"]);r!=null&&m(e,["parent"],r);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function zM(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function HM(t){const e={},i=d(t,["config"]);return i!=null&&zM(i,e),e}function GM(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["fileSearchStores"],l)}return e}function VM(t,e){const i={},r=d(t,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),i}function FM(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const r=d(t,["config"]);return r!=null&&VM(r,e),e}function $M(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function JM(t,e){const i={},r=d(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),i}function YM(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const r=d(t,["config"]);return r!=null&&JM(r,e),e}function KM(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function QM(t,e){const i={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function XM(t){const e={},i=d(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const r=d(t,["config"]);return r!=null&&QM(r,e),e}function WM(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=d(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const o=d(t,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["documents"],l)}return e}class ZM extends Ln{constructor(e){super(),this.apiClient=e,this.list=async i=>new Fi(On.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:i.parent,config:r.config}),await this.listInternal(i),i)}async get(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KM(e);return l=Z("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var i,r;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YM(e);o=Z("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XM(e);return l=Z("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=WM(p),_=new IA;return Object.assign(_,h),_})}}}class eI extends Ln{constructor(e,i=new ZM(e)){super(),this.apiClient=e,this.documents=i,this.list=async(r={})=>new Fi(On.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kM(e);return l=Z("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OM(e);return l=Z("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var i,r;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PM(e);o=Z("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HM(e);return l=Z("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=GM(p),_=new DA;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=FM(e);return l=Z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=$M(p),_=new kA;return Object.assign(_,h),_})}}async importFile(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=BM(e);return l=Z("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>{const h=qM(p),_=new Yd;return Object.assign(_,h),_})}}}function tI(t,e){const i={},r=d(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function nI(t,e){const i={},r=d(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function iI(t,e,i){const r={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(t,["learningRateMultiplier"]);if(u!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function sI(t,e,i){const r={};let o=d(i,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const E=d(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec"],bv(E))}else if(o==="PREFERENCE_TUNING"){const E=d(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec"],bv(E))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=d(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=d(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(f==="PREFERENCE_TUNING"){const E=d(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=d(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=d(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=d(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(h==="PREFERENCE_TUNING"){const E=d(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let _=d(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const E=d(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(_==="PREFERENCE_TUNING"){const E=d(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=d(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const x=d(t,["beta"]);return e!==void 0&&x!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),r}function rI(t,e){const i={},r=d(t,["baseModel"]);r!=null&&m(i,["baseModel"],r);const o=d(t,["preTunedModel"]);o!=null&&m(i,["preTunedModel"],o);const l=d(t,["trainingDataset"]);l!=null&&gI(l);const u=d(t,["config"]);return u!=null&&iI(u,i),i}function oI(t,e){const i={},r=d(t,["baseModel"]);r!=null&&m(i,["baseModel"],r);const o=d(t,["preTunedModel"]);o!=null&&m(i,["preTunedModel"],o);const l=d(t,["trainingDataset"]);l!=null&&yI(l,i,e);const u=d(t,["config"]);return u!=null&&sI(u,i,e),i}function aI(t,e){const i={},r=d(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function lI(t,e){const i={},r=d(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function uI(t,e,i){const r={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function cI(t,e,i){const r={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function dI(t,e){const i={},r=d(t,["config"]);return r!=null&&uI(r,i),i}function fI(t,e){const i={},r=d(t,["config"]);return r!=null&&cI(r,i),i}function hI(t,e){const i={},r=d(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const o=d(t,["nextPageToken"]);o!=null&&m(i,["nextPageToken"],o);const l=d(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>f_(f))),m(i,["tuningJobs"],u)}return i}function pI(t,e){const i={},r=d(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const o=d(t,["nextPageToken"]);o!=null&&m(i,["nextPageToken"],o);const l=d(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Td(f))),m(i,["tuningJobs"],u)}return i}function mI(t,e){const i={},r=d(t,["name"]);r!=null&&m(i,["model"],r);const o=d(t,["name"]);return o!=null&&m(i,["endpoint"],o),i}function gI(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),m(i,["examples","examples"],o)}return i}function yI(t,e,i){const r={};let o=d(i,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function f_(t,e){const i={},r=d(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["state"]);l!=null&&m(i,["state"],J0(l));const u=d(t,["createTime"]);u!=null&&m(i,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const _=d(t,["description"]);_!=null&&m(i,["description"],_);const b=d(t,["baseModel"]);b!=null&&m(i,["baseModel"],b);const x=d(t,["_self"]);return x!=null&&m(i,["tunedModel"],mI(x)),i}function Td(t,e){const i={},r=d(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["state"]);l!=null&&m(i,["state"],J0(l));const u=d(t,["createTime"]);u!=null&&m(i,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const _=d(t,["error"]);_!=null&&m(i,["error"],_);const b=d(t,["description"]);b!=null&&m(i,["description"],b);const x=d(t,["baseModel"]);x!=null&&m(i,["baseModel"],x);const E=d(t,["tunedModel"]);E!=null&&m(i,["tunedModel"],E);const C=d(t,["preTunedModel"]);C!=null&&m(i,["preTunedModel"],C);const N=d(t,["supervisedTuningSpec"]);N!=null&&m(i,["supervisedTuningSpec"],N);const R=d(t,["preferenceOptimizationSpec"]);R!=null&&m(i,["preferenceOptimizationSpec"],R);const T=d(t,["tuningDataStats"]);T!=null&&m(i,["tuningDataStats"],T);const D=d(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const A=d(t,["partnerModelTuningSpec"]);A!=null&&m(i,["partnerModelTuningSpec"],A);const j=d(t,["customBaseModel"]);j!=null&&m(i,["customBaseModel"],j);const K=d(t,["experiment"]);K!=null&&m(i,["experiment"],K);const Q=d(t,["labels"]);Q!=null&&m(i,["labels"],Q);const Y=d(t,["outputUri"]);Y!=null&&m(i,["outputUri"],Y);const G=d(t,["pipelineJob"]);G!=null&&m(i,["pipelineJob"],G);const V=d(t,["serviceAccount"]);V!=null&&m(i,["serviceAccount"],V);const re=d(t,["tunedModelDisplayName"]);re!=null&&m(i,["tunedModelDisplayName"],re);const pe=d(t,["veoTuningSpec"]);return pe!=null&&m(i,["veoTuningSpec"],pe),i}function vI(t,e){const i={},r=d(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["metadata"]);l!=null&&m(i,["metadata"],l);const u=d(t,["done"]);u!=null&&m(i,["done"],u);const f=d(t,["error"]);return f!=null&&m(i,["error"],f),i}function bv(t,e){const i={},r=d(t,["gcsUri"]);r!=null&&m(i,["validationDatasetUri"],r);const o=d(t,["vertexDatasetResource"]);return o!=null&&m(i,["validationDatasetUri"],o),i}class _I extends Ln{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Fi(On.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.tune=async i=>{var r;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const o={tunedModelName:i.baseModel};!((r=i.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},i);return await this.tuneInternal(o)}else{const o=Object.assign({},i),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:vd.JOB_STATE_QUEUED}}}}async getInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=lI(e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>Td(_))}else{const h=aI(e);return f=Z("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>f_(_))}}async listInternal(e){var i,r,o,l;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=fI(e);return f=Z("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=pI(_),x=new Zy;return Object.assign(x,b),x})}else{const h=dI(e);return f=Z("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const b=hI(_),x=new Zy;return Object.assign(x,b),x})}}async cancel(e){var i,r,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const p=nI(e);u=Z("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const p=tI(e);u=Z("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=oI(e,e);return l=Z("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>Td(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rI(e);return l=Z("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>vI(p))}}}class bI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xI=1024*1024*8,SI=3,EI=1e3,wI=2,nl="x-goog-upload-status";async function TI(t,e,i){var r;const o=await h_(t,e,i),l=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function CI(t,e,i){var r;const o=await h_(t,e,i),l=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=z0(l),f=new Kd;return Object.assign(f,u),f}async function h_(t,e,i){var r,o;let l=0,u=0,f=new _d(new Response),p="upload";for(l=t.size;u<l;){const h=Math.min(xI,l-u),_=t.slice(u,u+h);u+h>=l&&(p+=", finalize");let b=0,x=EI;for(;b<SI&&(f=await i.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((r=f?.headers)===null||r===void 0)&&r[nl]));)b++,await NI(x),x=x*wI;if(u+=h,((o=f?.headers)===null||o===void 0?void 0:o[nl])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function AI(t){return{size:t.size,type:t.type}}function NI(t){return new Promise(e=>setTimeout(e,t))}class RI{async upload(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TI(e,i,r)}async uploadToFileSearchStore(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CI(e,i,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AI(e)}}class MI{create(e,i,r){return new II(e,i,r)}}class II{constructor(e,i,r){this.url=e,this.headers=i,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const xv="x-goog-api-key";class DI{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(xv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xv,this.apiKey)}}}const kI="gl-node/";class UI{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const r=cA(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new DI(this.apiKey);this.apiClient=new K2({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:kI+"web",uploader:new RI,downloader:new bI}),this.models=new pM(this.apiClient),this.live=new lM(this.apiClient,o,new MI),this.batches=new BN(this.apiClient),this.chats=new bR(this.models,this.apiClient),this.caches=new yR(this.apiClient),this.files=new MR(this.apiClient),this.operations=new mM(this.apiClient),this.authTokens=new IM(this.apiClient),this.tunings=new _I(this.apiClient),this.fileSearchStores=new eI(this.apiClient)}}const PI=new UI({apiKey:"AIzaSyAAMnx2my4nfStkAOoQQQPG0c1tqT5DLnU"});async function OI(t){return(await PI.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{systemInstruction:`Your name is Alexa and only introduce yourself once. You are PetPeeve AI, a helpful assistant for a pet adoption website. Provide friendly and informative responses to user inquiries about pet adoption, care tips, and website navigation, make the conversation engaging, supportive and short.
      Layout your answers in a way that is easy to read and understand.
      If you don't know the answer, respond with "I'm not sure about that, but you can contact our support team for more information."
      Can give the list of available pets in my supabase.
      `}})).text}function LI(){const[t,e]=M.useState(!1),[i,r]=M.useState([{id:1,sender:"ai",text:"Hello! How can I help you today? "}]),[o,l]=M.useState(""),[u,f]=M.useState(!1),p=async h=>{if(h.preventDefault(),!o.trim()||u)return;const _={id:Date.now(),sender:"user",text:o};r(b=>[...b,_]),l(""),f(!0);try{const b=await OI(o),x={id:Date.now()+1,sender:"ai",text:b};r(E=>[...E,x])}catch{const x={id:Date.now()+1,sender:"ai",text:"Sorry, I couldn't process that. Please try again."};r(E=>[...E,x])}finally{f(!1)}};return y.jsxs("div",{className:"fixed bottom-8 right-8 z-50",children:[!t&&y.jsx("button",{onClick:()=>e(!0),className:"bg-linear-amber text-white p-5 rounded-full shadow-lg shadow-amber-200/50 transition-all hover:scale-110",children:y.jsx(RC,{size:32})}),t&&y.jsxs("div",{className:"w-96 h-[500px] bg-white rounded-2xl shadow-lg flex flex-col overflow-hidden border border-gray-200",children:[y.jsxs("div",{className:"bg-linear-amber text-white flex justify-between items-center p-5",children:[y.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[y.jsx(pi,{size:24})," Pet Peeve AI"]}),y.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 rounded-full p-2 transition",children:y.jsx(zs,{size:24})})]}),y.jsxs("div",{className:"flex-1 p-5 overflow-y-auto space-y-4 bg-light",children:[i.map(h=>y.jsx("div",{className:`p-4 rounded-xl max-w-[80%] text-base ${h.sender==="user"?"bg-linear-amber text-white ml-auto shadow-md":"bg-white text-gray-800 shadow-sm border border-gray-200"}`,children:h.text},h.id)),u&&y.jsx("div",{className:"bg-white text-gray-800 p-4 rounded-xl max-w-[80%] shadow-sm border border-gray-200",children:y.jsx("span",{className:"animate-pulse text-base",children:"Typing..."})})]}),y.jsxs("div",{className:"p-5 border-t border-gray-200 flex gap-3 items-center bg-white",children:[y.jsx("input",{type:"text",value:o,onChange:h=>l(h.target.value),onKeyPress:h=>h.key==="Enter"&&p(h),placeholder:"Type a message...",disabled:u,className:"flex-1 border border-gray-300 rounded-lg p-3 text-base focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:opacity-50"}),y.jsx("button",{onClick:p,disabled:u,className:"bg-linear-amber text-white px-5 py-3 rounded-lg transition shadow-md disabled:opacity-50 font-semibold",children:u?"...":"Send"})]})]})]})}function qI(){const t=on(),[e,i]=M.useState({fullname:"",email:"",password:"",confirmPassword:"",role:"adopter"}),[r,o]=M.useState(!1),[l,u]=M.useState(""),[f,p]=M.useState(""),[h,_]=M.useState(!1),[b,x]=M.useState(!1),E=T=>{i({...e,[T.target.name]:T.target.value}),u(""),p("")},C=async T=>{if(T.preventDefault(),o(!0),u(""),p(""),!e.fullname||!e.email||!e.password||!e.confirmPassword){u("Please fill in all fields!"),o(!1);return}if(e.password!==e.confirmPassword){u("Passwords do not match!"),o(!1);return}if(e.password.length<6){u("Password must be at least 6 characters!"),o(!1);return}try{const{data:D,error:A}=await ge.auth.signUp({email:e.email,password:e.password,options:{data:{fullname:e.fullname,role:e.role}}});if(A){u(A.message||"Signup failed. Please try again."),o(!1);return}const j=D?.user?.id,K=D?.session||null;if(j&&K){const Q=await D0(j,e.email,e.fullname,e.role);if(!Q.success&&Q.reason==="rls_policy"){u("Database permissions issue: RLS policy blocks insert. Please contact support or check policies."),o(!1);return}if(!Q.success&&Q.reason==="other"){console.error("Failed to insert user row:",Q.error),u("Failed to create user profile. Please try again or contact support."),o(!1);return}}if(!K){p("Account created. Please confirm your email and then sign in."),setTimeout(()=>t("/login"),1200);return}p(" Account created successfully! Redirecting..."),(e.role||"adopter").toLowerCase()==="staff"?setTimeout(()=>t("/admindashboard"),1200):setTimeout(()=>t("/profile"),1200)}catch(D){u(D?.message||"Signup failed. Please try again.")}finally{o(!1)}},N=()=>{t("/")},R=()=>{t("/login")};return y.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-4 bg-linear-to-br from-amber-50 via-white to-orange-50",children:y.jsxs("div",{className:"w-full max-w-5xl",children:[y.jsxs("button",{onClick:N,className:"mb-3 flex items-center gap-2 text-amber-700 hover:text-amber-900 font-semibold transition-all group cursor-pointer",children:[y.jsx(Xa,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Back to Home"]}),y.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-amber-100 overflow-hidden",children:y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[y.jsxs("div",{className:"bg-linear-to-br from-amber-500 to-orange-500 px-8 py-12 flex flex-col items-center justify-center text-center",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm mb-4",children:y.jsx(pi,{size:40,className:"text-white"})}),y.jsx("h1",{className:"text-4xl font-black text-white mb-2",children:"Join PetPeeve"}),y.jsx("p",{className:"text-lg text-white/90 mb-6",children:"Create your account and start your adoption journey"}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/80",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Secure"})]}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Protected"})]}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(kn,{size:16}),y.jsx("span",{children:"Private"})]})]})]}),y.jsxs("div",{className:"p-8",children:[l&&y.jsxs("div",{className:"mb-4 bg-linear-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-xl p-2.5 flex items-center gap-2",children:[y.jsx(zd,{className:"text-red-500 shrink-0",size:18}),y.jsx("p",{className:"text-red-700 font-semibold text-sm",children:l})]}),f&&y.jsxs("div",{className:"mb-4 bg-linear-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-2.5 flex items-center gap-2",children:[y.jsx(kn,{className:"text-green-500 shrink-0",size:18}),y.jsx("p",{className:"text-green-700 font-semibold text-sm",children:f})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(gd,{size:14}),"Full Name"]}),y.jsx("input",{type:"text",name:"fullname",placeholder:"Your full name",value:e.fullname,onChange:E,className:"w-full px-4 py-2.5 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all text-sm",required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(O0,{size:14}),"Email"]}),y.jsx("input",{type:"email",name:"email",placeholder:"you@example.com",value:e.email,onChange:E,className:"w-full px-4 py-2.5 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all text-sm",required:!0})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(md,{size:14}),"Password"]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:h?"text":"password",name:"password",placeholder:"",value:e.password,onChange:E,className:"w-full px-4 py-2.5 pr-10 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all text-sm",required:!0}),y.jsx("button",{type:"button",onClick:()=>_(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-amber-600 hover:text-amber-800 transition-colors cursor-pointer",children:h?y.jsx(hd,{size:16}):y.jsx(pd,{size:16})})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(md,{size:14}),"Confirm"]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:b?"text":"password",name:"confirmPassword",placeholder:"",value:e.confirmPassword,onChange:E,className:"w-full px-4 py-2.5 pr-10 rounded-xl border-2 border-amber-200 focus:border-amber-400 focus:ring-4 focus:ring-amber-100 outline-none transition-all text-sm",required:!0}),y.jsx("button",{type:"button",onClick:()=>x(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-amber-600 hover:text-amber-800 transition-colors cursor-pointer",children:b?y.jsx(hd,{size:16}):y.jsx(pd,{size:16})})]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-amber-900 mb-2",children:[y.jsx(dC,{size:14}),"Account Type"]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx("button",{type:"button",onClick:()=>i({...e,role:"adopter"}),className:`p-3 rounded-xl border-2 transition-all cursor-pointer ${e.role==="adopter"?"border-amber-400 bg-linear-to-br from-amber-50 to-orange-50 shadow-lg":"border-amber-200 hover:border-amber-300"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e.role==="adopter"?"bg-linear-to-br from-amber-500 to-orange-500":"bg-amber-100"}`,children:y.jsx(gd,{size:16,className:e.role==="adopter"?"text-white":"text-amber-600"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("span",{className:`font-bold text-sm block ${e.role==="adopter"?"text-amber-900":"text-amber-700"}`,children:"Adopter"}),y.jsx("span",{className:"text-xs text-amber-600",children:"Find pets"})]})]})}),y.jsx("button",{type:"button",onClick:()=>i({...e,role:"staff"}),className:`p-3 rounded-xl border-2 transition-all cursor-pointer ${e.role==="staff"?"border-amber-400 bg-linear-to-br from-amber-50 to-orange-50 shadow-lg":"border-amber-200 hover:border-amber-300"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e.role==="staff"?"bg-linear-to-br from-amber-500 to-orange-500":"bg-amber-100"}`,children:y.jsx(oC,{size:16,className:e.role==="staff"?"text-white":"text-amber-600"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("span",{className:`font-bold text-sm block ${e.role==="staff"?"text-amber-900":"text-amber-700"}`,children:"Staff"}),y.jsx("span",{className:"text-xs text-amber-600",children:"Manage"})]})]})})]})]}),y.jsx("button",{onClick:C,disabled:r,className:"w-full py-3 rounded-xl font-bold text-base bg-linear-to-r from-amber-500 to-orange-500 text-white hover:shadow-2xl hover:shadow-amber-300 transition-all hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 mt-2 cursor-pointer",children:r?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):"Create Account"})]}),y.jsxs("div",{className:"relative my-4",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-amber-200"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-4 bg-white text-amber-600 font-semibold",children:"OR"})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-amber-200 hover:border-amber-300 hover:bg-linear-to-br from-amber-50 to-orange-50 transition-all font-semibold text-amber-900 text-sm cursor-pointer",children:[y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),y.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border-2 border-amber-200 hover:border-amber-300 hover:bg-linear-to-br from-amber-50 to-orange-50 transition-all font-semibold text-amber-900 text-sm cursor-pointer",children:[y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]}),y.jsxs("p",{className:"mt-4 text-center text-amber-700 text-sm",children:["Already have an account?"," ",y.jsx("button",{onClick:R,className:"font-bold text-amber-600 hover:text-amber-800 hover:underline transition-all cursor-pointer",children:"Sign in"})]})]})]})})]})})}function BI(){const t=on(),[e,i]=M.useState(!0),[r,o]=M.useState(!1),[l,u]=M.useState(""),[f,p]=M.useState(""),[h,_]=M.useState({id:"",fullname:"",email:"",role:"adopter",phone_number:"",address:"",city:"",state:"",zip_code:""});M.useEffect(()=>{(async()=>{i(!0);try{const{data:E}=await ge.auth.getUser(),C=E?.user;if(!C){t("/login");return}const{data:N,error:R}=await ge.from("users").select("*").eq("id",C.id).maybeSingle();if(R&&u("Failed to load profile"),N){if(_({...h,...N}),N.phone_number&&N.address&&N.city&&N.state&&N.zip_code){t("/browsepet");return}}else _(T=>({...T,id:C.id,email:C.email,role:C.user_metadata?.role||"adopter",fullname:C.user_metadata?.fullname||C.user_metadata?.full_name||""}))}catch{u("Unexpected error loading profile")}finally{i(!1)}})()},[]);const b=E=>_({...h,[E.target.name]:E.target.value}),x=async E=>{E.preventDefault(),o(!0),u("");try{const C={id:h.id,fullname:h.fullname,email:h.email,role:h.role||"adopter",phone_number:h.phone_number,address:h.address,city:h.city,state:h.state,zip_code:h.zip_code},{error:N}=await ge.from("users").upsert(C);if(N)throw N;p("Profile saved. Redirecting..."),setTimeout(()=>t("/browsepet"),900)}catch(C){u(C?.message||"Failed to save profile")}finally{o(!1)}};return e?y.jsx("div",{className:"p-8",children:"Loading profile..."}):y.jsx("div",{className:"min-h-screen px-6 py-12",children:y.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-8 rounded-2xl shadow-lg",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Complete Your Profile"}),l&&y.jsx("div",{className:"mb-4 text-red-700 font-semibold",children:l}),f&&y.jsx("div",{className:"mb-4 text-green-700 font-semibold",children:f}),y.jsxs("form",{className:"space-y-4",onSubmit:x,children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Phone"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(DC,{}),y.jsx("input",{name:"phone_number",value:h.phone_number||"",onChange:b,className:"w-full p-2 border rounded"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Address"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(TC,{}),y.jsx("input",{name:"address",value:h.address||"",onChange:b,className:"w-full p-2 border rounded"})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-1",children:"City"}),y.jsx("input",{name:"city",value:h.city||"",onChange:b,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-1",children:"State"}),y.jsx("input",{name:"state",value:h.state||"",onChange:b,className:"w-full p-2 border rounded"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Zipcode"}),y.jsx("input",{name:"zip_code",value:h.zip_code||"",onChange:b,className:"w-full p-2 border rounded"})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{type:"submit",className:"px-4 py-2 bg-linear-amber text-white rounded cursor-pointer",disabled:r,children:r?"Saving...":"Save & Continue"}),y.jsx("button",{type:"button",onClick:()=>t("/"),className:"px-4 py-2 border rounded cursor-pointer",children:"Cancel"})]})]})]})})}const Xc=[{id:1,name:"Max",type:"Dog",breed:"Golden Retriever",age:3,gender:"Male",status:"Available",image:"",health:"Excellent",size:"Large"},{id:2,name:"Luna",type:"Cat",breed:"Siamese",age:2,gender:"Female",status:"Available",image:"",health:"Good",size:"Medium"},{id:3,name:"Charlie",type:"Dog",breed:"Beagle",age:4,gender:"Male",status:"Reserved",image:"",health:"Excellent",size:"Medium"},{id:4,name:"Bella",type:"Cat",breed:"Persian",age:1,gender:"Female",status:"Available",image:"",health:"Excellent",size:"Small"},{id:5,name:"Rocky",type:"Dog",breed:"German Shepherd",age:5,gender:"Male",status:"Available",image:"",health:"Good",size:"Large"},{id:6,name:"Mittens",type:"Cat",breed:"Tabby",age:3,gender:"Female",status:"Available",image:"",health:"Excellent",size:"Medium"}];function jI(){const t=Qt(),e=["/","/login","/signup","/profile"].includes(t.pathname);return y.jsxs(y.Fragment,{children:[y.jsxs(zS,{children:[y.jsx(en,{path:"/",element:y.jsx(BC,{})}),y.jsx(en,{path:"/login",element:y.jsx(jC,{})}),y.jsx(en,{path:"/signup",element:y.jsx(qI,{})}),y.jsx(en,{path:"/admindashboard",element:y.jsx(Li,{requiredRole:["admin","staff"],children:y.jsx(JC,{})})}),y.jsx(en,{path:"/browsepetsadmin",element:y.jsx(Li,{requiredRole:["admin","staff"],children:y.jsx(XC,{pets:Xc})})}),y.jsx(en,{path:"/applicationadmin",element:y.jsx(Li,{requiredRole:["admin","staff"],children:y.jsx(eA,{})})}),y.jsx(en,{path:"/browsepet",element:y.jsx(Li,{children:y.jsx(nA,{pets:Xc})})}),y.jsx(en,{path:"/pet/:id",element:y.jsx(Li,{children:y.jsx(rA,{})})}),y.jsx(en,{path:"/profile",element:y.jsx(Li,{children:y.jsx(BI,{})})}),y.jsx(en,{path:"/application",element:y.jsx(Li,{children:y.jsx(oA,{pets:Xc})})})]}),!e&&y.jsx(LI,{})]})}function zI(){return y.jsx(cE,{children:y.jsx(jI,{})})}Kx.createRoot(document.getElementById("root")).render(y.jsx(M.StrictMode,{children:y.jsx(zI,{})}));
